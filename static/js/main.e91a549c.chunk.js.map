{"version":3,"sources":["redux/actions/actionTypes.js","redux/reducers/session.js","redux/reducers/plots.js","redux/reducers/active.js","redux/reducers/loading.js","redux/reducers/persist.js","redux/reducers/index.js","redux/store/index.js","redux/actions/index.js","components/settings/inputFields/TextInput.tsx","components/prompts/Prompt.js","apis/PythonApi.js","utils/hotkeys.js","components/plots/PlotCard.js","components/tabs/Tab.js","components/tabs/Tabs.js","components/plots/PlotDashboard.js","components/structures/StructureTag.js","components/controls/Controls.js","components/controls/NavigateButton.js","components/structures/PlotableTag.js","components/structures/StructurePicker.js","components/settings/inputFields/Dropdown.tsx","components/plotInitializer/PlotTypePicker.js","components/plotInitializer/TabPicker.js","components/plotInitializer/StructureRow.js","components/plotInitializer/MergeMethodPicker.js","components/plotInitializer/StructuresGroup.js","components/plotInitializer/PlotableRow.js","components/plotInitializer/PlotInitializer.js","components/settings/inputFields/Switch.tsx","components/settings/inputFields/ColorPicker.tsx","components/settings/inputFields/RangeSlider.tsx","components/settings/inputFields/Range.tsx","components/settings/inputFields/Numeric.tsx","components/settings/inputFields/Array.tsx","components/settings/inputFields/List.tsx","components/settings/inputFields/CreatableDropown.tsx","components/settings/inputFields/DictInput.tsx","components/settings/inputFields/CreatableDict.tsx","components/settings/InputField.tsx","components/settings/SettingsContainer.tsx","pages/PlotTweaking.tsx","pages/Settings.tsx","components/pythonMethods/Method.js","components/pythonMethods/Methods.js","pages/PlotMethods.js","components/settings/inputFields/Files.tsx","components/controls/ConnectionStatus.js","components/structureView/MoleculeViewer.js","pages/PlotEditor.js","components/loading/NotConnected.js","pages/SislDocs.js","pages/Plots.js","App.tsx","serviceWorker.js","index.js"],"names":["ADD_PLOTS","REMOVE_PLOT","SET_STRUCTURES","SET_PLOTABLES","SET_ACTIVE_PLOT","SET_ACTIVE_TAB","SET_ACTIVE_STRUCTS","SET_ACTIVE_PLOTABLES","DEACTIVATE_STRUCT","DEACTIVATE_PLOTABLE","SET_SESSION","CLEAR_SESSION","START_LOADING_PLOT","END_LOADING_PLOT","SET_ACTIVE_PAGE","SET_PLOTABLE_PLOTS","defaultState","session","newState","state","action","type","console","log","warn","chosenPlots","plotables","plotableID","plots","newPlots","_","omit","plotID","plot","undefined","tab","structs","page","active","activeTab","activeTabInSession","find","tabs","anyTab","length","id","structsToDeactivate","Array","isArray","structID","filter","includes","pageName","plotablesToDeactivate","loading","from","Date","persist","key","whitelist","reducer","persistReducer","storage","combineReducers","browser","createResponsiveStateReducer","small","medium","selectActiveStructs","map","structures","selectActivePlotables","selectActivePlot","getStoreAndPersistor","store","createStore","rootReducer","responsiveStoreEnhancer","persistor","persistStore","setCurrentSession","addPlots","tabsIDs","setNewStructures","newStructures","setSessionTabs","setActivePlot","setActiveTab","setActiveStructs","deactivateStruct","informLoadingPlot","informLoadedPlot","setActivePage","setActivePlotables","deactivatePlotable","Text","props","value","label","setting","name","TextField","variant","onChange","e","target","style","width","inputField","params","Prompt","controlClose","closeToast","this","callback","paddingBottom","content","TextInput","setState","inputProps","Button","onClick","Component","prompt","toast","autoClose","closeOnClick","onClose","arg","connect","address","apiAddress","externalListeners","socket","io","listeners","forEach","listener","on","connectionTimeOut","setTimeout","currentAddress","newAddress","trim","connected","disconnect","close","onConnect","args","push","onDisconnect","setupListeners","clearTimeout","requestSession","reason","askForAuth","err","handleError","error","document","dispatchEvent","CustomEvent","detail","info","authenticating","toastPrompt","username","emit","path","loadSession","newProcessId","uuidv4","_sessionMethod","methodName","kwargs","updateSessionSettings","newSettings","undoSessionSettings","addTab","tabName","removeTab","tabID","updateTab","newParams","setTabLayouts","layouts","saveSession","getPlot","plot_id","newPlot","newPlotKwargs","removePlot","movePlot","mergePlots","plotIDs","to","_plotMethod","showPlotFullScreen","updatePlotSettings","settings","undoPlotSettings","updatePlotLayout","layoutUpdates","updateFigure","layout","data","frames","overwrite","callPlotShortcut","sequence","dispatchPlotEvent","event","savePlot","sendFile","file","user","api","GLOBAL_HOT_KEYS","SHOW_AVAIL_HOTKEYS","GO_TO_SETTINGS","GO_TO_DASHBOARD","GO_TO_MOLECULEVIEWER","SAVE_SESSION","sequences","LOAD_SESSION","TABS_HOT_KEYS","global","MOVE_TO_NEXT_TAB","MOVE_TO_PREVIOUS_TAB","NEW_TAB","TRY","PLOTS_HOT_KEYS","PLOT_CARD_HOT_KEYS","GO_TO_PLOT_SETTINGSEDITING","GO_TO_PLOT_LAYOUTEDITING","GO_TO_PLOT_METHODS","FULL_SCREEN","UNDO_PLOT_SETTINGS","PLOT_TWEAKING_HOT_KEYS","UNDO_SETTINGS","SUBMIT_ALL_SETTINGS","PlotCard","hotKeys","querySelectorAll","hotKeysHandlers","goToPlotLayoutEditing","goToPlotSettingsEditing","goToPlotMethods","undoSettings","shortcuts","PythonApi","handlePlotClick","points","handlePlotRelayout","keys","Object","setPlotAsActive","togglePlotAsActive","isActivePlot","rootDir","isLoading","addEventListener","cou","Math","random","Card","className","borderRadius","figure","backColor","paper_bgcolor","hotKeysKeyMap","TESTING","reduce","plotShortcuts","shortcut","replace","activeStyles","component","elevation","keyMap","handlers","allowChanges","height","display","flexDirection","overflow","background","paddingTop","flex","ref","plotlyRef","useResizeHandler","autosize","onRelayout","onUpdate","config","editable","responsive","paddingLeft","paddingRight","marginBottom","Provider","size","margin","color","textAlign","IconButton","disable","showTooltips","mapDispatchToProps","Tab","updateTabs","updateTabParams","newTabParams","updateTabName","blur","textContent","contentEditable","onBlur","onKeyUp","keyCode","Tabs","moveThroughTabs","newTab","direction","newI","i","findIndex","noTabsMessage","flexWrap","alignItems","marginTop","ResponsiveReactGridLayout","WidthProvider","Responsive","selectedPlotStyles","backgroundColor","PlotDashboard","currentBreakpoint","compactType","mounted","lg","emptyDashboard","noPlotsMessage","justifyContent","fontSize","fontWeight","padding","toggleSelected","selected","onBreakpointChange","breakpoint","onResizeStop","finalL","initL","higher","h","shouldComponentUpdate","newProps","_plotsInLayout","hasDifferentPlots","isDifferentTab","isEqual","onLayoutChange","onDrop","elemParams","alert","JSON","stringify","getLayout","newPlotLayout","draggableCancel","measureBeforeMount","useCSSTransforms","preventCollision","rowHeight","generateDOM","removePlots","movePlots","iTab","renderSelectedManager","nSelected","Paper","merge","toggleSelect","l","ctrlKey","hotKeysHandler","pick","React","defaultProps","cols","md","sm","xs","xxs","x","grid_dims","y","w","setTabPlots","withHotKeys","StructureTag","struct","toggleStruct","split","slice","useStyles","makeStyles","theme","root","transform","flexGrow","exampleWrapper","position","spacing","radioGroup","speedDial","bottom","right","top","left","SpeedDials","classes","useState","open","setOpen","hidden","SpeedDial","ariaLabel","icon","SpeedDialIcon","onOpen","actions","SpeedDialAction","tooltipTitle","tip","tooltipPlacement","href","Controls","saveCurrentSession","syncWithSession","showPage","Control","tooltip","floating","ROUTES","hotKey","NavigateButton","route","PlotableTag","plotable","togglePlotable","StructurePicker","togglePlotInitializer","selectedStructs","selectedPlotables","forceShow","forceHide","selectStructs","selectPlotables","xor","toggleStructDisplay","displayStructures","togglePlotablesDisplay","displayPlotables","toggleAlphabeticSorting","toggles","alphabeticSorting","toggleSearchByFolder","searchByFolder","toggleSelectedSorting","selectedSorting","toggleAll","onDisplay","filterStructs","onDisplaySelected","intersection","displayedStructs","displayedPlotables","searchString","object","index","isPlotable","newStructs","str","toTest","RegExp","test","newSearchString","noStructuresMessage","noMatchingStructuresMessage","activeStructs","activePlotables","structsAndPlotables","orderBy","autocomplete","placeholder","marginRight","cursor","values","obj","Dropdown","disableClearable","isClearable","freeSolo","isCreatable","multiple","isMulti","options","getValueFromObj","sanitizeValue","getObjFromValue","Autocomplete","fullWidth","getOptionLabel","option","renderInput","PlotTypePicker","plotOptions","TabPicker","StructureRow","structure","groupActive","marginLeft","moveStructToActiveGroup","OPTIONS","MergeMethodPicker","StructuresGroup","initializingOptions","plotClasses","mergeMethod","activenessStyles","splitGroup","removeGroup","setGroupAsActive","Grid","container","transition","borderTopLeftRadius","item","val","onInitParamChange","PlotableRow","plotOption","plotTypes","setPlotablePlots","PlotInitializer","onStructsUpdate","prevActiveStructs","structureGroups","markActiveGroup","newGroup","activeGroupIndex","activeGroup","cleanUnselectedFromGroups","groups","cleanGroups","group","groupParams","defaultTabID","addGroup","iGroup","g","splitted","updateGroupInitParams","toggleVisibility","Event","updateInitializingOptions","getNewPlot","plotType","plotable_path","plot_method","animation","plotClass","nothingToPlotMessage","prevProps","paramName","endIcon","SwitchInput","Switch","checked","ColorPicker","tempcolor","setTempcolor","showColorPicker","setShowColorPicker","colorPicker","hex","onChangeComplete","RangeSlider","min","max","step","marks","Slider","getAriaLabel","valueLabelDisplay","Range","Number","number","Numeric","additionalProps","ArrayInput","handleNone","shape","fill","orientationStyles","vertical","inputStyle","newVal","cloneDeep","changeValue","DragHandle","SortableHandle","SortableItem","SortableElement","sortable","remove","SortableList","SortableContainer","children","sanitizeVal","ListInput","onSortEnd","arrayMove","oldIndex","newIndex","useDragHandle","onValueChange","removeItem","itemInput","default","CreatableDropdown","DictInput","fields","field","paramKey","paramValue","CreatableDictInput","new_cat_value","setNewCatValue","creatable_fields","getParam","onItemChange","renderItem","param","deleteItem","addNewItem","INPUT_FIELDS","textinput","bool","dict","rangeslider","range","vector","list","changeSettingValue","newValue","changeSettings","onSettingChangeType","onSettingChangeExtraParams","actionType","settingKey","extraParams","InputComponent","fieldLayout","tooltipParams","help","SettingsForm","changedFields","setChangedFields","paramGroup","settingsGroup","groupedParams","subGrouped","groupBy","nullSubGroup","description","subGroups","initialValues","onSubmit","submitSettings","fromEntries","entries","handleSubmit","handleChange","setFieldValue","parse","SettingGroupsCollapse","groupKey","Icon","SettingsContainer","paramGroups","iParamGroup","activePlot","plotSettings","setsCont","mediaType","maxHeight","multiline","isEmpty","Method","applyMethod","renderDetails","showingDetails","ExpansionPanel","ExpansionPanelSummary","ExpansionPanelDetails","source","ExpansionPanelActions","Methods","PlotMethods","FilesInput","useCallback","acceptedFiles","useDropzone","getRootProps","getInputProps","ConnectionStatus","MoleculeViewer","PlotEditor","unsubmittedSettings","plotly","debug","advancedTraceTypeSelector","Box","mesh","useRef","hovered","setHover","setActive","useFrame","current","rotation","scale","onPointerOver","onPointerOut","attach","NotConnected","sign","SislDocs","process","configure","logLevel","simulateMissingKeyPressEvents","Plots","getApplicationKeyMap","askForSession","plotToInitialize","currentlyShowing","loadingPlots","justUpdated","indexOf","MainComponent","Settings","PlotTweaking","connectedProps","minWidth","borderRight","Files","camera","setNewPlotables","newPlotables","App","Boolean","window","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.e91a549c.chunk.js","sourcesContent":["export const ADD_PLOTS = 'ADD_PLOTS'\nexport const REMOVE_PLOT = 'REMOVE_PLOT'\nexport const ADD_TABS = 'ADD_TABS'\nexport const SET_STRUCTURES = 'SET_STRUCTURES'\nexport const SET_PLOTABLES = 'SET_PLOTABLES'\nexport const SET_TAB_PLOTS = 'SET_TAB_PLOTS'\nexport const SET_SESSION_TABS = 'SET_SESSION_TABS'\n//Activate\nexport const SET_ACTIVE_PLOT = 'SET_ACTIVE_PLOT'\nexport const SET_ACTIVE_TAB = 'SET_ACTIVE_TAB'\nexport const SET_ACTIVE_STRUCTS = 'SET_ACTIVE_STRUCTS'\nexport const SET_ACTIVE_PLOTABLES = 'SET_ACTIVE_PLOTABLES'\n//Deactivate\nexport const DEACTIVATE_STRUCT = 'DEACTIVATE_STRUCT'\nexport const DEACTIVATE_PLOTABLE = 'DEACTIVATE_PLOTABLE'\nexport const SET_SESSION = 'SET_SESSION'\nexport const CLEAR_SESSION = 'CLEAR_SESSION'\nexport const START_LOADING_PLOT = 'START_LOADING_PLOT'\nexport const END_LOADING_PLOT = 'END_LOADING_PLOT'\nexport const SET_ACTIVE_PAGE = 'SET_ACTIVE_PAGE'\n\nexport const SET_PLOTABLE_PLOTS = 'SET_PLOTABLE_PLOTS'\n\n\n","import { CLEAR_SESSION, SET_SESSION, SET_PLOTABLE_PLOTS, DEACTIVATE_PLOTABLE} from '../actions/actionTypes'\n\nconst defaultState = {}\n\nconst session = (state = defaultState, action) => {\n    let newState;\n    switch (action.type) {\n        case SET_SESSION:\n            console.log(\"REDUX: Setting current session...\")\n            console.warn(action.session)\n            newState = action.session\n            console.log(newState)\n\n            return newState\n        \n        case CLEAR_SESSION:\n            return defaultState\n\n        case DEACTIVATE_PLOTABLE:\n\n            action.chosenPlots = []\n\n            newState = {\n                ...state,\n                plotables: {\n                    ...state.plotables,\n                    [action.plotableID]: {\n                        ...state.plotables[action.plotableID],\n                        chosenPlots: action.chosenPlots\n                    }\n                }\n            }\n\n            return newState\n\n        case SET_PLOTABLE_PLOTS:\n\n            newState = {\n                ...state,\n                plotables: {\n                    ...state.plotables,\n                    [action.plotableID]: {\n                        ...state.plotables[action.plotableID],\n                        chosenPlots: action.chosenPlots\n                    }\n                }\n            }\n\n            return newState\n\n        default:\n            return state\n    }\n}\n\nexport default session","import { ADD_PLOTS, CLEAR_SESSION, REMOVE_PLOT } from '../actions/actionTypes'\nimport _ from \"lodash\"\n\nconst defaultState = {};\n\nconst plots = (state = defaultState, action) => {\n    let newState;\n    switch (action.type) {\n        case ADD_PLOTS:\n            console.log(\"REDUX: Storing a new plot...\")\n            newState = {\n                ...state,\n                ...action.newPlots,\n            }\n            console.log(newState)\n            return newState\n        \n        case REMOVE_PLOT:\n            return _.omit(state, [action.plotID])\n        \n        case CLEAR_SESSION:\n            return defaultState\n            \n        default:\n            return state\n    }\n}\n\nexport default plots","import { \n    SET_ACTIVE_PLOT,\n    SET_ACTIVE_TAB,\n    CLEAR_SESSION,\n    SET_ACTIVE_STRUCTS,\n    SET_ACTIVE_PLOTABLES,\n    DEACTIVATE_STRUCT,\n    SET_ACTIVE_PAGE,\n    DEACTIVATE_PLOTABLE,\n    SET_STRUCTURES,\n    SET_PLOTABLES,\n    SET_SESSION\n} from '../actions/actionTypes'\n\nimport _ from \"lodash\"\n\nconst defaultState = {plot: undefined, tab: undefined, structs: [], plotables:[], page: \"plots\"};\n\nconst active = (state = defaultState, action) => {\n    let newState;\n    switch (action.type) {\n        case SET_ACTIVE_PLOT:\n            console.log(\"REDUX: Setting active plot...\")\n            newState = {\n                ...state,\n                plot: action.plotID,\n            }\n            console.log(newState)\n            return newState\n\n        case SET_ACTIVE_TAB:\n            console.log(\"REDUX: Setting active tab...\")\n            newState = {\n                ...state,\n                tab: action.activeTab,\n            }\n            console.log(newState)\n            return newState\n        \n        case SET_SESSION:\n\n            const activeTabInSession = _.find(action.session.tabs, [\"id\", state.tab])\n            const anyTab = action.session.tabs.length > 0\n            \n            if (activeTabInSession) {\n                return state\n            } else if (anyTab){\n                return {...state, tab: action.session.tabs[0].id}\n            } else {\n                return { ...state, tab: null}\n            }\n        \n        case SET_ACTIVE_STRUCTS:\n            \n            newState = {\n                ...state,\n                structs: action.structs,\n            }\n\n            return newState\n        \n        case SET_STRUCTURES:\n\n            return { ...state, structs: []}\n        \n        case DEACTIVATE_STRUCT:\n\n            let structsToDeactivate = Array.isArray(action.structID) ? action.structID : [action.structID]\n\n            newState = {\n                ...state,\n                structs: state.structs.filter( structID => !structsToDeactivate.includes(structID) ),\n            }\n\n            return newState\n        \n        case SET_ACTIVE_PAGE:\n\n            newState = {\n                ...state,\n                page: action.pageName,\n            }\n\n            return newState\n        \n        case SET_ACTIVE_PLOTABLES:\n        \n            newState = {\n                ...state,\n                plotables: action.plotables,\n            }\n\n            return newState\n        \n        case SET_PLOTABLES:\n\n            return { ...state, plotables: [] }\n        \n        case DEACTIVATE_PLOTABLE:\n\n            let plotablesToDeactivate = Array.isArray(action.plotableID) ? action.plotableID : [action.plotableID]\n    \n            newState = {\n                ...state,\n                plotables: state.plotables.filter( plotableID => !plotablesToDeactivate.includes(plotableID) ),\n            }\n\n            return newState\n        \n        case CLEAR_SESSION:\n            return defaultState\n                \n        default:\n            return state\n    }\n}\n\nexport default active","import { \n    START_LOADING_PLOT,\n    END_LOADING_PLOT\n} from '../actions/actionTypes'\n\nimport _ from 'lodash';\n\nconst loading = (state = {plots:{}}, action) => {\n    let newState;\n    switch (action.type) {\n        case START_LOADING_PLOT:\n            console.log(\"REDUX: Setting active plot...\")\n            newState = {\n                ...state,\n                plots: {\n                    ...state.plots,\n                    [action.plot.id]: {\n                        ...action.plot,\n                        from: new Date()\n                    }\n                }\n            }\n            console.log(newState)\n            return newState\n        \n        case END_LOADING_PLOT:\n            console.log(\"REDUX: Changing plot settings (not submitting yet)...\")\n            newState = {\n                ...state,\n                plots: _.omit(state.plots, [action.plotID]),\n            }\n            console.log(newState)\n            return newState\n                \n        default:\n            return state\n    }\n}\n\nexport default loading","import storage from \"redux-persist/lib/storage\"\nimport { persistReducer } from 'redux-persist';\nexport function persist(key, whitelist, reducer) {\n    return persistReducer({\n        key,\n        storage,\n        whitelist,\n    }, reducer);\n}","import { combineReducers } from 'redux'\nimport {createResponsiveStateReducer} from 'redux-responsive'\n\nimport session from './session'\nimport plots from './plots'\nimport active from './active'\nimport loading from './loading'\nimport { persist } from './persist'\n\nexport default combineReducers({\n    session,\n    plots,\n    loading: persist('loading', ['plots'], loading),\n    active: persist( 'active', ['tab', 'plot'], active),\n    browser: createResponsiveStateReducer({\n        small: 600,\n        medium: 992,\n    })\n})\n\nexport const selectActiveStructs = (state) => {\n    return state.active.structs.map(structID => state.session.structures[structID])\n}\n\nexport const selectActivePlotables = (state) => {\n    return state.active.plotables.map(plotableID => state.session.plotables[plotableID])\n}\n\nexport const selectActivePlot = (state) => {\n    return state.plots[state.active.plot]\n}","import { createStore } from 'redux'\nimport {responsiveStoreEnhancer} from 'redux-responsive'\nimport { persistStore} from 'redux-persist'\n\nimport rootReducer from '../reducers'\n\nconst getStoreAndPersistor = () => {\n  let store = createStore(rootReducer, responsiveStoreEnhancer)\n  let persistor = persistStore(store)\n  //persistor.purge()\n  return { store, persistor }\n}\n\nexport default getStoreAndPersistor","import { \n    ADD_PLOTS,\n    REMOVE_PLOT,\n    ADD_TABS,\n    SET_STRUCTURES,\n    SET_TAB_PLOTS,\n    SET_SESSION_TABS,\n    SET_ACTIVE_PLOT,\n    SET_ACTIVE_TAB,\n    CLEAR_SESSION,\n    SET_SESSION,\n    SET_ACTIVE_STRUCTS,\n    DEACTIVATE_STRUCT,\n    START_LOADING_PLOT,\n    END_LOADING_PLOT,\n    SET_ACTIVE_PAGE,\n    DEACTIVATE_PLOTABLE,\n    SET_ACTIVE_PLOTABLES,\n    SET_PLOTABLES,\n    SET_PLOTABLE_PLOTS\n} from './actionTypes'\n\nexport const setCurrentSession = (session) => {\n\n    return {\n        type: SET_SESSION,\n        session\n    }\n}\n    \nexport const addPlots = (newPlots, tabsIDs) => ({\n    type: ADD_PLOTS,\n    newPlots,\n    tabsIDs\n})\n\nexport const removePlot = (plotID, tabID) => ({\n    type: REMOVE_PLOT,\n    plotID,\n    tabID\n})\n\nexport const changeSettings = (actionType, settingKey, value, extraParams) => ({\n    type: actionType, //Valid action types are all of type CHANGE_<something>_SETTINGS\n    settingKey,\n    value,\n    extraParams // Here the plotID is passed, for example, if the actionType is CHANGE_PLOT_SETTINGS\n})\n\nexport const addTabs = (newTabs) => ({\n    type: ADD_TABS,\n    newTabs\n})\n\nexport const setNewStructures = (newStructures) => ({\n    type: SET_STRUCTURES,\n    newStructures\n})\n\nexport const setTabPlots = (tabID, plots) => ({\n    type: SET_TAB_PLOTS,\n    tabID,\n    plots\n})\n\nexport const setSessionTabs = (tabs) => ({\n    type: SET_SESSION_TABS,\n    tabs\n})\n\nexport const setActivePlot = (plot) => ({\n    type: SET_ACTIVE_PLOT,\n    plotID: plot ? typeof(plot) == \"string\" ? plot : plot.id : undefined\n})\n\nexport const setActiveTab = (tab) => ({\n    type: SET_ACTIVE_TAB,\n    activeTab: tab\n})\n\nexport const clearSession = () => ({\n    type: CLEAR_SESSION,\n})\n\nexport const setActiveStructs = (structs) => ({\n    type: SET_ACTIVE_STRUCTS,\n    structs: structs\n})\n\nexport const deactivateStruct = (structID) => ({\n    type: DEACTIVATE_STRUCT,\n    structID\n})\n\nexport const informLoadingPlot = (plot) => ({\n    type: START_LOADING_PLOT,\n    plot\n})\n\nexport const informLoadedPlot = (plotID) => ({\n    type: END_LOADING_PLOT,\n    plotID\n})\n\nexport const setActivePage = (pageName) => ({\n    type: SET_ACTIVE_PAGE,\n    pageName\n})\n\nexport const setNewPlotables = (newPlotables) => ({\n    type: SET_PLOTABLES,\n    newPlotables\n})\n\nexport const setActivePlotables = (plotables) => ({\n    type: SET_ACTIVE_PLOTABLES,\n    plotables\n})\n\nexport const deactivatePlotable = (plotableID) => ({\n    type: DEACTIVATE_PLOTABLE,\n    plotableID\n})\n\nexport const setPlotablePlots = (plotableID, chosenPlots) => ({\n    type: SET_PLOTABLE_PLOTS,\n    plotableID,\n    chosenPlots\n})\n\n\n\n","import { FC } from 'react'\nimport TextField from '@material-ui/core/TextField'\nimport { InputFieldProps } from '../InputField'\n\nconst Text:FC<InputFieldProps<string>> = props => {\n    const value = props.value || \"\"\n\n    const label = props.label || (props.setting ? props.setting.name : \"\")\n\n    return (\n        <TextField\n            variant=\"outlined\"\n            value={value}\n            onChange={(e) => props.onChange(e.target.value)}\n            label={label}\n            style={{width: \"100%\", ...props.style}}\n            {...(props.inputField ? props.inputField.params : {})}/>\n    )\n}\n\nexport default Text;\n","import React, { Component } from 'react'\nimport { toast } from 'react-toastify'\n\nimport TextInput from \"../settings/inputFields/TextInput\"\nimport { Button } from '@material-ui/core'\n\nexport class Prompt extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = {\n            value: \"\"\n        }\n\n        if (props.controlClose){\n            props.controlClose(props.closeToast)\n        }\n    }\n\n    componentWillUnmount(){\n        this.props.callback(this.state.value)\n    }\n\n    render() {\n        return (\n            <div>\n                <div style={{paddingBottom: 10}}>{this.props.content}</div>\n                <TextInput value={this.state.value} onChange={(value) => {this.setState({value})}} label={this.props.inputProps.label}/>\n                <Button onClick={this.props.closeToast}>Submit</Button>\n            </div>\n        )\n    }\n\n}\n\nconst prompt = (content, callback, props) => {\n\n    toast(<Prompt content={content} callback={callback} {...props}/>, {autoClose: false, closeOnClick: false, onClose: (arg) => {console.warn(arg)} })\n\n}\n\nexport const connectionPrompt = (currentAddress, callback, props) => {\n\n    const content = <div>\n        <div>{\"Couldn't connect to \" + currentAddress}</div>\n        <div>Do you want to specify a different address for the API?</div>\n        <div> (http(s)://host:port)</div>\n    </div>\n\n    prompt(content, callback, {inputProps: {label: \"New address\" }, ...props})\n\n}\n\nexport const authPrompt = (callback, props) => {\n\n    const content = <div>\n        <div>Authorization is required</div>\n        <div>We need you to provide your username:</div>\n    </div>\n\n    prompt(content, callback, { inputProps: { label: \"Username\" }, ...props })\n\n} \n\nexport default prompt;\n","import io from 'socket.io-client';\nimport { toast } from 'react-toastify';\nimport { v4 as uuidv4 } from 'uuid';\nimport toastPrompt, {connectionPrompt} from '../components/prompts/Prompt';\n\nexport class PythonApi {\n\n    constructor() {\n\n        this.apiAddress = 'http://localhost:4000'\n        this.user = undefined\n\n        this.listeners = []\n        this.setupListeners()\n\n        this.connect()\n\n        /*This can be dangerous in the browser if the user let's other websites\n        access this tab. By default it is not possible, one would have to download\n        an extension to make it possible, but still. */ \n        document.api = this\n\n    }\n\n    connect = (address) => {\n\n        if (address) this.apiAddress = address\n\n        this.externalListeners = {}\n\n        this.socket = io(this.apiAddress);\n        this.listeners.forEach(listener => this.socket.on(...listener))\n\n        // Timeout to prompt the user for a new api address if the socket fails to connect\n        this.connectionTimeOut = setTimeout(() => {\n\n            connectionPrompt(this.apiAddress, (newAddress) => {\n                if (newAddress) {\n                    this.apiAddress = newAddress.trim()\n                }\n                if (!this.socket.connected){\n                    this.disconnect()\n                    this.connect()\n                }\n\n            }, {controlClose: (close) => this.onConnect(close)})\n            \n        }, 3000)\n\n        this.socket.connect()\n\n    }\n\n    disconnect = () => {\n        this.socket.disconnect()\n    }\n\n    on = (...args) => {\n\n        if (this.socket){\n            this.socket.on(...args)\n        }\n        // In this way all the listeners are registered each time\n        // The socket changes\n        this.listeners.push(args)\n    }\n\n    onConnect = (...args) => {\n        this.on('connect', ...args)\n    }\n\n    onDisconnect = (...args) => {\n        this.on('disconnect', ...args)\n    }\n\n    setupListeners = () => {\n\n        this.on('connect', () => {\n            //document.dispatchEvent(new Event('socket_connect'))\n            clearTimeout(this.connectionTimeOut)\n            this.requestSession()\n        });\n\n        this.on('disconnect', (reason) => {\n            console.warn(reason)\n            this.disconnect()\n            this.connect()\n        });\n\n        this.on('auth_required', this.askForAuth)\n\n        this.on('logged_in', this.requestSession)\n\n        this.on('error', (err) => this.handleError(err, \"socket\"));\n\n        this.on('server_error', (err) => this.handleError(err, \"server\"));\n        \n        this.on('current_session', (session) => {\n            console.error(session)\n            document.dispatchEvent(new CustomEvent(\"syncWithSession\", { detail: { session } }))\n        })\n\n        this.on('loading_plot', (info) => {\n            document.dispatchEvent(new CustomEvent(\"loadingPlot\", { detail: info }))\n        })\n\n        this.on('plot', (plot) => {\n            document.dispatchEvent(new CustomEvent(\"plot\", { detail: { plot } }))\n        })\n\n    }\n\n    handleError = (err, type) => {\n        if (type === \"server\"){\n            toast.error(\"THERE WAS A PYTHON ERROR:\\n\" + err)\n        } else {\n            toast.error(err)\n        }\n        \n    }\n\n    askForAuth = () => {\n\n        if (this.authenticating) return\n\n        this.authenticating = true\n        toastPrompt((username) => {\n            this.socket.emit(\"login\", username)\n            this.authenticating = false\n        })\n    }\n\n    requestSession = (path) => {\n        this.socket.emit('request_session', path)\n    }\n\n    loadSession = (path) => {\n        this.requestSession(path)\n    }\n\n    newProcessId = uuidv4\n\n    _sessionMethod = (methodName, kwargs, callback, ...args) => {\n        /* With this you can call any session method\n        \n        However this method should not be directly used.\n        A new method should be defined in this class to avoid \n        headaches with changes in method names in sisl.viz.Session\n        \n        You have the possibility to set up a callback, but remember that \n        by default the session will be emitted by the server and its update\n        is automatic. Therefore, only use the callback if you are using a\n        \"getter\" method and you want to act according to the results. You may\n        want also to inform the user that the process has finished. But again,\n        this behavior should also be taken care of automatically.*/\n\n        if (callback) {\n            \n        }\n\n        this.socket.emit(\"apply_method_on_session\", methodName, kwargs, ...args)\n    }\n\n    updateSessionSettings = (newSettings) => {\n        this._sessionMethod(\"update_settings\", newSettings)\n    }\n\n    undoSessionSettings = () => {\n        this._sessionMethod(\"undo_settings\")\n    }\n\n    addTab = (tabName) => {\n        this._sessionMethod(\"add_tab\", {name: tabName})\n    }\n\n    removeTab = (tabID) => {\n        this._sessionMethod(\"remove_tab\", {tabID})\n    }\n\n    updateTab = (tabID, newParams) => {\n        this._sessionMethod(\"update_tab\", { tabID, newParams })\n    }\n\n    setTabLayouts = (tabID, layouts) => {\n        this.updateTab(tabID, {layouts})\n    }\n\n    saveSession = (path) => {\n        this._sessionMethod(\"save\", {path})\n    }\n\n    getPlot = (plotID) => {\n        document.dispatchEvent(new CustomEvent(\"updatingPlot\", {detail: {plot_id: plotID}}))\n        this.socket.emit(\"get_plot\", plotID)\n    }\n\n    newPlot = (newPlotKwargs) => {\n        this._sessionMethod(\"new_plot\", newPlotKwargs)\n    }\n\n    removePlot = (plotID) => {\n        this._sessionMethod(\"remove_plot\", null, null, plotID)\n    }\n\n    movePlot = (plotID, tab) => {\n        this._sessionMethod(\"move_plot\", null, null, plotID, tab)\n    }\n\n    mergePlots = (plotIDs, to) => {\n        this._sessionMethod(\"merge_plots\", {to}, null, plotIDs)\n    }\n\n    _plotMethod = (plotID, methodName, kwargs, callback, ...args) => {\n        this._sessionMethod(\"_run_plot_method\", kwargs, callback, plotID, methodName, ...args)\n    }\n\n    showPlotFullScreen = (plotID) => {\n        this._plotMethod(plotID, \"show\")\n    }\n\n    updatePlotSettings = (plotID, settings) => {\n        this._plotMethod(plotID, \"update_settings\", settings)\n    }\n\n    undoPlotSettings = (plotID) => {\n        this._plotMethod(plotID, \"undo_settings\")\n    }\n\n    updatePlotLayout = (plotID, layoutUpdates) => {\n        this._plotMethod(plotID, \"update_layout\", layoutUpdates)\n    }\n\n    updateFigure = (plotID, {layout, data, frames, overwrite}) => {\n        this._plotMethod(plotID, \"update\", {layout, data, frames, overwrite})\n    }\n\n    callPlotShortcut = (plotID, sequence) => {\n        this._plotMethod(plotID, \"call_shortcut\", null, null, sequence)\n    }\n\n    dispatchPlotEvent = (plotID, event, data) => {\n        this._plotMethod(plotID, 'dispatch_event', data, null, event)\n    }\n\n    savePlot = (plotID, path) => {\n        this._plotMethod(plotID, \"save\", { path: path })\n    }\n\n    sendFile = (file) => {\n        console.log(\"TRYING TO SEND\")\n        this.socket.emit(\"upload_file\", file, file.name)\n    }\n\n}\n\nexport default new PythonApi();","\nexport const GLOBAL_HOT_KEYS = {\n\n    //HELP\n    SHOW_AVAIL_HOTKEYS:{\n        name: \"Show available hotkeys\",\n        sequence: \"shift+?\"\n    },\n\n    //NAVIGATION\n    GO_TO_SETTINGS: {\n        name: \"Go to settings\",\n        sequence: \"shift+s\",\n    },\n    GO_TO_DASHBOARD: {\n        name: \"Go to the plot's dashboard\",\n        sequence: \"shift+d\",\n    },\n    GO_TO_MOLECULEVIEWER: {\n        name: \"Go to the molecule viewer\",\n        sequence: \"shift+m\",\n    },\n\n    //SESSION\n    SAVE_SESSION: {\n        name: \"Save session\",\n        sequences: [\"ctrl+shift+s\", \"ctrl+alt+s\"]\n    },\n    LOAD_SESSION: {\n        name: \"Load session\",\n        sequences: [\"ctrl+shift+l\", \"ctrl+alt+l\"]\n    }\n\n}\n\nexport const ADDITIONAL_GLOBAL_HOT_KEYS = {\n    settings: {\n\n    },\n    plots:{\n        \n\n    }\n}\n\nexport const SETTINGS_HOT_KEYS = {\n\n}\n\nexport const TABS_HOT_KEYS = {\n    global: {\n        // TAB NAVIGATION\n        MOVE_TO_NEXT_TAB: {\n            name: \"Move to next tab\",\n            sequence: \"shift+t+right\",\n        },\n        MOVE_TO_PREVIOUS_TAB: {\n            name: \"Move to previous tab\",\n            sequence: \"shift+t+left\",\n        },\n        NEW_TAB: {\n            name: \"New tab\",\n            sequence: \"shift+t\",\n            action: \"keyup\"\n        },\n        TRY: \"shift+t+r\"\n    }\n}\n\nexport const PLOTS_HOT_KEYS = {\n    global: {\n        // TAB NAVIGATION\n        MOVE_TO_NEXT_TAB: {\n            name: \"Move to next tab\",\n            sequence: \"shift+right\",\n        },\n        MOVE_TO_PREVIOUS_TAB: {\n            name: \"Move to previous tab\",\n            sequence: \"shift+left\",\n        },\n    }\n}\n\nexport const PLOT_CARD_HOT_KEYS = {\n\n    GO_TO_PLOT_SETTINGSEDITING: {\n        name: \"Edit current plot's settings\",\n        sequence: \"s\"\n    },\n    GO_TO_PLOT_LAYOUTEDITING: {\n        name: \"Edit current plot's layout\",\n        sequence: \"e\"\n    },\n    GO_TO_PLOT_METHODS: {\n        name: \"Go to current plot methods\",\n        sequence: \"m\"\n    },\n    FULL_SCREEN: {\n        name: \"See current plot in full screen in a different browser's tab\",\n        sequence: \"f\"\n    },\n    REMOVE_PLOT: {\n        name: \"Remove current plot\",\n        sequences: [\"del\",\"backspace\"]\n    },\n    UNDO_PLOT_SETTINGS: {\n        name: \"Undo current plot settings\",\n        sequence: \"ctrl+z\"\n    },\n\n}\n\nexport const STRUCTURE_PICKER_HOT_KEYS = {\n\n}\n\nexport const SETTING_CONTAINER_HOT_KEYS = {\n\n    MOVE_EXPANDED_UP:{\n        name: \"Expand the previous settings group\",\n        sequence: \"up\"\n    },\n    MOVE_EXPANDED_DOWN:{\n        name: \"Expand the next settings group\",\n        sequence: \"down\"\n    }\n\n}\n\nexport const SETTING_GROUP_HOT_KEYS = {\n\n    SUBMIT_SETTINGS:{\n        name: \"Submit this group's settings\",\n        sequence: \"shift+enter\"\n    },\n    \n}\n\nexport const PLOT_TWEAKING_HOT_KEYS = {\n    global:{\n        UNDO_SETTINGS: {\n            name:\"Undo settings\",\n            sequence: \"ctrl+z\"\n        },\n\n        SUBMIT_ALL_SETTINGS: {\n            name: \"Submit all settings\",\n            sequence: \"shift+enter\"\n        }\n    }\n}","import React, { Component } from 'react'\nimport Plot from 'react-plotly.js';\nimport Card from \"@material-ui/core/Card\"\nimport { AiOutlineEdit, AiOutlineDelete, AiOutlineExport, AiOutlineFullscreen } from 'react-icons/ai'\nimport { FaHammer, FaSave } from 'react-icons/fa'\nimport { MdSettings } from 'react-icons/md'\nimport { IconContext } from 'react-icons'\n\nimport ReactTooltip from \"react-tooltip\"\n\nimport _ from \"lodash\"\n\n//--Redux\nimport { connect } from 'react-redux'\nimport { setActivePlot, removePlot, setSessionTabs, setActivePage, addPlots} from \"../../redux/actions\"\nimport PythonApi from '../../apis/PythonApi';\nimport { HotKeys } from 'react-hotkeys';\nimport { PLOT_CARD_HOT_KEYS } from '../../utils/hotkeys';\nimport { toast } from 'react-toastify';\nimport { IconButton } from '@material-ui/core';\n\nclass PlotCard extends Component {\n\n    constructor(props){\n        super(props)\n        this.state = {\n            isLoading: false,\n        }\n\n    }\n\n    hotKeys = () => document.querySelectorAll(\".plotCardHotKeys\")\n\n    hotKeysHandlers = {\n        GO_TO_PLOT_LAYOUTEDITING: () => this.goToPlotLayoutEditing(),\n        GO_TO_PLOT_SETTINGSEDITING: () => this.goToPlotSettingsEditing(),\n        GO_TO_PLOT_METHODS: () => this.goToPlotMethods(),\n        FULL_SCREEN: () => this.showPlotFullScreen(),\n        UNDO_PLOT_SETTINGS: () => this.undoSettings(),\n        REMOVE_PLOT: () => this.removePlot(),\n    }\n\n    callPlotShortcut = (sequence) => {\n        toast.warn(\"Applying \" + this.props.plot.shortcuts[sequence].name + \" shortcut\")\n        PythonApi.callPlotShortcut(this.props.plot.id, sequence)\n    }\n\n    handlePlotClick = ({points}) => {\n        const data = _.omit(points[0], [\"data\", \"fullData\", \"xaxis\", \"yaxis\"])\n        console.warn(data)\n        PythonApi.dispatchPlotEvent(this.props.plot.id, \"click\", data)\n    }\n\n    handlePlotRelayout = (layoutUpdates) => {\n        if (layoutUpdates[\"scene.camera\"]) return\n\n        const keys = Object.keys(layoutUpdates)\n        if (keys.includes(\"autosize\")) return \n        else if (keys.length === 0) return\n        else {\n            PythonApi.updatePlotLayout(this.props.plot.id, layoutUpdates)\n        }\n    }\n\n    undoSettings = () => {\n\n        PythonApi.undoPlotSettings(this.props.plot.id)\n    }\n\n    componentDidMount(){\n        document.addEventListener(\"plotResize\", (e) => {\n            \n            if (e.detail.id === this.props.plot.id || e.detail.id === \"all\"){\n                this.setState({cou: Math.random()})          \n            }\n            \n        })\n    }\n\n    removePlot = () => {\n        PythonApi.removePlot(this.props.plot.id)   \n    }\n\n    goToPlotSettingsEditing = () => {\n        this.setPlotAsActive()\n        this.props.setActivePage(\"plotTweaking\")\n    }\n\n    goToPlotLayoutEditing = () => {\n        this.setPlotAsActive()\n        this.props.setActivePage(\"plotLayoutEditor\")\n    }\n\n    goToPlotMethods = () => {\n        this.setPlotAsActive()\n        this.props.setActivePage(\"plotMethods\")\n    }\n\n    setPlotAsActive = () => {\n        this.props.setActivePlot(this.props.plot)\n    }\n\n    togglePlotAsActive = () => {\n        if (this.isActivePlot){\n            this.props.setActivePlot(undefined)\n        } else {\n            this.setPlotAsActive()\n        }\n    }\n\n    savePlot = () => {\n        let path = prompt(\"Please provide the path to save the plot.\\n\\nRoot directory:\\n\" + this.props.session.settings.rootDir)\n        if (!path) return\n\n        PythonApi.savePlot(this.props.plot.id, path)\n    }\n\n    get isActivePlot(){\n        return this.props.plot.id === this.props.active.plot\n    }\n\n    showPlotFullScreen = () => {\n        PythonApi.showPlotFullScreen(this.props.plot.id)\n    }\n\n    render() {\n\n        if (this.state.isLoading || !this.props.plot) {\n            return (\n                <Card \n                    className=\"plotcard\"\n                    style={{borderRadius: 15}}>\n                    <div>We are working hard to load your plot.</div>\n                </Card>\n            )\n        }\n\n        if (! this.props.plot.figure){\n            return (\n                <Card\n                    className=\"plotcard\"\n                    style={{ borderRadius: 15 }}>\n                    <div>A figure could not be generated for this plot.</div>\n                </Card>\n            )\n        }\n\n        let layout = this.props.plot.figure.layout;\n        let backColor = layout.paper_bgcolor || \"white\"\n\n        const hotKeysKeyMap = {\n            ...PLOT_CARD_HOT_KEYS,\n            TESTING: \"shift+r\",\n            ...Object.keys(this.props.plot.shortcuts).reduce((plotShortcuts, sequence) => {\n                let shortcut = this.props.plot.shortcuts[sequence]\n                if ([\"ctrl+z\", \"ctrl+alt+l\"].includes(sequence)) return plotShortcuts\n                    plotShortcuts[shortcut.name.replace(/ /g, \"_\")] = {\n                    sequence: sequence,\n                    ...shortcut\n                }\n                return plotShortcuts\n            }, {})\n        }\n\n        const hotKeysHandlers = {\n            ...this.hotKeysHandlers,\n            ...Object.keys(this.props.plot.shortcuts).reduce((plotShortcuts, sequence) => {\n                let shortcut = this.props.plot.shortcuts[sequence]\n                if ([\"ctrl+z\", \"ctrl+alt+l\"].includes(sequence)) return plotShortcuts\n                plotShortcuts[shortcut.name.replace(/ /g, \"_\")] = () => this.callPlotShortcut(sequence)\n                return plotShortcuts\n            }, {})\n        }\n\n        const activeStyles = this.isActivePlot && false ? {\n            borderStyle: \"dashed\",\n            borderWidth: \"2px\",\n            borderColor: \"black\"\n        } : {}\n\n        return <HotKeys\n                 className=\"plotCardHotKeys\"\n                 //onClick={(e) => {if (e.ctrlKey && false){this.togglePlotAsActive()}}}\n                 component={Card}\n                 elevation={this.props.elevation || 1}\n                 keyMap={hotKeysKeyMap} handlers={hotKeysHandlers} allowChanges={true}\n                 style={ {width: \"100%\", height: \"100%\", display: \"flex\", flexDirection: \"column\", borderRadius: 3, overflow:\"hidden\", background: backColor, paddingTop: 5, ...activeStyles, ...this.props.style}}>\n                <div style={{flex:1}}>\n                    <Plot\n                        ref={plotlyRef => {\n                            this.plotlyRef = plotlyRef;\n                        }}\n                        useResizeHandler\n                        style={{ width: \"100%\", height: \"100%\"}}\n                        data={this.props.plot.figure.data}\n                        layout={{autosize: true, ...layout}}\n                        frames={this.props.plot.figure.frames}\n                        onClick={this.handlePlotClick}\n                        onRelayout={this.handlePlotRelayout}\n                        onUpdate={(figure) => {}}//PythonApi.updateFigure(this.props.plot.id, figure)}\n                    config={{editable: true, responsive: true}}\n                    />\n                </div>\n                \n            <div style={{ display: \"flex\", paddingLeft: 10, paddingRight: 20, background: backColor, marginBottom: 5}} className=\"card-action\">\n                <IconContext.Provider value={{ size: 25, style: { margin: 5 }, color: \"#6eb6ff\"}}>\n                    <div style={{flex:1, textAlign: \"left\"}}>\n                        <IconButton size=\"small\" data-tip=\"Full screen (f)\" onClick={this.showPlotFullScreen}><AiOutlineFullscreen/></IconButton> \n                    </div>\n\n                    <div>\n                        <IconButton\n                            size=\"small\"\n                            data-tip=\"Settings (s)\"\n                            onClick={this.goToPlotSettingsEditing}><MdSettings /></IconButton>\n                        <IconButton\n                            size=\"small\"\n                            data-tip=\"Methods (m)\"\n                            onClick={this.goToPlotMethods}><FaHammer/></IconButton>\n                        <IconButton\n                            size=\"small\"\n                            data-tip=\"Edit layout (e)\"\n                            onClick={this.goToPlotLayoutEditing}><AiOutlineEdit/></IconButton>\n                        <IconButton size=\"small\" data-tip=\"Save plot (coming soon)\"><FaSave color=\"#ccc\"/></IconButton>\n                        <IconButton size=\"small\" data-tip=\"Export data (coming soon)\"><AiOutlineExport color=\"#ccc\"/></IconButton>\n                        <IconButton size=\"small\" data-tip=\"Remove (supr)\" onClick={this.removePlot}><AiOutlineDelete color=\"red\"/></IconButton>\n                    </div> \n                </IconContext.Provider>\n                <ReactTooltip disable={this.props.session.settings ? !this.props.session.settings.showTooltips : false} /> \n            </div>\n        </HotKeys>\n    }\n}\n\nconst mapStateToProps = state => ({\n    plots: state.plots,\n    active: state.active,\n    session: state.session\n})\n\nconst mapDispatchToProps = {\n    setSessionTabs,\n    setActivePlot,\n    removePlot,\n    setActivePage,\n    addPlots\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PlotCard);\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\n\nimport PythonApi from '../../apis/PythonApi'\nimport { setActiveTab } from '../../redux/actions'\n\nimport { MdRemoveCircle } from 'react-icons/md'\n\nclass Tab extends Component {\n\n    updateTabs = (tabs) => {\n        document.dispatchEvent(new CustomEvent(\"updateTabs\", {detail: {tabs: tabs}}))\n    }\n\n    updateTabParams = (tabID, newTabParams) => {\n\n        PythonApi.updateTab(tabID, newTabParams)\n    }\n\n    removeTab = (tabID) => {\n\n        PythonApi.removeTab(tabID)\n\n    }\n\n    updateTabName = (e) => {e.target.blur(); this.updateTabParams(e.target.id, {name: e.target.textContent})}\n\n    render() {\n\n        let {id: tabID, name: tabName} = this.props.tab\n\n        let active = tabID === this.props.active.tab\n\n        return (\n            <div\n                    key={tabID}\n                    className={active ? \"active plotTab\" : \"plotTab\"}\n                    onClick={active ? null : ()=> this.props.setActiveTab(tabID)}>\n                <div\n                    id={tabID}\n                    contentEditable={active}\n                    \n                    onBlur={this.updateTabName}\n                    onKeyUp={(e) => {if (e.keyCode === 13) this.updateTabName(e)}}\n                    >{tabName}</div>\n                {active ? <div className=\"removeTabBut\" onClick={() => this.removeTab(tabID)}><MdRemoveCircle size={20}/></div> : null}\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    active: state.active,\n    tabs: state.tabs,\n})\n\nconst mapDispatchToProps = {\n    setActiveTab\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Tab);\n","import React, { Component } from 'react'\nimport Tab from './Tab'\nimport { setActiveTab } from '../../redux/actions'\nimport PythonApi from '../../apis/PythonApi'\nimport { connect } from 'react-redux'\nimport { MdAddCircle} from 'react-icons/md'\n\nimport _ from \"lodash\"\nimport { GlobalHotKeys } from 'react-hotkeys'\nimport { TABS_HOT_KEYS } from '../../utils/hotkeys'\n\nexport class Tabs extends Component {\n\n    hotKeysHandlers = {\n        MOVE_TO_NEXT_TAB: () => this.moveThroughTabs(\"right\"),\n        MOVE_TO_PREVIOUS_TAB: () => this.moveThroughTabs(\"left\"),\n        NEW_TAB: () => this.newTab(),\n        TRY: () => console.warn(\"YES\")\n    }\n    \n    moveThroughTabs = (direction) => {\n\n        const tabs = this.props.tabs\n        const i = _.findIndex(tabs, [\"id\", this.props.active.tab])\n\n        var newI;\n        if (direction === \"left\"){\n            newI = i !== 0 ? i-1 : tabs.length -1\n        } else if (direction === \"right\"){\n            newI = i !== tabs.length - 1 ? i+1 : 0 \n        }\n\n        this.props.setActiveTab(tabs[newI].id)\n    }\n\n    updateTabs = (tabs) => {\n        document.dispatchEvent(new CustomEvent(\"updateTabs\", {detail: {tabs: tabs}}))\n    }\n\n    newTab = () => {\n\n        PythonApi.addTab()\n        \n    }\n\n    noTabsMessage = () => {\n        return <div style={{paddingLeft: 20}}>\n            <span style={{color: \"darkred\"}}>You don't seem to have any tab. </span>\n            That's wierd, but if that's what you want...\n        </div>\n    }\n\n    render() {\n\n        const tabs = this.props.tabs || []\n\n        return (\n            <div style={{display: \"flex\", flexWrap: \"wrap\", alignItems:\"center\", marginTop: 10, marginBottom: 5}}>\n                <GlobalHotKeys keyMap={TABS_HOT_KEYS.global} handlers={this.hotKeysHandlers}/>\n                {tabs.length === 0 ? \n                    this.noTabsMessage()\n                    :\n                    tabs.map( tab => <Tab tab={tab}/>)\n                }\n                <MdAddCircle onClick={this.newTab} data-tip=\"New tab\" data-place=\"right\" color=\"green\" size={20} className=\"newTabIcon\"/>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    tabs: state.session.tabs,\n    active: state.active\n})\n\nconst mapDispatchToProps = {\n    setActiveTab\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Tabs);\n","import React from \"react\";\n\nimport _ from \"lodash\"\n\n//--Components\nimport PlotCard from \"./PlotCard\";\n\n//--Redux\nimport { connect } from 'react-redux'\nimport { setTabPlots, setSessionTabs, setActivePlot} from \"../../redux/actions\"\nimport PythonApi from \"../../apis/PythonApi\";\n\nimport { Responsive, WidthProvider } from 'react-grid-layout';\nimport { Paper, Button } from '@material-ui/core';\n\nimport 'react-grid-layout/css/styles.css'\nimport'react-resizable/css/styles.css'\n\nimport { withHotKeys, GlobalHotKeys } from \"react-hotkeys\";\nimport { PLOTS_HOT_KEYS } from \"../../utils/hotkeys\";\nimport Tabs from \"../tabs/Tabs\";\n\nconst ResponsiveReactGridLayout = WidthProvider(Responsive);\n\nconst selectedPlotStyles = { backgroundColor: \"#757eff\",  paddingTop: 5, marginTop: -5}\n\nclass PlotDashboard extends React.Component {\n\n  constructor(props){\n    super(props)\n\n    this._plotsInLayout = false\n\n    this.state = {\n      selected: []\n    }\n\n  }\n\n  static defaultProps = {\n    className: \"layout\",\n    rowHeight: 30,\n    onLayoutChange: function() {},\n    cols: { lg: 12, md: 12, sm: 6, xs: 4, xxs: 2 },\n  };\n\n  state = {\n    currentBreakpoint: \"lg\",\n    compactType: \"vertical\",\n    mounted: false,\n    layouts: { lg: [] }\n  };\n\n  componentDidMount() {\n    this.setState({ mounted: true });\n    this.props.setActivePlot(undefined)\n  }\n\n  emptyDashboard = () => {\n    return null\n  }\n\n  noTabsMessage = () => {\n    return null\n  }\n\n  noPlotsMessage = () => {\n    //className=\"attentionLeft\"\n    return <div style={{display: \"flex\", flexDirection: \"column\", justifyContent: \"center\", alignItems: \"center\", height: \"100%\"}}>\n      <div style={{fontSize: \"5em\", fontWeight: \"bold\"}}>This is the plots dashboard.</div>\n      <div style={{fontSize: \"1.2em\"}}>We would like to display your plots here, but currently you don't seem to have any</div>\n      <div style={{backgroundColor: \"white\",  fontSize: \"2em\", margin: 20, padding: 20, paddingLeft: 50, paddingRight: 50, borderRadius: 70}}> You can try to create one by clicking on your structures</div>\n    </div>\n  }\n\n  static newPlotLayout = (plot, layouts) => {\n    return {\n      x: plot.grid_dims[0]*(layouts.lg.length),\n      y: 2,\n      w: plot.grid_dims[0],\n      h: plot.grid_dims[1],\n      i: plot.id,\n    };\n  }\n\n  generateDOM(layouts, plots, selected, toggleSelect) {\n    return _.map(layouts, function(l, i) {\n      return <div key={plots[i].id} onClick={(e) => e.ctrlKey ? toggleSelect(plots[i].id) : null}> \n        <PlotCard \n          plot={plots[i]} \n          style={selected.includes(plots[i].id) ? selectedPlotStyles : {}}/>\n      </div>\n    });\n  }\n\n  toggleSelected = (plotID) => {\n\n    let selected;\n\n    if (this.state.selected.includes(plotID)){\n      selected = this.state.selected.filter(id => id !== plotID)\n    } else {\n      selected = [...this.state.selected, plotID]\n    }\n\n    this.setState({selected})\n  }\n\n  onBreakpointChange = (breakpoint) => {\n    document.dispatchEvent(new CustomEvent(\"plotResize\", {detail: {id: \"all\"}}))\n  };\n\n  onResizeStop = (layouts, finalL, initL) => {\n    document.dispatchEvent(new CustomEvent(\"plotResize\", {detail: {id: initL.i, higher: finalL.h > initL.h}}))\n  }\n\n  shouldComponentUpdate = (newProps) => {\n\n    if( !this._plotsInLayout ) return true\n\n    const isDifferentTab = newProps.active.tab !== this.props.active.tab\n    let hasDifferentPlots;\n    if (!isDifferentTab){\n      let tab = _.find(this.props.tabs, [\"id\", this.props.active.tab])\n      let newTab = _.find(newProps.tabs, [\"id\", newProps.active.tab])\n\n      if (!tab || !newTab) return true\n      else if (!tab.layouts || !newTab.layouts) return true\n      else if (_.isEqual(tab.layouts, newTab.layouts)) return true\n      else if (! _.isEqual(this._plotsInLayout, newTab.plots)) return true\n\n      hasDifferentPlots = ! _.isEqual(tab.plots, newTab.plots)\n    }\n    \n    return isDifferentTab || hasDifferentPlots\n  }\n\n  onLayoutChange = (layout, layouts) => {\n    this.props.onLayoutChange(layout, layouts);\n\n    PythonApi.setTabLayouts(this.props.active.tab, layouts)\n  };\n\n  onDrop = (elemParams) => {\n    alert(`Element parameters: ${JSON.stringify(elemParams)}`);\n  };\n\n  getLayout = () => {\n    if (!this.props.active.tab ) return this.noTabsMessage()\n\n    let tab = _.find(this.props.tabs, [\"id\", this.props.active.tab])\n\n    if (!tab) return this.noTabsMessage()\n    if (tab.plots.length === 0) return this.noPlotsMessage()\n    \n    let plots = tab.plots.map(plotID => this.props.plots[plotID])\n\n    plots = plots.filter( plot => plot)\n\n    // Wait for all plots to draw a first layout\n    // THIS IS KEY in order to avoid the layout going crazy\n    if (plots.length !== tab.plots.length) return null\n\n    let layouts = tab.layouts\n\n    if (layouts.lg.length !== plots.length){\n      layouts.lg = plots.map(plot => {\n        let layout = _.find(layouts.lg, [\"i\", plot.id])\n        return layout || PlotDashboard.newPlotLayout(plot, layouts)\n      })\n    }\n\n    this._plotsInLayout = tab.plots\n\n    return (\n      <ResponsiveReactGridLayout\n        {...this.props}\n        layouts={layouts}\n        onBreakpointChange={this.onBreakpointChange}\n        onLayoutChange={this.onLayoutChange}\n        onDrop={this.onDrop}\n        onResizeStop={this.onResizeStop}\n        draggableCancel=\".infolayer, .draglayer, .shapelayer, #scene\" //Avoids plot being dragged when zooming and other drag actions\n        // WidthProvider option\n        measureBeforeMount={false}\n        // I like to have it animate on mount. If you don't, delete `useCSSTransforms` (it's default `true`)\n        // and set `measureBeforeMount={true}`.\n        useCSSTransforms={this.state.mounted}\n        compactType={this.state.compactType}\n        preventCollision={!this.state.compactType}\n        rowHeight={10}\n      >\n        {this.generateDOM(layouts.lg, plots, this.state.selected, this.toggleSelected)}\n      </ResponsiveReactGridLayout>\n    )\n\n  }\n\n  mergePlots = (to) => {\n    PythonApi.mergePlots(this.state.selected, to)\n    this.setState({selected: []})\n  }\n\n  removePlots = () => {\n    this.state.selected.forEach(plotID => PythonApi.removePlot(plotID))\n    this.setState({ selected: [] })\n  }\n\n  movePlots = () => {\n    // For now, we will just move the plots to the next tab\n    // (testing if it works)\n    let iTab = _.findIndex(this.props.tabs, [\"id\", this.props.active.tab ]) + 1\n    if (this.props.tabs.length === iTab) iTab = 0\n\n    console.warn(iTab)\n\n    this.state.selected.forEach(plotID => PythonApi.movePlot(plotID, this.props.tabs[iTab].id ))\n    this.setState({ selected: [] })\n  }\n\n  renderSelectedManager = () => {\n\n    const nSelected = this.state.selected.length\n\n    if (nSelected === 0) return null\n\n    const availableMerges = [\n      {\"to\": \"multiple\"}, {\"to\": \"subplots\"}, {\"to\": \"animation\"}\n    ]\n\n    return <Paper style={{padding: 10, marginBottom: 10}} elevation={3}>\n      {`You have ${nSelected} plots selected. What do you want to do?`}\n      <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n        {nSelected > 1 ? availableMerges.map(\n          merge => <Button onClick={() => this.mergePlots(merge.to)}>{`Merge as ${merge.to}`}</Button>) \n        : null}\n        <Button onClick={this.removePlots}>Remove</Button>\n        <Button onClick={this.movePlots}>Move to other tab</Button>\n      </div>\n    </Paper>\n  }\n\n  render() {\n\n    // We will reuse some of the tabs hot keys handlers\n    const tabs = <Tabs/>\n    const handlers = {...this.hotKeysHandler, ..._.pick(tabs.hotKeysHandler, [\"MOVE_TO_NEXT_TAB\", \"MOVE_TO_PREVIOUS_TAB\"]) }\n\n    // eslint-disable-next-line no-unused-vars\n    return (\n      <div style={{padding: 10, ...this.props.style}} className=\"scrollView\">\n        <GlobalHotKeys keyMap={PLOTS_HOT_KEYS.global} handlers={handlers}/>\n        {this.renderSelectedManager()}\n        {this.getLayout()}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  plots: state.plots,\n  structures: state.session.structures,\n  tabs: state.session.tabs,\n  active: state.active,\n  session: state.session\n})\n\nconst mapDispatchToProps = {\n  setSessionTabs,\n  setTabPlots,\n  setActivePlot\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withHotKeys(PlotDashboard));","import React, { Component } from 'react'\n\nexport default class StructureTag extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = {}\n    }\n\n    render() {\n\n        return (\n            <div \n                className={\"structTag \" + (this.props.struct.selected ? \"active\" : \"\")} \n                onClick={this.props.toggleStruct}\n                data-tip={this.props.struct.path}\n                data-effect=\"solid\">\n                <div>{this.props.struct.name.replace(\".fdf\", \"\")}</div>\n                <div style={{fontSize: \"0.7em\", color: \"gray\"}}>{\".../\" + this.props.struct.path.split(\"/\").slice(-2,-1)[0]}</div>\n            </div>\n        )\n    }\n}\n\n\n\n\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\n\nimport SpeedDial from '@material-ui/lab/SpeedDial';\nimport SpeedDialIcon from '@material-ui/lab/SpeedDialIcon';\nimport SpeedDialAction from '@material-ui/lab/SpeedDialAction';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button } from '@material-ui/core';\n\nimport { FaSave} from 'react-icons/fa'\nimport { AiOutlineUpload } from 'react-icons/ai'\nimport { setActivePage } from '../../redux/actions'\n\nimport PythonApi from '../../apis/PythonApi'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        transform: 'translateZ(0px)',\n        flexGrow: 1,\n    },\n    exampleWrapper: {\n        position: 'relative',\n        marginTop: theme.spacing(3),\n    },\n    radioGroup: {\n        margin: theme.spacing(1, 0),\n    },\n    speedDial: {\n        position: 'absolute',\n        '&.MuiSpeedDial-directionUp, &.MuiSpeedDial-directionLeft': {\n            bottom: theme.spacing(2),\n            right: theme.spacing(2),\n        },\n        '&.MuiSpeedDial-directionDown, &.MuiSpeedDial-directionRight': {\n            top: theme.spacing(2),\n            left: theme.spacing(2),\n        },\n    },\n}));\n\nfunction SpeedDials(props) {\n    const classes = useStyles();\n    const direction = React.useState('left')[0];\n    const [open, setOpen] = React.useState(false);\n    const hidden = React.useState(false)[0];\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const handleOpen = () => {\n        setOpen(true);\n    };\n\n    return (\n        <SpeedDial\n            ariaLabel=\"SpeedDial example\"\n            className={classes.speedDial}\n            hidden={hidden}\n            icon={<SpeedDialIcon />}\n            onClose={handleClose}\n            onOpen={handleOpen}\n            open={open}\n            direction={direction}\n        >\n            {props.actions.map((action) => (\n                <SpeedDialAction\n                    key={action.name}\n                    icon={action.icon}\n                    tooltipTitle={action.tip || action.name}\n                    tooltipPlacement={\"top\"}\n                    onClick={action.onClick}\n                    href={action.href}\n                />\n            ))}\n        </SpeedDial>\n    );\n}\n\nclass Controls extends Component {\n\n    hotKeysHandler = {\n        SAVE_SESSION: () => this.saveCurrentSession(),\n        LOAD_SESSION: () => this.loadSession()\n    }\n\n    syncWithSession = (session) => {\n        document.dispatchEvent(new CustomEvent(\"syncWithSession\", {detail: {session}}))\n    }\n\n    showPage = (pageName) => {\n        this.props.setActivePage(pageName)\n    }\n\n    saveCurrentSession = () => {\n        let path = prompt(\"Please provide the path to save the session.\\n\\nRoot directory:\\n\" + this.props.session.settings.rootDir)\n        if (!path) return \n\n        PythonApi.saveSession(path)\n    }\n\n    loadSession = () => {\n\n        let path = prompt(\"Please provide the path of the saved session.\\n\\nRoot directory:\\n\" + this.props.session.settings.rootDir)\n        if (!path) return\n\n        PythonApi.loadSession(path)\n    }\n\n    render() {\n\n        const actions = [{\n            name: \"Save session\",\n            icon: <FaSave size={20} />,\n            onClick: this.saveCurrentSession\n        }, {\n            name: \"Load session\",\n                icon: <AiOutlineUpload size={20} />,\n            onClick: this.loadSession\n        }]\n\n        return <SpeedDials actions={actions} />\n    }\n}\n\nexport class Control extends Component {\n\n    render(){\n        \n        return <Button\n                    data-tip={this.props.tooltip}\n                    style={this.props.style}\n                    floating\n                    icon={this.props.icon}\n                    onClick={this.props.onClick}\n                    className={this.props.className} />\n    }\n}\n\nconst mapStateToProps = state => ({\n    session: state.session,\n    active: state.active\n})\n\nconst mapDispatchToProps = {\n    setActivePage\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Controls);\n","import React, { Component } from 'react'\nimport { Control } from './Controls'\nimport { connect } from 'react-redux'\nimport { setActivePage } from '../../redux/actions'\nimport { IoMdSettings } from 'react-icons/io'\nimport { MdDashboard } from 'react-icons/md'\n\nexport const ROUTES = {\n    settings: {\n        name: \"Settings\",\n        icon: <IoMdSettings size={20}/>,\n        color: \"grey\",\n        hotKey: \"Shift + s\",\n    },\n    plots: {\n        name: \"Dashboard\",\n        icon: <MdDashboard/>,\n        color: \"grey\",\n        hotKey: \"Shift + d\"\n    }\n}\n\nclass NavigateButton extends Component {\n\n    showPage = () => {\n        this.props.setActivePage(this.props.to)\n    }\n\n    render() {\n\n        const route = ROUTES[this.props.to]\n\n        return <Control \n            icon={route.icon} \n            className={route.color}\n            tooltip={\"Go to \" + this.props.to + \" (\" + route.hotKey + \")\"}\n            onClick={this.showPage}\n            {...this.props}/>\n    }\n}\n\nconst mapDispatchToProps = {\n    setActivePage\n}\n\nexport default connect(null, mapDispatchToProps)(NavigateButton);\n","import React, { Component } from 'react'\n\nexport default class PlotableTag extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = {}\n    }\n\n    render() {\n\n        return (\n            <div \n                className={\"plotableTag \" + (this.props.plotable.selected ? \"active\" : \"\")} \n                onClick={this.props.togglePlotable}\n                data-tip={this.props.plotable.path}\n                data-effect=\"solid\">\n                <div>{this.props.plotable.name}</div>\n                <div style={{fontSize: \"0.7em\", color: \"gray\"}}>{\".../\" + this.props.plotable.path.split(\"/\").slice(-2,-1)[0]}</div>\n            </div>\n        )\n    }\n}\n\n","import React, { Component } from 'react'\nimport StructureTag from './StructureTag'\nimport _ from \"lodash\"\nimport { setActiveStructs, setActivePlotables } from '../../redux/actions'\nimport { MdFolder, MdFolderOpen} from 'react-icons/md'\n\nimport { connect } from 'react-redux'\nimport NavigateButton from '../controls/NavigateButton'\nimport PlotableTag from './PlotableTag'\nimport TextInput from '../settings/inputFields/TextInput'\n\nfunction wildTest(wildcard, str) {\n    const re = new RegExp(`^${wildcard.replace(/\\*/g,'.*').replace(/\\?/g,'.')}$`,'i');\n    return re.test(str); // remove last 'i' above to have case sensitive\n}\n\nexport class StructurePicker extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = {\n            searchString: \"\",\n            alphabeticSorting: false,\n            selectedSorting: false,\n            searchByFolder: false,\n            displayStructures: true,\n            displayPlotables: false,\n        }\n\n    }\n\n    togglePlotInitializer = (selectedStructs, selectedPlotables) => {\n\n        let forceShow, forceHide;\n\n        if ([...selectedStructs, ...selectedPlotables].length !== 0){\n            forceShow = true\n        } else {\n            forceHide = true\n        }\n\n        document.dispatchEvent(new CustomEvent(\"togglePlotInitializer\", {detail: {forceShow, forceHide}}))\n\n    }\n\n    selectStructs = (structs) => {\n        this.props.setActiveStructs(structs)\n        this.togglePlotInitializer(structs, this.selectedPlotables)\n    }\n\n    get selectedStructs(){\n        return this.props.activeStructs || []\n    }\n\n    selectPlotables = (plotables) => {\n        this.props.setActivePlotables(plotables)\n        this.togglePlotInitializer(this.selectedStructs, plotables)\n    }\n\n    get selectedPlotables(){\n        return this.props.activePlotables || []\n    }\n\n    toggleStruct = ({id: structID}) => {\n        \n        //this.setState({selectedStructures: _.xor(this.selectedStructs, [structID])})\n\n        this.selectStructs(_.xor(this.selectedStructs, [structID]))\n      \n    }\n\n    togglePlotable = ({id: plotableID}) => {\n        \n        //this.setState({selectedPlotableures: _.xor(this.selectedPlotables, [PlotableID])})\n\n        this.selectPlotables(_.xor(this.selectedPlotables, [plotableID]))\n      \n    }\n\n    toggleStructDisplay = () => {\n        this.setState({displayStructures: !this.state.displayStructures})\n    }\n\n    togglePlotablesDisplay = () => {\n        this.setState({displayPlotables: !this.state.displayPlotables})\n    }\n\n    toggleAlphabeticSorting = () => {\n\n        const toggles = { [false]: \"asc\", asc: \"desc\", desc: false}\n        this.setState({alphabeticSorting: toggles[this.state.alphabeticSorting]})\n    }\n\n    toggleSearchByFolder = () => {\n\n        this.setState({searchByFolder: !this.state.searchByFolder})\n    }\n\n    toggleSelectedSorting = () => {\n        this.setState({selectedSorting: !this.state.selectedSorting})\n    }\n\n    toggleAll = () => {\n\n        const onDisplay = Object.keys(this.filterStructs())\n\n        const onDisplaySelected = _.intersection([...this.selectedStructs, ...this.selectedPlotables], onDisplay).length === 0\n\n        const displayedStructs = _.intersection(Object.keys(this.props.structures), onDisplay)\n        const displayedPlotables = _.intersection(Object.keys(this.props.plotables), onDisplay)\n\n        this.selectStructs(onDisplaySelected ? \n            [...displayedStructs, ...this.selectedStructs] \n                : \n            this.selectedStructs.filter( structID => !displayedStructs.includes(structID) )\n        )\n\n        this.selectPlotables(onDisplaySelected ? \n            [...displayedPlotables, ...this.selectedPlotables] \n                : \n            this.selectedPlotables.filter( plotableID => !displayedPlotables.includes(plotableID) )\n        )\n\n    }\n\n    filterStructs = (searchString) => {\n\n        searchString = searchString || this.state.searchString\n\n        console.warn(searchString)\n        searchString = searchString.includes(\"*\") || searchString.includes(\"?\") ? searchString : \"*\"+searchString+\"*\"\n\n        let structs = {}\n\n        let toggles = [this.state.displayStructures, this.state.displayPlotables]\n        \n        const structures = this.props.structures || []\n        const plotables = this.props.plotables || []\n        let objs = [structures, plotables]\n\n        //Filter both structures and plotables\n        objs.forEach( (object, index) => {\n\n            if (!toggles[index]) return\n\n            const isPlotable = index === 1\n\n            let newStructs = Object.keys(object).reduce( (structs, structID) => {\n\n                const struct = object[structID]\n    \n                const toTest = this.state.searchByFolder ? struct.path.split(\"/\").slice(-2,-1)[0] : struct.name.replace(\".fdf\", \"\")\n    \n                if (wildTest(searchString, toTest)){\n    \n                    structs[structID] = { \n                        ...struct,\n                        selected: [...this.selectedStructs, ...this.selectedPlotables].includes(structID),\n                        isPlotable,\n                        id: structID,\n                    }\n                }\n    \n                return structs\n            }, {})\n\n            structs = {...structs, ...newStructs}\n\n        })\n\n        return structs\n\n    }\n\n    newSearchString = (searchString) => {\n\n        this.setState({searchString: searchString})\n    }\n\n    noStructuresMessage = () => {\n\n        return <div>\n            <div style={{color: \"darkred\"}}>No structures in the search scope right now.</div>\n            <div>Try to change file system settings or initialize the GUI from a different directory</div>\n            <NavigateButton to=\"settings\" style={{marginTop: 10}}/>\n        </div>\n    }\n\n    noMatchingStructuresMessage = () => {\n        return <div>\n            <div style={{color: \"darkred\"}}>No structure that matches your search.</div>\n            <div>Try to change file system settings or initialize the GUI from a different directory</div>\n            <NavigateButton to=\"settings\" style={{marginTop: 10}}/>\n        </div>\n    }\n\n    render() {\n\n        let structsAndPlotables = this.filterStructs()\n\n        if (this.state.alphabeticSorting){\n            structsAndPlotables = _.orderBy(structsAndPlotables, \"name\", this.state.alphabeticSorting)\n        }\n        if (this.state.selectedSorting){\n            structsAndPlotables = _.orderBy(structsAndPlotables, \"selected\", \"desc\")\n        }\n        \n        return (\n            <div style={{height: \"100vh\", overflow: \"hidden\", display: \"flex\", flexDirection: \"column\", backgroundColor: \"white\", ...this.props.style}}>\n                <div style={{ display: \"flex\", flexDirection: \"row\", justifyContent: \"center\", alignItems: \"center\", marginTop: 20, marginBottom: 20 }}>\n                    <TextInput\n                        label=\"Search string\"\n                        autocomplete=\"off\"\n                        placeholder=\"Enter your search string...\"\n                        style={{marginRight: 10}}\n                        value={this.state.searchString} \n                        onChange={this.newSearchString}/>\n                    <div\n                        data-tip=\"Search by folder\"\n                        className={\"structPickerToggle \" + (this.state.searchByFolder ? \"active\" : \"\")}\n                        onClick={this.toggleSearchByFolder} style={{cursor: \"pointer\"}}>{this.state.searchByFolder ? <MdFolder/> : <MdFolderOpen/>}</div>\n                </div>\n                <div style={{display: \"flex\", justifyContent: \"space-between\", marginBottom: 5}}>\n                    <span\n                        data-tip=\"Show structures\"\n                        className={\"structPickerToggle \" + (this.state.displayStructures ? \"active\" : \"\")} \n                        onClick={this.toggleStructDisplay} style={{cursor: \"pointer\"}}>Struct</span>\n                    <span\n                        data-tip=\"Show plotables\"\n                        className={\"structPickerToggle \" + (this.state.displayPlotables ? \"active\" : \"\")}\n                        onClick={this.togglePlotablesDisplay} style={{cursor: \"pointer\"}}>Plotables</span>\n                </div>\n                <div style={{display: \"flex\", justifyContent: \"space-between\", marginBottom: 5}}>\n                    <span \n                        className={\"structPickerToggle \" + (this.state.alphabeticSorting ? \"active\" : \"\")} \n                        onClick={this.toggleAlphabeticSorting} style={{cursor: \"pointer\"}}>A-Z</span>\n                    <span\n                        data-tip=\"Show selected first\"\n                        className={\"structPickerToggle \" + (this.state.selectedSorting ? \"active\" : \"\")}\n                        onClick={this.toggleSelectedSorting} style={{cursor: \"pointer\"}}>sel</span>\n                    <span \n                        className=\"structPickerToggle\" \n                        onClick={this.toggleAll} style={{cursor: \"pointer\"}}>All</span>\n                </div>\n\n                {Object.keys({...this.props.structures, ...this.props.plotables}).length === 0 ? \n                    this.noStructuresMessage() : Object.values(structsAndPlotables).length === 0 ? \n                        this.noMatchingStructuresMessage() : null\n                }\n\n                <div className=\"scrollView\" >\n                    {Object.values(structsAndPlotables).map(obj => {\n                        if (obj.isPlotable) {\n                            return <PlotableTag id={obj.id} \n                                plotable={obj} \n                                togglePlotable={ () => this.togglePlotable(obj)}\n                            />\n                        } else {\n                            return <StructureTag id={obj.id} \n                                struct={obj} \n                                toggleStruct={ () => this.toggleStruct(obj)}\n                            />\n                        }\n                        \n                    })}\n                </div>  \n            </div>\n            \n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    activeStructs: state.active.structs,\n    activePlotables: state.active.plotables,\n    plotables: state.session.plotables,\n    structures: state.session.structures\n})\n\nconst mapDispatchToProps = {\n    setActiveStructs,\n    setActivePlotables\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StructurePicker);\n","import { FC } from 'react'\n\nimport _ from 'lodash'\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport { TextField } from '@material-ui/core';\nimport { ParamInterface, InputFieldInterface } from '../../../interfaces';\n\nexport interface DropdownProps{\n    id?: string,\n    inputField: InputFieldInterface,\n    value: any[]|any,\n    label?: string,\n    setting?: ParamInterface,\n    onChange: (value: any[]|any) => void,\n    style?: Object\n}\n\nconst Dropdown:FC<DropdownProps> = props => {\n    const label = props.label || (props.setting ? props.setting.name : \"\")\n    // Parameters that define the behavior of the dropdown\n    const disableClearable = ! props.inputField.params.isClearable\n    const freeSolo = props.inputField.params.isCreatable\n    const multiple = props.inputField.params.isMulti\n    const options = props.inputField.params.options\n\n    const handleChange = (event:any, value:any, reason: string) => {\n\n        value = getValueFromObj(value)\n\n        props.onChange(value)\n    }\n\n    const getValueFromObj = (obj:any):any => {\n        let value;\n        if (multiple && Array.isArray(obj)) {\n            value = obj.map(getValueFromObj)\n        } else if (typeof obj === 'string'){\n            // A new value is being created\n            value = obj\n        } else if (obj !== null) {\n            value = obj.value\n        }\n\n        return sanitizeValue(value)\n    }\n\n    const getObjFromValue = (value:any):any => {\n        let obj;\n        if (multiple && Array.isArray(value)) {\n            obj = value.map(getObjFromValue)\n        } else if (value != null) {\n            obj = _.find(options, { value: value })\n            if (obj == null){\n                // This is a value that is not in the options.\n                obj = {value:value, label:value}\n            }\n        }\n\n        return sanitizeValue(obj)\n    }\n\n    const sanitizeValue = (value: any):any => {\n        if (value === null){\n            value = multiple ? [] : null\n        }\n        return value\n    }\n\n    const value = getObjFromValue(props.value)\n\n    return (\n            <Autocomplete\n                fullWidth\n                freeSolo={freeSolo}\n                multiple={multiple}\n                disableClearable={disableClearable}\n                value={value}\n                onChange={handleChange}\n                getOptionLabel={(option) => option.label}\n                options={options}\n                //helperText={this.props.setting.help}\n                renderInput={(params) => <TextField {...params} label={label} variant=\"outlined\" />}\n            />\n        \n    )\n}\n\nexport default Dropdown;\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\n\nimport Dropdown from '../settings/inputFields/Dropdown'\n\nclass PlotTypePicker extends Component {\n\n    render() {\n\n        const plotOptions = this.props.options || this.props.session.plotOptions\n\n        const inputField = {\n            params: {\n                options: plotOptions,\n                isClearable: true, isMulti: true,\n            }\n        }\n\n        return (\n            <Dropdown\n                value={this.props.value}\n                inputField={inputField}\n                onChange={this.props.onChange}\n                label=\"Plot type\"\n            />\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    tabs: state.tabs,\n    active: state.active,\n    session: state.session\n})\n\nexport default connect(mapStateToProps, null)(PlotTypePicker);","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\n\nimport Dropdown from '../settings/inputFields/Dropdown'\n\nimport _ from \"lodash\"\n\nclass TabPicker extends Component {\n    render() {\n\n        const options = this.props.tabs.map( (tab) => ({label: tab.name, value: tab.id }))\n\n        const value = this.props.value\n        if (value == null){\n            if (this.props.active.tab && _.find(this.props.tabs, [\"id\", this.props.active.tab])){\n                this.props.onChange(this.props.active.tab)\n            }\n        }\n\n        const inputField = {\n            params: {\n                options: options,\n                isClearable: false, isMulti: false,\n            }\n        }\n\n        return (\n            <Dropdown\n                value={value}\n                inputField={inputField}\n                onChange={this.props.onChange}\n                label=\"Tab\"\n            />\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    tabs: state.session.tabs,\n    active: state.active\n})\n\nexport default connect(mapStateToProps, null)(TabPicker);\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { deactivateStruct, setActiveStructs } from '../../redux/actions'\nimport { MdRemove } from 'react-icons/md'\n\nclass StructureRow extends Component {\n\n    render() {\n\n        const struct = this.props.structure\n        const groupActive = this.props.groupActive\n\n        return (\n            <div style={{display: \"flex\", flexDirection: \"row\", justifyContent: \"flex-start\", alignItems: \"center\", marginTop: 10, marginBottom: 10}}>\n                <div \n                    style={{color: \"darkred\", cursor: \"pointer\", display: \"flex\", justifyContent: \"center\", alignItems:\"center\"}}\n                    onClick={() => this.props.deactivateStruct(struct.id)}>\n                    <MdRemove/>\n                </div>\n                <div \n                    style={{cursor: groupActive ? \"default\" : \"pointer\", marginRight: 20, marginLeft: 20, padding: 10, backgroundColor: groupActive ? \"whitesmoke\" : \"#ccc\", borderRadius: 3}}\n                    onClick={groupActive ? undefined : this.props.moveStructToActiveGroup}>\n                    {struct.name.replace(\".fdf\", \"\")}\n                </div>\n                <div data-tip={struct.path}>{\".../\" + struct.path.split(\"/\").slice(-2,-1)[0]}</div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    active: state.active\n})\n\nconst mapDispatchToProps = {\n    deactivateStruct,\n    setActiveStructs\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StructureRow);\n","import React from 'react'\nimport Dropdown from '../settings/inputFields/Dropdown'\n\nconst OPTIONS = [\n    {label: \"Plot individually\", value:\"separatePlot\"},\n    {label: \"Merge in single plot\", value:\"jointPlot\"},\n    {label: \"Build animation\", value:\"jointAnimation\"},\n    {label: \"Animation for each\", value:\"separateAnimation\"},\n]\n\nconst MergeMethodPicker = (props) => {\n\n    const value = props.value\n    if (value == null) {\n        props.onChange(OPTIONS[0].value)\n    }\n\n    const inputField = {\n        params: {\n            options: OPTIONS,\n            isClearable: false, isMulti: false,\n        }\n    }\n\n    return (\n        <Dropdown\n            value={value}\n            inputField={inputField}\n            onChange={props.onChange}\n            label=\"Plotting method\"\n        />   \n    )\n}\n\nexport default MergeMethodPicker","import React, { Component } from 'react'\nimport PlotTypePicker from './PlotTypePicker'\nimport TabPicker from './TabPicker'\nimport StructureRow from './StructureRow'\nimport MergeMethodPicker from './MergeMethodPicker'\nimport { deactivateStruct } from '../../redux/actions'\nimport { connect } from 'react-redux'\nimport { Grid } from '@material-ui/core'\n\nclass StructuresGroup extends Component {\n\n    render() {\n\n        const {tabID, plotClasses, mergeMethod} = this.props.initializingOptions\n        const activenessStyles = this.props.active ? {\n            backgroundColor: \"#ccc\"\n        } : {\n            backgroundColor: \"whitesmoke\"\n        }\n\n        return (\n            <div>\n                <div style={{display: \"flex\", flexDirection: \"row\", margin: -4}}>\n                    <div className=\"structGroupAction\" style={activenessStyles} onClick={this.props.splitGroup}>Split</div>\n                    <div className=\"structGroupAction\" style={activenessStyles} onClick={this.props.removeGroup}>Remove</div>\n                    {this.props.active ? \n                        null\n                            : \n                        <div className=\"structGroupAction\" style={activenessStyles} onClick={this.props.setGroupAsActive}>Mark as receptive</div>\n                    }\n                    <div style={{flex:1}}/>\n                </div>\n                <Grid container spacing={1} style={{transition: \"all 300ms\", display:\"flex\", flexWrap: \"wrap\", padding: 20, marginTop: 0, marginBottom: 20, borderRadius: 5, borderTopLeftRadius: 0, justifyContent: \"center\", alignItems: \"center\", ...activenessStyles}}>\n                    <Grid item sm={12} md={4} lg={3}>\n                        {this.props.structs.map(struct => <StructureRow structure={struct} groupActive={this.props.active} moveStructToActiveGroup={() => this.props.moveStructToActiveGroup(struct.id)}/>)}\n                    </Grid>\n                    <Grid item sm={12} md={4} lg={3}>\n                        <PlotTypePicker value={plotClasses} onChange={(val) => this.props.onInitParamChange(\"plotClasses\", val) }/>\n                    </Grid>\n                    <Grid item sm={12} md={4} lg={3}>\n                        <TabPicker value={tabID} onChange={(val) => this.props.onInitParamChange(\"tabID\", val) }/>\n                    </Grid>\n                    <Grid item sm={12} md={4} lg={3}>\n                        <MergeMethodPicker value={mergeMethod} onChange={(val) => this.props.onInitParamChange(\"mergeMethod\", val) }/>\n                    </Grid>\n                </Grid>\n            </div>      \n        )\n    }\n}\n\nconst mapDispatchToProps = {\n    deactivateStruct\n}\n\nexport default connect(null, mapDispatchToProps)(StructuresGroup);","import React, { Component } from 'react'\nimport { MdRemove } from 'react-icons/md'\nimport { deactivatePlotable, setPlotablePlots } from '../../redux/actions'\n\nimport { connect } from 'react-redux'\nimport PlotTypePicker from './PlotTypePicker'\n\nclass PlotableRow extends Component {\n    render() {\n\n        const plotable = this.props.plotable\n\n        return (\n            <div style={{ display: \"flex\", flexDirection: \"row\", alignItems: \"center\", marginTop: 10 }}>\n                <div style={{ display: \"flex\", flexDirection: \"row\", alignItems: \"center\"}}>\n                    <div style={{ color: \"darkred\", cursor: \"pointer\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\" }} onClick={() => this.props.deactivatePlotable(plotable.id)}>\n                        <MdRemove />\n                    </div>\n                    <div data-tip={plotable.path} style={{marginLeft: 20}}>{\"(.../\" + plotable.path.split(\"/\").slice(-2, -1)[0] + \")\"}</div>\n                    <div style={{  marginLeft: 20, padding: 10, backgroundColor: \"whitesmoke\", borderRadius: 3 }}>\n                        {plotable.name}\n                    </div>\n                </div>\n                <div style={{flex: 1, paddingLeft: 20, paddingRight: 20}}>\n                    <PlotTypePicker \n                        options={plotable.plots.map(plotOption => ({value: plotOption, label: plotOption}))} \n                        value={plotable.chosenPlots}\n                        onChange={(plotTypes) => this.props.setPlotablePlots(plotable.id, plotTypes)}\n                    />\n                </div>\n                \n            </div> \n        )\n    }\n}\n\nconst mapDispatchToProps = {\n    deactivatePlotable,\n    setPlotablePlots\n}\n\nexport default connect(null, mapDispatchToProps)(PlotableRow);\n\n","import React, { Component } from 'react'\n\nimport _ from \"lodash\"\n\nimport Card from '@material-ui/core/Card'\n\nimport PythonApi from '../../apis/PythonApi'\n\nimport { connect } from 'react-redux'\nimport { selectActiveStructs, selectActivePlotables } from '../../redux/reducers'\nimport { setActiveTab, addPlots, setActiveStructs, informLoadingPlot, informLoadedPlot, deactivateStruct, deactivatePlotable, setActivePlotables } from '../../redux/actions'\nimport StructuresGroup from './StructuresGroup';\nimport { MdClose, MdDone } from 'react-icons/md'\nimport { Button } from '@material-ui/core'\nimport PlotableRow from './PlotableRow'\n\nclass PlotInitializer extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = {\n            structureGroups: [],\n            plotables: [],\n        }\n        \n    }\n\n    get selectedStructs(){\n        return this.props.activeStructs || []\n    }\n\n    get selectedPlotables(){\n        return this.props.activePlotables || []\n    }\n\n    get defaultTabID(){\n        return this.props.active.tab ? this.props.active.tab : this.props.tabs.length && this.props.tabs.length > 0 ? this.props.tabs[0].id : undefined\n    }\n\n    componentDidMount(){\n\n        this.onStructsUpdate([])\n\n    }\n\n    componentWillUnmount(){\n\n    }\n\n    componentDidUpdate(prevProps) {\n\n        if ( !_.isEqual(prevProps.active.structs, this.props.active.structs) ){\n\n            this.onStructsUpdate(prevProps.active.structs)\n            \n        }\n    }\n\n    onStructsUpdate = (prevActiveStructs) => {\n\n        let structureGroups = [];\n\n        const newStructs = this.selectedStructs.filter(({id:structID}) => !prevActiveStructs.includes(structID))\n\n        if (this.state.structureGroups.length === 0){\n            //In this case build a new group and mark it as active\n            structureGroups = this.markActiveGroup(0, [this.newGroup(this.selectedStructs)])\n        } else {\n            const activeGroupIndex = _.findIndex(this.state.structureGroups, \"active\" )\n            const activeGroup = this.state.structureGroups[activeGroupIndex]\n\n            //Add the structure to the receptive group\n            structureGroups = [\n                ...this.state.structureGroups.slice(0,activeGroupIndex),\n                {...activeGroup, structs: [...activeGroup.structs, ...newStructs]},\n                ...this.state.structureGroups.slice(activeGroupIndex + 1)\n            ]\n        }\n\n        structureGroups = this.cleanUnselectedFromGroups(structureGroups)\n\n        //Ensure that there is an active group\n        if ( !_.find(structureGroups, \"active\") ){\n            structureGroups = this.markActiveGroup(structureGroups.length - 1, structureGroups)\n        }\n\n        this.setState({structureGroups})\n    }\n\n    cleanUnselectedFromGroups = (groups) => {\n        /* Removes unselected structures */\n        return groups.reduce((cleanGroups, group) => {\n            group = {...group, structs: group.structs.filter(({id: structID}) => this.props.active.structs.includes(structID))}\n\n            if (group.structs.length > 0){\n                cleanGroups.push(group)\n            }\n            \n            return cleanGroups\n        },[])\n    }\n\n    newGroup = (structs, groupParams) => {\n\n        return {\n            structs: structs || [],\n            initializingOptions: {tabID: this.defaultTabID, plotClasses: [], mergeMethod: \"separatePlot\"},\n            ...groupParams\n        }\n    }\n\n    addGroup = ({structs}) => {\n\n        const structureGroups = this.markActiveGroup(this.state.structureGroups.length,\n            [...this.state.structureGroups, this.newGroup(structs)])\n\n        this.setState({structureGroups})\n    }\n\n    removeGroup = (iGroup) => {\n\n        const group = this.state.structureGroups[iGroup]\n        \n        if (group.structs.length > 0){\n\n            //We need to deactivate all structures in the group, this will automatically update groups\n            this.props.deactivateStruct(group.structs.map(struct => struct.id))\n        } else {\n            //If no structures in the group, we just delete it\n\n            let structureGroups = this.state.structureGroups.filter((g, i) => i !== iGroup)\n\n            if (group.active){\n                structureGroups = this.markActiveGroup(structureGroups.length - 1, structureGroups)\n            }\n\n            this.setState({structureGroups})\n        }\n        \n    }\n\n    splitGroup = (iGroup) => {\n        const group = this.state.structureGroups[iGroup]\n\n        const splitted = group.structs.map( struct => this.newGroup([struct], _.omit(group, [\"structs\"])) )\n\n        //Remove the old group\n        let structureGroups = this.state.structureGroups.filter( (g, i) => i !== iGroup)\n\n        //Add the new ones\n        structureGroups = [...structureGroups.slice(0,iGroup), ...splitted, ...structureGroups.slice(iGroup) ]\n\n        //If it was the active group, we can't leave all groups as active!\n        if (group.active) structureGroups = this.markActiveGroup(iGroup, structureGroups)\n\n        this.setState({structureGroups})\n\n    }\n\n    markActiveGroup = (iGroup, groups) => {\n        groups = groups || this.state.structureGroups\n        \n        return groups.map((group, i) => {\n            return {...group, active: i === iGroup}\n        })\n    }\n\n    setGroupAsActive = (iGroup) => {\n        this.setState({structureGroups: this.markActiveGroup(iGroup)})\n    }\n\n    moveStructToActiveGroup = (structID) => {\n        \n        //Get the structure\n        const struct = _.find(this.selectedStructs, [\"id\", structID])\n\n        //Remove the structure from its actual group and move it to the active group\n        //THIS WILL BE A PROBLEM IF AT SOME POINT THE SAME STRUCTURE IS ALLOWED IN TWO GROUPS AT THE SAME TIME\n        //WE SHOULD THEN SPECIFY THE ORIGIN GROUP!!!!!!!!!!!!!!\n        const structureGroups = this.state.structureGroups.map( group => {\n\n            let structs = group.active ? [...group.structs, struct] : group.structs.filter( ({id}) => id !== structID)\n            \n            return {...group, structs}\n        })\n\n        this.setState({structureGroups})\n\n    }\n\n    updateGroupInitParams = (iGroup, key, val) => {\n\n        const structureGroups = this.state.structureGroups.map((group, i) => {\n            return i === iGroup ? {...group, initializingOptions: {...group.initializingOptions, [key]: val}}: group\n        })\n\n        this.setState({structureGroups})\n    }\n\n    toggleVisibility = () => {\n\n        document.dispatchEvent( new Event(\"togglePlotInitializer\"))\n    }\n\n    updateInitializingOptions = (key, value) => {\n        this.setState({ [key]: value})\n    }\n\n    getNewPlot = () => {\n\n        //Plot plotables\n        this.selectedPlotables.forEach(plotable => {\n            plotable.chosenPlots.forEach(plotType => {\n                PythonApi.newPlot({ tabID: this.defaultTabID, plotable_path: plotable.path, plot_method: plotType})\n            })\n        })\n\n        //Plot the structures\n        this.state.structureGroups.forEach( ({structs, initializingOptions}) =>  {\n\n            if (initializingOptions.mergeMethod.includes(\"separate\")){\n\n                const animation = initializingOptions.mergeMethod.includes(\"Animation\")\n\n                structs.forEach( struct => {\n                    \n                    initializingOptions.plotClasses.forEach( plotClass => {\n                    \n                        PythonApi.newPlot(\n                            {tabID: initializingOptions.tabID, structID: struct.id, animation, plotClass: plotClass}\n                        )\n        \n                    })\n                    \n                    \n                })\n            }\n            \n        })\n\n        this.toggleVisibility()\n\n        this.props.setActiveStructs([])\n        this.props.setActivePlotables([])\n\n    }\n\n    nothingToPlotMessage = () => {\n        return <div>\n            <div style={{color: \"darkred\", fontSize: \"1.3em\", fontWeight: \"bold\"}}>There's nothing to plot currently</div>\n            <div>Select a structure or plotable to begin.</div>\n        </div>\n    }\n\n    render() {\n\n        if (this.props.tabs.length === 0) return null\n\n        // let plotables = _.groupBy(this.selectedPlotables, \"plot\")\n\n        const plotables = this.selectedPlotables\n\n        return (\n            <div className=\"plotInitializer\" style={this.props.style}>\n\n                <Card\n                    style={{margin: 20, padding: 20, background: \"aliceblue\", overflow: \"visible\"}}>\n                    {this.selectedStructs.length > 0 ? <div>\n                        <div className=\"sectionHeader\">\n                            Structures\n                        </div>\n                        {this.state.structureGroups.map( (group, i) => {\n                            return <StructuresGroup \n                                {...group}\n                                onInitParamChange={(paramName, val) => this.updateGroupInitParams(i, paramName, val)}\n                                setGroupAsActive={() => this.setGroupAsActive(i)}\n                                removeGroup={() => this.removeGroup(i)}\n                                splitGroup={() => this.splitGroup(i)}\n                                moveStructToActiveGroup={this.moveStructToActiveGroup}\n                            />\n                        })}\n                        <div onClick={this.addGroup}>New Group</div>\n                    </div>: null}\n\n                    {this.selectedPlotables.length > 0 ? <div className=\"sectionHeader\">\n                        Plotables\n                    </div> : null}\n\n                    <div>\n                        {plotables.map(plotable => <PlotableRow plotable={plotable}/>)}\n                    </div>\n                        \n\n                    {[...this.selectedPlotables, ...this.selectedStructs].length === 0 ? this.nothingToPlotMessage() : null}\n\n                    <div style={{ display: \"flex\", flexDirection: \"row\", justifyContent: \"center\", alignItems: \"center\", paddingTop: 20 }}>\n\n                        <Button\n                            style={{marginRight: 20}}\n                            onClick={this.toggleVisibility}\n                            endIcon={<MdClose />}\n                        >\n                            Dismiss\n                        </Button>\n\n                        <Button\n                            style={{ marginLeft: 20 }}\n                            onClick={this.getNewPlot}\n                            endIcon={<MdDone/>}\n                        >\n                            Initialize plots      \n                        </Button>\n\n                    </div>     \n\n                </Card>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    activeStructs: selectActiveStructs(state),\n    activePlotables: selectActivePlotables(state),\n    tabs: state.session.tabs,\n    active: state.active,\n})\n\nconst mapDispatchToProps = {\n    setActiveTab,\n    addPlots,\n    setActiveStructs,\n    setActivePlotables,\n    informLoadingPlot,\n    informLoadedPlot,\n    deactivateStruct,\n    deactivatePlotable\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PlotInitializer);\n","import { FC } from 'react'\nimport Switch from '@material-ui/core/Switch'\nimport { InputFieldProps } from '../InputField';\n\nconst SwitchInput:FC<InputFieldProps<boolean>> = props => {\n    return (\n        <div style={{display:\"flex\", flexDirection:\"column\", justifyContent:\"center\", alignItems:\"center\"}}>\n            <div style={{paddingBottom: 10}}>{props.setting.name}</div>\n            <Switch\n                id = {props.id || props.setting.key}\n                checked={props.value}\n                onChange={(e) => props.onChange(e.target.checked) }\n                {...props.inputField.params}/>\n        </div>\n    )\n}\n\nexport default SwitchInput;\n","import { FC, useState } from 'react'\nimport { ChromePicker } from 'react-color';\nimport { InputFieldProps } from '../InputField';\n\nconst ColorPicker:FC<InputFieldProps<string>> = (props) => {\n    const [tempcolor, setTempcolor] = useState<string | undefined>(undefined)\n    const [showColorPicker, setShowColorPicker] = useState(false)\n\n    let colorPicker = showColorPicker ? (\n        <div style={{position: \"absolute\", bottom: 60}}>\n            <ChromePicker\n                color={tempcolor || props.value || 'black'}\n                onChange={(color) => {setTempcolor(color.hex)}}\n                onChangeComplete={(color) => {props.onChange(color.hex); setTempcolor(undefined)}}\n                {...props.inputField.params}/>\n        </div>\n    ) : null;\n\n    return (\n        <div style={{position: \"relative\",display:\"flex\", flexDirection:\"column\", justifyContent:\"center\", alignItems:\"center\"}}>\n            <div style={{paddingBottom: 10}}>{props.setting.name}</div>\n            <div \n                className=\"MuiPaper-elevation3\"\n                onClick={() => setShowColorPicker(!showColorPicker)}\n                style={{width: 30, height: 30, borderRadius: 30, background: props.value}}/>\n            \n            {colorPicker}\n        </div>\n    )\n\n}\n\nexport default ColorPicker;\n","import { FC } from 'react'\n\nimport { Slider } from '@material-ui/core'\nimport { InputFieldProps } from '../InputField'\n\nconst RangeSlider:FC<InputFieldProps<number|number[]>> = props => {\n\n    let { min, max, step, marks } = props.inputField.params\n    marks = Array.isArray(marks) ? marks : undefined\n\n    const value = props.value || [0,0]\n\n    return (\n        <div>\n            <div style={{paddingBottom: 10}}>{props.setting.name}</div>\n            <Slider\n                getAriaLabel={() => props.setting.name}\n                value={value}\n                onChange={(event, value) => props.onChange(value)}\n                valueLabelDisplay=\"auto\"\n                min={min} max={max} step={step}\n                marks={marks}\n            />\n        </div>\n    )\n\n}\n\nexport default RangeSlider;\n","import { FC } from 'react'\nimport { InputFieldProps, number } from '../InputField'\nimport { TextField } from '@material-ui/core'\n\nconst Range:FC<InputFieldProps<(string|number)[]>> = props => {\n    const value = props.value != null ? props.value : [\"\", \"\"]\n\n    return (\n        <div>\n            <div style={{paddingBottom: 10}}>{props.setting.name}</div>\n            <div style={{display: 'flex'}}>\n                <TextField\n                    style={{marginRight: 30, flex:1}}\n                    type=\"number\"\n                    variant=\"outlined\"\n                    label=\"min\"\n                    value={value[0]}\n                    onChange={(e) => value[1] >= Number(e.target.value) ? \n                        props.onChange( [number(e.target.value), value[1]] ) : null}\n                    {...props.inputField.params}/>\n                <TextField\n                    style={{marginLeft: 30, flex:1}}\n                    type=\"number\"\n                    variant=\"outlined\"\n                    label=\"max\"\n                    value={value[1]}\n                    onChange={(e) => Number(e.target.value) >= value[0] ? \n                        props.onChange( [value[0], number(e.target.value)] ) : null }\n                    {...props.inputField.params}/>\n            </div>\n            \n        </div>\n    )\n}\n\nexport default Range;\n","import { FC } from 'react'\nimport { number } from '../InputField'\nimport TextField from '@material-ui/core/TextField'\nimport { InputFieldInterface, ParamInterface } from '../../../interfaces'\n\ninterface NumericProps {\n    id?: string,\n    inputField?: InputFieldInterface,\n    value: number | string,\n    label?: string,\n    setting?: ParamInterface,\n    onChange: (value: number | string) => void,\n    style: Object\n}\n\nconst Numeric:FC<NumericProps> = props => {\n    const additionalProps = props.inputField ? props.inputField.params : {}\n    const value = props.value || \"\"\n    const label = props.label || (props.setting ? props.setting.name : \"\")\n\n    return (\n        <div>\n            <TextField\n                type=\"number\"\n                label={label}\n                value={value}\n                onChange={(e) => props.onChange( number(e.target.value) )}\n                style = {props.style}\n                variant=\"outlined\"\n                inputProps={additionalProps}/>\n        </div>\n    )\n}\n\nexport default Numeric;\n","import { FC } from 'react'\nimport NumericInput from './Numeric'\n\nimport _ from \"lodash\"\nimport { InputFieldProps } from '../InputField'\n\nconst ArrayInput:FC<InputFieldProps<number[]>> = (props) => {\n\n    const changeValue = (newVal:string|number|undefined, i:number) => {\n        let value = _.cloneDeep(props.value)\n\n        if (typeof newVal === \"string\" || typeof newVal === \"undefined\") return\n\n        if(!value){\n            value = handleNone()\n        }\n\n        value[i] = newVal\n\n        props.onChange(value)\n    }\n\n    const handleNone = () => {\n        return Array((props.inputField.params.shape || [1])[0]).fill(null)\n    }\n\n    //Params to pass to numeric inputs\n    const orientationStyles = props.inputField.params.vertical ? {\n        marginLeft: 20, marginRight: 20, marginBottom: 0, width: 70\n    } : {\n        marginLeft: 5, marginRight: 5, marginBottom: 0, width: 100\n    }\n    const inputStyle = { ...orientationStyles, textAlign: \"center\"}\n\n    let value = props.value\n\n    if (!value){\n        value = handleNone()\n    }\n\n    return (\n        <div style={{display: \"flex\", flexDirection: \"column\", justifyContent: \"center\", alignItems: \"center\"}}>\n            <div style={{paddingBottom: 10}}>{props.setting.name}</div>\n            <div style={{display: \"flex\", flexDirection: props.inputField.params.vertical ? \"column\" : \"row\", justifyContent: \"center\", alignItems: \"center\"}} className=\"arrayContainer\">\n                {value.map((val, i) => <NumericInput key={i} value={val} onChange={(val) => changeValue(val, i)} style={inputStyle}/>)}\n            </div>  \n        </div>\n    )\n}\nexport default ArrayInput;\n","import { FC,  } from 'react'\nimport InputField, { InputFieldProps, MasterInputFieldProps } from \"../InputField\"\n\nimport { IconButton } from '@material-ui/core'\nimport { AiOutlineDelete } from 'react-icons/ai'\nimport { MdDragHandle, MdPlaylistAdd } from \"react-icons/md\"\nimport {\n    SortableContainer,\n    SortableElement,\n    SortableHandle,\n    SortEnd,\n    arrayMove\n} from 'react-sortable-hoc';\n\nconst DragHandle = SortableHandle(() => <MdDragHandle size={20} color=\"gray\"/>);\n\ninterface SortableItemProps extends MasterInputFieldProps{\n    sortable: boolean,\n    remove: () => void,\n}\n\nconst SortableItem = SortableElement((props: SortableItemProps) => (\n    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n        {props.sortable ? <DragHandle /> : null}\n        <div style={{flex: 1}}>\n            <InputField {...props} />\n        </div>\n        {props.remove ? <IconButton onClick={props.remove}><AiOutlineDelete color=\"red\"/></IconButton> : null }\n    </div>\n));\n\ninterface SortableContainerProps {\n    children: any[]\n}\n\nconst SortableList = SortableContainer((props: SortableContainerProps) => {\n    return <div style={{ width: \"100%\"}}>{props.children}</div>;\n});\n\nconst handleNone = () => []\n\nconst sanitizeVal = (value: any):any[] => {\n\n    if(!value){\n        return handleNone()\n    } else if (! Array.isArray(value)){\n        return [value]\n    } else {\n        return value\n    }\n}\n\nconst ListInput:FC<InputFieldProps<Object[]>> = props => {\n    let value = sanitizeVal(props.value)\n\n    const addItem = () => {\n        props.onChange([...sanitizeVal(props.value), props.setting.default || null])\n    }\n\n    const removeItem = (i: number) => {\n        props.onChange(sanitizeVal(props.value).filter((val, index) => index !== i))\n    }\n\n    const changeValue = (newVal:any, i: number) => {\n        let value = [...sanitizeVal(props.value)]\n\n        value[i] = newVal\n\n        props.onChange(value)\n    }\n\n    const onSortEnd = (args: SortEnd) => {\n\n        props.onChange(\n            arrayMove(sanitizeVal(props.value), args.oldIndex, args.newIndex)\n        )\n\n    };\n\n    return (\n        <div className=\"ListInput_container\" style={props.style}>\n            <div style={{ paddingBottom: 10 }}>{props.setting.name}</div>\n            <SortableList onSortEnd={onSortEnd} useDragHandle>\n                {value.map((val, i) => (\n                    <SortableItem \n                        key={`item-${i}`} index={i} value={val} \n                        onValueChange={(val: any) => changeValue(val, i)} \n                        remove={() => removeItem(i)}\n                        sortable={props.setting.inputField.params.sortable}\n                        setting={props.setting.inputField.params.itemInput} />\n                ))}\n            </SortableList>\n            <IconButton \n                data-tip=\"Add a new item\"\n                onClick={addItem}>\n                    <MdPlaylistAdd color=\"green\" />\n            </IconButton>\n        </div>\n    )\n}\n\nexport default ListInput;","import { FC } from 'react'\n\nimport Dropdown, {DropdownProps} from './Dropdown'\n\nconst CreatableDropdown:FC<DropdownProps>= (props) => {\n    props.inputField.params.isCreatable = true\n    return <Dropdown {...props}/>\n}\n\nexport default CreatableDropdown;\n","import { FC } from 'react'\n\nimport InputField, { InputFieldProps } from '../InputField';\nimport { ParamInterface } from '../../../interfaces';\n\ninterface Value {\n    [key: string]: any\n}\n\nconst DictInput:FC<InputFieldProps<Value>> = props => {\n\n    const changeSettingValue = (paramKey:string, paramValue:any) => {\n        props.onChange({ ...props.value, [paramKey]: paramValue })\n    }\n\n    const value = props.value || {}\n        const fields = props.setting.inputField.fields || []\n\n        return (\n            <div className=\"DictInput_container\" style={props.style}>\n                <div style={{paddingBottom: 10}}>{props.setting.name}</div>\n                <div>\n                    {fields.map((field:ParamInterface) => <InputField\n                        //id={field.key}\n                        key={field.key}\n                        setting={field}\n                        value={value[field.key]}\n                        onValueChange={(val) => changeSettingValue(field.key, val)} />)}\n                </div>\n            </div>\n            \n        )\n\n\n}\n\nexport default DictInput;","import { FC, useState } from 'react'\n\nimport _ from 'lodash'\nimport Dropdown from './Dropdown'\n\nimport { AiOutlineDelete } from 'react-icons/ai'\nimport { MdPlaylistAdd } from 'react-icons/md'\nimport { IconButton } from '@material-ui/core'\nimport InputField, { InputFieldProps } from '../InputField'\n\ninterface Value {\n    [key: string]: any\n}\n\nconst CreatableDictInput:FC<InputFieldProps<Value>> = props => {\n    const [new_cat_value, setNewCatValue] = useState<string | undefined>(undefined)\n\n    const label = props.label || (props.setting ? props.setting.name : \"\")\n\n    const fields = props.setting.inputField.fields || []\n    const creatable_fields = fields\n\n    let value = props.value || {}\n\n    const getParam = (key: string) => {\n        return _.find(props.setting.inputField.fields || [], [\"key\", key])\n    }\n\n    const onItemChange = (key:string, value:any) => {\n        props.onChange({\n            ...props.value, [key]: value\n        })\n    }\n\n    const addNewItem = (key: string | undefined) => {\n        if (!key) return\n\n        const param = getParam(key)\n        if (!param) return\n\n        onItemChange(key, param.default)\n    }\n\n    const deleteItem = (key: string) => {\n        props.onChange(_.omit(props.value, key))\n    }\n\n    const renderItem = (key: string, value: any) => {\n        // Find the appropiate input field for this key\n        const param = getParam(key)\n\n        if (!param) return null\n\n        // And render it\n        return <fieldset className=\"CreatableDictInput_fieldset\">\n            <legend style={{\n                paddingLeft: 10, paddingRight: 10, paddingTop: 2, paddingBottom: 2, borderRadius: 3,\n                backgroundColor: \"white\"\n            }}>{param.name}</legend>\n            <InputField\n                {...props}\n                setting={{...param, name: \"\"}}\n                value={value}\n                onValueChange={(value) => onItemChange(key, value)}\n            />\n            <IconButton onClick={() => deleteItem(key)}><AiOutlineDelete color=\"red\" /></IconButton>\n        </fieldset>\n    }\n\n    return (\n        <div>\n            <div>\n                {label}\n            </div>\n            <div>\n                {Object.keys(value).map(key => renderItem(key, value[key]))}\n            </div>\n            <div style={{display: \"flex\"}}>\n                <div style={{flex: 1, paddingLeft: 5}}>\n                    <Dropdown\n                        value={new_cat_value}\n                        onChange={(val) => setNewCatValue(val)}\n                        label=\"Add a new selection...\"\n                        inputField={{\n                            type: \"\",\n                            params: {\n                                options: creatable_fields.map((param: {name:string, key:string}) => ({ label: param.name, value: param.key })),\n                            }\n                        }} />\n                </div>\n                <IconButton onClick={() => addNewItem(new_cat_value)}><MdPlaylistAdd color=\"green\" /></IconButton>\n            </div>\n        </div>\n        \n    )\n}\n\nexport default CreatableDictInput","import { FC } from 'react'\n\n//--Redux\nimport { connect } from 'react-redux'\nimport { changeSettings } from \"../../redux/actions\"\n\n/*  All the different input fields */\nimport TextInput from './inputFields/TextInput';\nimport Switch from './inputFields/Switch';\nimport Dropdown from './inputFields/Dropdown';\nimport ColorPicker from './inputFields/ColorPicker';\nimport RangeSlider from './inputFields/RangeSlider';\nimport Range from './inputFields/Range';\nimport Numeric from './inputFields/Numeric';\nimport ArrayInput from './inputFields/Array';\nimport ListInput from './inputFields/List';\nimport CreatableDropdown from './inputFields/CreatableDropown';\nimport DictInput from './inputFields/DictInput';\nimport CreatableDictInput from './inputFields/CreatableDict';\n\nimport \"./input_styles.css\"\nimport { InputFieldInterface, ParamInterface } from '../../interfaces';\n\nexport const INPUT_FIELDS:any = {\n    textinput: TextInput,\n    bool: Switch,\n    options: Dropdown,\n    \"creatable options\": CreatableDropdown,\n    dict: DictInput,\n    \"creatable dict\": CreatableDictInput,\n    color: ColorPicker,\n    rangeslider: RangeSlider,\n    range: Range,\n    number: Numeric,\n    vector: ArrayInput,\n    list: ListInput,\n}\n\nexport const number = (value: string | number) : (string | number) => {\n    if (typeof value === \"string\") {\n        if ([\"\", \"-\"].includes(value)) return value\n    }\n    return Number(value)\n}\n\nexport const changeSettingValue = (\n    newValue: any, \n    props: MasterInputFieldProps\n) => {\n\n    if (props.onValueChange){\n        props.onValueChange(newValue)\n    } else if (props.changeSettings && props.onSettingChangeType && props.onSettingChangeExtraParams) {\n        props.changeSettings(props.onSettingChangeType, props.setting.key, newValue, props.onSettingChangeExtraParams)\n    } else {\n        console.error(\"Wrong usage of changeSettingValue\")\n    }\n\n}\n\nexport interface MasterInputFieldProps {\n    setting: ParamInterface,\n    value: any,\n    onValueChange?: (value: any) => void,\n    changeSettings?: (type: string, key: string, value: any, extraParams: any) => void,\n    onSettingChangeType?: string,\n    onSettingChangeExtraParams?: any,\n}\n\nexport interface InputFieldProps<T> {\n    id: string,\n    inputField: InputFieldInterface,\n    value: T,\n    label: string,\n    setting: ParamInterface,\n    onChange: (value: T) => void,\n    style?: Object\n}\n\nconst InputField:FC<MasterInputFieldProps> = (props) => {\n\n    let inputField = props.setting.inputField\n\n    // Get the input field that we need\n    const InputComponent = INPUT_FIELDS[inputField.type]\n    \n    if (!InputComponent) return null\n\n    const fieldLayout = <InputComponent\n        {...props}\n        inputField={inputField}\n        onChange={(value: any) => changeSettingValue(value, props)}\n    />\n\n    let tooltipParams = {\n        \"data-tip\": (props.setting.help ? props.setting.help + \"<br>\" : \"\") + \"Default: \" + (props.setting.default || \"None\"),\n        \"data-multiline\": true,\n        \"data-effect\": \"solid\",\n        \"data-place\": inputField.type === \"color\" ? \"bottom\" : \"top\", \n    }\n\n    let className = \"InputField_container\"\n    if (props.value == null) className = className + \" inputvalue_None\"\n\n    return <div\n        className={className}\n        onClick={(e) => inputField.type !== \"queries\" && e.ctrlKey ? changeSettingValue(props.value == null ? props.setting.default : null, props) : null}\n        style={{...inputField.style}}\n        {...tooltipParams}>\n            {fieldLayout}\n        </div>\n\n\n}\n\nconst mapStateToProps = (state: any) => ({\n    browser: state.browser\n})\n\nconst mapDispatchToProps = {\n    changeSettings,\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InputField);","import { FC, useState } from 'react'\n\nimport Button from '@material-ui/core/Button'\nimport Icon from '@material-ui/core/Icon'\nimport MuiExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport MuiExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport MuiExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport { FaAngleLeft, FaAngleRight } from 'react-icons/fa'\nimport { MdRestore } from 'react-icons/md'\n\nimport InputField from \"./InputField\"\n\nimport parse from 'html-react-parser';\nimport _ from \"lodash\"\nimport { Formik } from 'formik'\n\nimport { ParamGroupInterface, ParamInterface} from '../../interfaces';\n\ninterface SettingsFormProps {\n    paramGroup: ParamGroupInterface,\n    groupedParams: {\n        [key:string]: ParamInterface[] | undefined\n    },\n    index: number,\n    settings: { [key:string]: any },\n    submitSettings: (settings: {[key:string]: any}) => void,\n    undoSettings: () => void,\n    style?: Object,\n}\n\nconst SettingsForm:FC<SettingsFormProps> = props => {\n    const [changedFields, setChangedFields] = useState<string[]>([])\n\n    const paramGroup = props.paramGroup;\n    const groupedParams = props.groupedParams;\n\n    const groupKey = paramGroup.key ? paramGroup.key : \"null\";\n    const settingsGroup = groupedParams[groupKey]\n\n    if (!settingsGroup) return null\n\n    const subGrouped = _.groupBy(settingsGroup, \"subGroup\")\n\n    const nullSubGroup = {key: \"null\", name: null, icon: \"\", description:\"\"}\n    const subGroups = paramGroup.subGroups ? [nullSubGroup,  ...paramGroup.subGroups] : [nullSubGroup]\n\n    return (\n        <Formik\n            initialValues={props.settings}\n            onSubmit={(values) => {\n                props.submitSettings(Object.fromEntries(\n                    Object.entries(values).filter(([key, value]) => changedFields.includes(key))\n                ))\n            }}\n            >\n                {({values, handleChange, handleSubmit, setFieldValue}) => (\n                    <form onSubmit={handleSubmit} style={{width: \"100%\"}}>\n                        <blockquote style={{ textAlign: \"left\" }}>\n                            {parse(paramGroup.description)}\n                        </blockquote>\n                        <div>\n                            {subGroups.map(({key, name}) => {\n\n                                if ( ! subGrouped[key] ) return null\n\n                                return <div key={key}>\n                                    <div style={{paddingBottom: 20, fontWeight:\"bold\", fontSize: \"1.3em\", textAlign: \"left\"}}>{name}</div>\n                                    <div>{ subGrouped[key].map(setting => {\n\n                                    if (!setting.inputField) return null\n\n                                    return <div> \n                                        <InputField \n                                            key={setting.key}\n                                            onValueChange={(value) => {\n                                                setChangedFields([...changedFields, setting.key])\n                                                setFieldValue(setting.key, value)\n                                            }}\n                                            setting={setting} \n                                            value={values[setting.key]} />\n                                    </div>\n                                    })}\n                                    </div>\n                                </div>\n                            })}\n                        </div>\n                        <div style={{ display: \"flex\", flexWrap: \"wrap\", justifyContent: \"space-around\" }}>\n                            <Button\n                                onClick={props.undoSettings}\n                                data-tip=\"This will roll back to previous settings.<br> IT AFFECTS ALL GROUPS OF PARAMETERS, not only this one.\"\n                                className=\"orange\"\n                                style={{ margin: 20 }}>\n                                <FaAngleLeft />Previous settings\n                            </Button>\n\n                            <Button\n                                data-tip=\"This will restore all settings to the plot's defaults\"\n                                className=\"red\" style={{ margin: 20 }}><MdRestore />Restore defaults</Button>\n\n                            <Button\n                                type=\"submit\"\n                                data-tip=\"This will change the settings and will update everything accordingly.<br> IT ONLY AFFECTS THIS GROUP OF SETTINGS, not all settings\"\n                                //onClick={submitSettings}\n                                className=\"blue\"\n                                style={{ margin: 20 }}>\n                                Submit settings<FaAngleRight />\n                            </Button>\n                        </div>\n                    </form>\n                )}\n        </Formik>\n    )\n}\n\ninterface SettingGroupsCollapseProps extends SettingsFormProps {}\n\nconst SettingGroupsCollapse:FC<SettingGroupsCollapseProps> = props => {\n    const paramGroup = props.paramGroup;\n\n    const groupKey = paramGroup.key ? paramGroup.key : \"null\";\n\n    return (\n        <MuiExpansionPanel\n            key={groupKey}>\n            <MuiExpansionPanelSummary style={{ display: \"flex\", justifyContent: \"center\", alignItems: \"center\" }}>\n                <Icon>{paramGroup.icon}</Icon>\n                <span style={{paddingLeft: 10}}>{paramGroup.name}</span>\n            </MuiExpansionPanelSummary>\n            <MuiExpansionPanelDetails>\n                <SettingsForm {...props} />\n            </MuiExpansionPanelDetails>\n        </MuiExpansionPanel> \n    )\n}\n\ninterface SettingsContainerProps {\n    settings: {[key:string]: any}\n    params: ParamInterface[],\n    paramGroups: ParamGroupInterface[],\n    submitSettings: (settings: {[key:string]: any}) => void,\n    undoSettings: () => void,\n    style?: Object,\n}\n\nconst SettingsContainer:FC<SettingsContainerProps> = props => {\n    let groupedParams = _.groupBy(props.params, \"group\")\n\n    return (\n        <div style={props.style}>\n            {props.paramGroups.map((paramGroup, iParamGroup) => (\n                <SettingGroupsCollapse \n                    key={iParamGroup} \n                    index={iParamGroup}\n                    paramGroup={paramGroup} \n                    groupedParams={groupedParams}\n                    {...props}\n                    />\n            )) }        \n        </div>\n    )\n}\n\nexport default SettingsContainer;\n\n","import { FC } from 'react'\nimport Grid from '@material-ui/core/Grid';\nimport ReactTooltip from \"react-tooltip\"\n\nimport PythonApi from \"../apis/PythonApi\"\n\n//--Components\nimport PlotCard from '../components/plots/PlotCard'\nimport SettingsContainer from '../components/settings/SettingsContainer'\n\n//--Redux\nimport { connect } from 'react-redux'\nimport { selectActivePlot } from '../redux/reducers'\nimport { PlotInterface, SessionInterface } from '../interfaces';\n\ninterface PlotTweakingProps {\n    plots: {[key: string]: PlotInterface},\n    activePlot: PlotInterface,\n    session: SessionInterface,\n    browser: any,\n    style: {[key: string]: any},\n}\n\nconst PlotTweaking:FC<PlotTweakingProps> = (props) => {\n    const activePlot = props.activePlot\n\n    if (! activePlot ) return null\n    const plotSettings = activePlot.settings\n\n    let setsCont = <SettingsContainer\n                        settings={plotSettings}\n                        params={activePlot.params}\n                        paramGroups={activePlot.paramGroups}\n                        submitSettings={(settings) => PythonApi.updatePlotSettings(activePlot.id, settings)}\n                        undoSettings={() => PythonApi.undoPlotSettings(activePlot.id)}/>\n    \n    return (\n        <div style={{...props.style}}>\n            <Grid container>\n                <Grid item sm={12} md={4} style={{height:\"90vh\", display: \"flex\", flexDirection: \"column\", justifyContent: \"center\", alignItems:\"center\"}}>\n                    <PlotCard plot={activePlot} style={{height: \"80vh\"}}/>\n                </Grid>\n                <Grid item sm={12} md={8} style={{ padding: 20, display: \"flex\", flexDirection: \"column\"}} >\n                    {props.browser.mediaType === \"infinity\" ? <div className=\"scrollView\" style={{ maxHeight: \"90vh\"}}>{setsCont}</div> : setsCont}\n                </Grid>\n            </Grid>\n            <ReactTooltip multiline disable={props.session.settings ? !props.session.settings.showTooltips : false}/>  \n        </div>\n        \n    )\n}\n\nconst mapStateToProps = (state: {[key:string]: any}) => ({\n    plots: state.plots,\n    activePlot: selectActivePlot(state),\n    session: state.session,\n    browser: state.browser\n})\n\nexport default connect(mapStateToProps)(PlotTweaking);\n","import { FC } from 'react'\nimport PythonApi from \"../apis/PythonApi\"\n\n//--Components\nimport ReactTooltip from \"react-tooltip\"\nimport SettingsContainer from \"../components/settings/SettingsContainer\"\n\n//--Redux\nimport { connect } from 'react-redux'\n\nimport _ from \"lodash\"\nimport { SessionInterface } from '../interfaces'\n\ninterface SessionSettingsProps {\n    session: SessionInterface,\n    style: {[key: string]: any},\n}\n\nconst SessionSettings:FC<SessionSettingsProps> = props => {\n    if ( _.isEmpty(props.session) ) return null\n\n    return (\n        <div className=\"scrollView\" style={{...props.style, padding: 20}}>\n            <SettingsContainer\n                settings={props.session.settings}\n                params={props.session.params}\n                paramGroups={props.session.paramGroups}\n                submitSettings={PythonApi.updateSessionSettings}\n                undoSettings={PythonApi.undoSessionSettings}/>\n            <ReactTooltip multiline disable={props.session.settings ? !props.session.settings.showTooltips : false}/>\n        </div>\n        \n    )\n}\n\nconst mapStateToProps = (state: {[key: string]: any}) => ({\n    session: state.session\n})\n\nexport default connect(mapStateToProps)(SessionSettings);\n","import React, { Component } from 'react'\nimport ReactMarkDown from \"react-markdown\"\nimport PythonApi from '../../apis/PythonApi'\nimport { ExpansionPanel, ExpansionPanelSummary, ExpansionPanelDetails, Button, ExpansionPanelActions } from '@material-ui/core'\n\nexport default class Method extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = {\n            showingDetails: false\n        }\n    }\n\n    applyMethod = () => {\n        PythonApi.callPlotShortcut(this.props.plot.id, this.props.shortcut)\n    }\n\n    renderDetails = () => {\n\n        return \n    }\n\n    render() {\n\n        return (\n            <ExpansionPanel>\n                <ExpansionPanelSummary\n                    style={{display: \"flex\", cursor: \"pointer\", justifyContent: \"space-between\", alignItems: \"center\"}}>\n                    <span style={{color: \"gray\", marginRight: 10}}>{this.props.shortcut}</span>\n                    <span style={{fontWeight: \"bold\"}}>{this.props.info.name}</span>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails style={{fontSize: 13}}>\n                    <ReactMarkDown source={this.props.info.description}/>\n                </ExpansionPanelDetails>\n                <ExpansionPanelActions>\n                    <Button onClick={this.applyMethod}>APPLY METHOD</Button>\n                </ExpansionPanelActions>\n            </ExpansionPanel>\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport Method from './Method'\n\nexport default class Methods extends Component {\n    render() {\n        return (\n            <div className=\"scrollView\" style={{textAlign: \"left\", borderRadius: 3, maxHeight: \"90vh\"}}>\n                {Object.keys(this.props.plot.shortcuts).map((sequence) => <Method plot={this.props.plot} shortcut={sequence} info={this.props.plot.shortcuts[sequence]}/>)}\n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport Grid from '@material-ui/core/Grid';\nimport ReactTooltip from \"react-tooltip\"\n\n//--Components\nimport PlotCard from '../components/plots/PlotCard'\n\n//--Redux\nimport { connect } from 'react-redux'\nimport { addPlots, setNewStructures, setActivePlot, setCurrentSession, informLoadedPlot, informLoadingPlot } from \"../redux/actions\"\nimport { GlobalHotKeys } from 'react-hotkeys'\nimport { PLOT_TWEAKING_HOT_KEYS } from '../utils/hotkeys'\nimport Methods from '../components/pythonMethods/Methods'\nimport { selectActivePlot } from '../redux/reducers'\n\n\n\nclass PlotMethods extends Component {\n\n    hotKeysHandlers = {\n    }\n\n    render() {\n\n        if (! this.props.activePlot ) return null\n        \n        return (\n            <div style={{...this.props.style}}>\n                <GlobalHotKeys keyMap={PLOT_TWEAKING_HOT_KEYS.global} handlers={this.hotKeysHandlers}/>\n                <Grid container>\n                    <Grid item sm={12} md={4} style={{ height: \"90vh\", display: \"flex\", flexDirection: \"column\", justifyContent: \"center\", alignItems: \"center\" }}>\n                        <PlotCard plot={this.props.activePlot} style={{ height: \"80vh\" }} />\n                    </Grid>\n                    <Grid item sm={12} md={8} style={{ padding: 20, display: \"flex\", flexDirection: \"column\" }} >\n                        <Methods plot={this.props.activePlot} />\n                    </Grid>\n                </Grid>\n                <ReactTooltip multiline disable={this.props.session.settings ? !this.props.session.settings.showTooltips : false} />   \n            </div>\n            \n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    plots: state.plots,\n    structures: state.structures,\n    active: state.active,\n    activePlot: selectActivePlot(state),\n    session: state.session,\n    browser: state.browser\n})\n\nconst mapDispatchToProps = {\n    setCurrentSession,\n    addPlots,\n    setActivePlot,\n    setNewStructures,\n    informLoadedPlot,\n    informLoadingPlot\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PlotMethods);\n","import { FC, useCallback } from 'react'\nimport { useDropzone } from 'react-dropzone'\nimport PythonApi from '../../../apis/PythonApi'\nimport { InputFieldProps } from '../InputField'\n\nconst FilesInput:FC<InputFieldProps<string>> = () => {\n    const onDrop = useCallback((acceptedFiles) => {\n        acceptedFiles.forEach((file: any) => {\n            console.warn(\"ACCEPTED FILE\")\n            PythonApi.sendFile(file)\n        })\n\n    }, [])\n    const { getRootProps, getInputProps } = useDropzone({ onDrop })\n\n    return (\n        <div {...getRootProps()}>\n            <input {...getInputProps()} />\n            <p>Drag 'n' drop some files here, or click to select files</p>\n        </div>\n    )\n}\n\nexport default FilesInput;\n","import React, { Component } from 'react'\nimport PythonApi from '../../apis/PythonApi'\nimport { FiWifi, FiWifiOff } from 'react-icons/fi'\n\nexport default class ConnectionStatus extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = { connected: PythonApi.socket.connected }\n    }\n\n    componentDidMount() {\n        PythonApi.onConnect(() => this.setState({connected: true}))\n        PythonApi.onDisconnect(() => this.setState({ connected: false }))\n    }\n\n    render() {\n\n        const style = this.state.connected ? { backgroundColor: \"lightgreen\" } : { backgroundColor: \"salmon\" }\n        return <div {...this.props} style={{...style, ...this.props.style}} \n                data-tip={this.state.connected ? `Connected to ${PythonApi.apiAddress}` : \"Currently not connected\"} \n                data-place=\"left\"\n                data-background-color={style.backgroundColor}>\n            {this.state.connected ? <FiWifi color=\"green\" size={20} /> : <FiWifiOff color=\"darkred\" size={20}/>}\n        </div>\n\n    }\n}\n","import React, { Component } from 'react'\n//import Speck from 'speck-renderer';\n\nexport default class MoleculeViewer extends Component {\n\n    componentDidMount(){\n        //const speck = new Speck({ canvasContainerID: \"speck-root\", canvasID: \"speck-canvas\" });\n    }\n    \n    render() {\n        return (\n            <div id=\"speck-root\" style={{...this.props.style, justifyContent: \"center\", alignItems:\"center\", display:\"flex\"}}>\n                <canvas id=\"speck-canvas\" style={{width:800, height:800}}/>\n            </div>\n        )\n    }\n}\n","\nimport PythonApi from \"../apis/PythonApi\"\n\n//--Redux\nimport { connect } from 'react-redux'\nimport { selectActivePlot } from '../redux/reducers'\n\nimport React, { Component } from 'react';\nimport plotly from 'plotly.js/dist/plotly';\nimport PlotlyEditor from 'react-chart-editor';\nimport 'react-chart-editor/lib/react-chart-editor.css';\n\n// const dataSources = {\n//     col1: [1, 2, 3], // eslint-disable-line no-magic-numbers\n//     col2: [4, 3, 2], // eslint-disable-line no-magic-numbers\n//     col3: [17, 13, 9], // eslint-disable-line no-magic-numbers\n// };\n\n// const dataSourceOptions = Object.keys(dataSources).map(name => ({\n//     value: name,\n//     label: name,\n// }));\n\nconst config = { editable: true };\n\nclass PlotEditor extends Component {\n\n    constructor(props) {\n        super(props);\n        const activePlot = props.activePlot\n        this.state = activePlot.figure;\n    }\n\n    hotKeysHandlers = {\n        UNDO_SETTINGS: () => this.undoSettings(),\n        SUBMIT_ALL_SETTINGS: () => this.submitSettings(\"all\")\n    }\n\n    submitSettings = (settings) => {\n\n        if (settings === \"all\") {\n            settings = this.props.activePlot.unsubmittedSettings\n        }\n\n        PythonApi.updatePlotSettings(this.props.activePlot.id, settings)\n\n    }\n\n    componentWillUnmount(){\n\n        PythonApi.updateFigure(this.props.activePlot.id, {...this.state, overwrite: true})\n        // this.props.addPlots({\n        //     [this.props.activePlot.id]: {\n        //         ...this.props.activePlot,\n        //         figure: this.state\n        //     }\n        // })\n    }\n\n    undoSettings = () => {\n\n        PythonApi.undoPlotSettings(this.props.activePlot.id)\n\n    }\n\n    render() {\n\n        const activePlot = this.props.activePlot\n\n        if (!activePlot) return null\n\n        return (\n            <PlotlyEditor\n                data={this.state.data}\n                layout={this.state.layout}\n                config={config}\n                frames={this.state.frames}\n                plotly={plotly}\n                style={{...this.props.style}}\n                onUpdate={(data, layout, frames) =>\n                    this.setState({ data, layout, frames })\n                }\n                useResizeHandler\n                debug\n                advancedTraceTypeSelector\n            />\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    activePlot: selectActivePlot(state),\n})\n\nexport default connect(mapStateToProps, null)(PlotEditor);","import React, { useRef, useState } from 'react'\nimport { Canvas, useFrame } from 'react-three-fiber'\n\nfunction Box(props) {\n    // This reference will give us direct access to the mesh\n    const mesh = useRef()\n\n    // Set up state for the hovered and active state\n    const [hovered, setHover] = useState(false)\n    const [active, setActive] = useState(false)\n\n    // Rotate mesh every frame, this is outside of React without overhead\n    useFrame(() => {\n        mesh.current.rotation.x = mesh.current.rotation.y += 0.01\n    })\n\n    return (\n        <mesh\n            {...props}\n            ref={mesh}\n            scale={active ? [1.5, 1.5, 1.5] : [1, 1, 1]}\n            onClick={(e) => setActive(!active)}\n            onPointerOver={(e) => setHover(true)}\n            onPointerOut={(e) => setHover(false)}>\n            <boxBufferGeometry attach=\"geometry\" args={[1, 1, 1]} />\n            <meshStandardMaterial attach=\"material\" color={hovered ? 'hotpink' : 'orange'} />\n        </mesh>\n    )\n}\n\nexport default function NotConnected(props){\n\n    return <Canvas style={props.style} {...props}>\n        <ambientLight />\n        <pointLight position={[10, 10, 10]} />\n        <Box position={[-1.2, 0, 0]} sign={-1}/>\n        <Box position={[1.2, 0, 0]} />\n    </Canvas>\n}","// This is currently not used\nimport React, { Component } from 'react'\n\nexport default class SislDocs extends Component {\n    render() {\n        \n        return (\n            <object data={process.env.PUBLIC_URL + \"/sisl-docs/html/index.html\"} aria-label=\"Sisl documentation\" width=\"100%\" height=\"100%\"/>\n        )\n    }\n}","import React, { Component } from 'react'\n\nimport _ from \"lodash\"\n\n//--Components\nimport ReactTooltip from \"react-tooltip\"\nimport PlotDashboard from '../components/plots/PlotDashboard';\n\n//--Python api \nimport PythonApi from '../apis/PythonApi'\n\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.min.css'\n\n//--Redux\nimport { connect } from 'react-redux'\nimport {addPlots, setNewStructures, setActiveTab, setActivePlot, setSessionTabs, setCurrentSession, setNewPlotables, setActivePage} from \"../redux/actions\"\nimport StructurePicker from '../components/structures/StructurePicker'\nimport PlotInitializer from '../components/plotInitializer/PlotInitializer'\nimport Tabs from '../components/tabs/Tabs'\nimport Controls from '../components/controls/Controls'\nimport PlotTweaking from './PlotTweaking'\nimport Settings from './Settings'\n\nimport {getApplicationKeyMap, GlobalHotKeys, configure} from 'react-hotkeys'\nimport { GLOBAL_HOT_KEYS } from '../utils/hotkeys';\nimport PlotMethods from './PlotMethods';\nimport FilesInput from '../components/settings/inputFields/Files';\nimport ConnectionStatus from '../components/controls/ConnectionStatus';\nimport MoleculeViewer from '../components/structureView/MoleculeViewer';\nimport PlotEditor from './PlotEditor';\nimport NotConnected from '../components/loading/NotConnected';\nimport SislDocs from './SislDocs';\n\nconfigure({logLevel: \"debug\", simulateMissingKeyPressEvents: false})\n\nclass Plots extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = {\n            connected: PythonApi.socket.connected,\n            loadingPlots: []\n        }\n\n        PythonApi.onConnect(() => {\n            this.setState({connected: true})\n        })\n\n        document.addEventListener(\"syncWithSession\", (e) => this.syncWithSession(e.detail.session) )\n\n        document.addEventListener(\"updateTabs\", () => this.syncWithSession())\n\n        document.addEventListener(\"loadingPlot\", (e) => {\n            this.setState({ loadingPlots: [...this.state.loadingPlots, e.detail.plot_id] })\n        })\n\n        document.addEventListener(\"plot\", (e) => {\n            const plot = e.detail.plot\n            props.addPlots({ [plot.id]: plot })\n            this.setState({ loadingPlots: this.state.loadingPlots.filter(id => id !== plot.id) })\n        })\n\n        document.addEventListener(\"newPlot\", () => this.syncWithSession())\n\n        document.addEventListener(\"sessionUpdate\", (e) => {\n            e.detail.justUpdated.forEach( plotID => {\n                \n                PythonApi.getPlot(plotID)\n\n            })\n\n        })\n            \n    }\n\n    hotKeysHandlers = {\n        GO_TO_SETTINGS: () => this.props.setActivePage(\"settings\"),\n        GO_TO_DASHBOARD: () => this.props.setActivePage(\"plots\"),\n        GO_TO_MOLECULEVIEWER: () => this.props.setActivePage(\"moleculeViewer\"),\n        SHOW_AVAIL_HOTKEYS: () => console.warn(getApplicationKeyMap())\n    }\n\n    syncWithSession = (session) => {\n\n        if (!session) {\n            return PythonApi.askForSession()\n        }\n        \n        this.props.setCurrentSession(session)\n        \n    }\n\n    componentDidMount(){\n\n        this.props.setActivePlot(undefined)\n\n        //Add the listener to display or not the plot initializer\n        this.listener = document.addEventListener(\"togglePlotInitializer\", this.togglePlotInitializer)\n\n    }\n\n    componentDidUpdate(){\n\n        let activeTab = _.find(this.props.tabs, [\"id\", this.props.active.tab]) \n        \n        if (!activeTab) return\n\n        //Get the missing plots if there are any\n        activeTab.plots.forEach(plotID => {\n\n            if ( !this.props.plots[plotID] && this.state.loadingPlots.indexOf(plotID) === -1){\n\n                PythonApi.getPlot(plotID)\n                \n            }\n        })\n\n    }\n\n    getNewPlot = () => {\n\n        PythonApi.newPlot({tabID: this.props.active.tab, ...this.state.plotToInitialize})\n        \n        this.togglePlotInitializer()\n\n    }\n\n    togglePlotInitializer = (e) => {\n\n        let currentlyShowing = this.props.active.page === \"plotInitializer\"\n\n        if (e !== undefined & e.detail !== undefined) {\n            if (e.detail.forceShow &&  !currentlyShowing){\n                this.props.setActivePage(\"plotInitializer\")\n            } if (e.detail.forceHide && currentlyShowing){\n                this.props.setActivePage(\"plots\")\n            }\n        } else {\n            this.props.setActivePage(currentlyShowing ? \"plots\" : \"plotInitializer\")\n        }\n\n    }\n\n    render() {\n\n        const MainComponent = {\n            'plots': PlotDashboard,\n            'settings': Settings,\n            'plotLayoutEditor': PlotEditor,\n            'plotTweaking': PlotTweaking,\n            'plotMethods': PlotMethods,\n            'plotInitializer': PlotInitializer,\n            'moleculeViewer': MoleculeViewer,\n            'sislDocs': SislDocs,\n        }[this.props.active.page]\n\n        if (!this.state.connected && this.props.active.page !== 'sislDocs'){\n            return <div style={{height: \"100vh\", display: \"flex\", flexDirection: \"column\", justifyContent: \"center\", alignItems: \"center\"}}>\n                <div style={{ paddingTop: 100 }}>\n                    <div style={{ fontSize: \"2.5em\", fontWeight: \"bold\"}}>We are trying to connect to the sisl API.</div>\n                </div>\n                <NotConnected camera={{ position: [0, 0, 5] }}/>\n                <div style={{ paddingBottom: 100, fontSize: \"1.2em\" }}> Meanwhile you can have fun with these two moving cubes. </div>\n                <ConnectionStatus\n                    connectedProps={{ style: { backgroundColor: \"lightgreen\" } }}\n                    style={{ position: \"absolute\", right: 0, top: 0, margin: 20, width: 40, height: 40, borderRadius: 40, display: \"flex\", justifyContent: \"center\", alignItems: \"center\" }} />\n                <ToastContainer />\n                <Controls />\n                <ReactTooltip multiline disable={this.props.session.settings ? !this.props.session.settings.showTooltips : false} />\n                </div>\n        }\n\n        if (['plotLayoutEditor', \"sislDocs\"].includes(this.props.active.page)) {\n            return (\n                <div style={{ marginBottom: 0, display: \"flex\", flexWrap: \"wrap\", height: \"100vh\", position: \"relative\"}}>\n                    <GlobalHotKeys keyMap={{ ...GLOBAL_HOT_KEYS }} handlers={this.hotKeysHandlers} />\n                    <MainComponent />\n                    <Controls style={{position: \"absolute\", bottom: 0, right: 0}}/>\n                    {this.props.active.page === \"sislDocs\" ? null : <ToastContainer />}\n                    {this.props.active.page === \"sislDocs\" ? null : <ConnectionStatus\n                        connectedProps={{ style: { backgroundColor: \"lightgreen\" } }}\n                        style={{ position: \"absolute\", right: 0, top: 0, margin: 20, width: 40, height: 40, borderRadius: 40, display: \"flex\", justifyContent: \"center\", alignItems: \"center\" }} />}\n                    <ReactTooltip multiline disable={this.props.session.settings ? !this.props.session.settings.showTooltips : false} />\n                </div>\n            )\n        }\n\n        return (\n            <div style={{display: \"flex\", flexWrap: \"wrap\"}}>\n                <GlobalHotKeys keyMap={{...GLOBAL_HOT_KEYS}} handlers={this.hotKeysHandlers}/>\n                <StructurePicker style={{ paddingLeft: 15, paddingRight: 15, width: \"10vw\", minWidth: 200, borderRight: \"#ccc solid 1px\"}}/>   \n                <div style={{flex: 1, paddingLeft: 20, height: \"100vh\", display: \"flex\", flexDirection: \"column\"}}>\n                    {this.props.active.page === \"plots\" ? <Tabs /> : null}\n                    <MainComponent style={{flex: 1}}/>\n                    <FilesInput/>\n                </div>\n                <Controls />\n                <ToastContainer/>\n                <ConnectionStatus \n                connectedProps={{ style: {backgroundColor: \"lightgreen\"}}}\n                style={{ position: \"absolute\", right: 0, top: 0, margin: 20, width:40, height: 40, borderRadius: 40, display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}/>\n                <ReactTooltip multiline disable={this.props.session.settings ? !this.props.session.settings.showTooltips : false}/>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    plots: state.plots,\n    structures: state.session.structures,\n    tabs: state.session.tabs,\n    active: state.active,\n    session: state.session\n})\n\nconst mapDispatchToProps = {\n    setCurrentSession,\n    setActiveTab,\n    setSessionTabs,\n    setActivePlot,\n    addPlots,\n    setNewStructures,\n    setNewPlotables,\n    setActivePage\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Plots);","import React from 'react';\nimport './App.css';\n\n//--Redux\nimport getStoreAndPersistor from './redux/store'\nimport { Provider } from 'react-redux'\nimport { PersistGate } from 'redux-persist/integration/react'\nimport Plots from './pages/Plots'\n\nconst {store, persistor} = getStoreAndPersistor()\n\nfunction App() {\n  return (\n    <Provider store={store}>\n      <PersistGate persistor={persistor}>\n        <div className=\"App\" style={{display: \"flex\", flexDirection: \"column\"}}>\n          <div className = \"appContent\" style={{height: \"100vh\"}}>\n            <Plots/>\n          </div>   \n        </div>\n      </PersistGate>\n    </Provider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}