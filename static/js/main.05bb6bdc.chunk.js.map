{"version":3,"sources":["redux/reducers/session.js","redux/actions/actionTypes.js","redux/reducers/plots.js","redux/reducers/active.js","redux/reducers/loading.js","redux/reducers/persist.js","redux/reducers/index.js","redux/actions/index.js","components/settings/inputFields/TextInput.js","components/prompts/Prompt.js","apis/PythonApi.js","utils/hotkeys.js","components/plots/PlotCard.js","components/tabs/Tab.js","components/tabs/Tabs.js","components/plots/PlotDashboard.js","components/structures/StructureTag.js","components/controls/Controls.js","components/controls/NavigateButton.js","components/structures/PlotableTag.js","components/structures/StructurePicker.js","components/plotInitializer/PlotTypePicker.js","components/plotInitializer/TabPicker.js","components/plotInitializer/StructureRow.js","components/plotInitializer/MergeMethodPicker.js","components/plotInitializer/StructuresGroup.js","components/plotInitializer/PlotableRow.js","components/plotInitializer/PlotInitializer.js","components/settings/inputFields/Switch.js","components/settings/inputFields/Dropdown.js","components/settings/inputFields/ColorPicker.js","components/settings/inputFields/RangeSlider.js","components/settings/inputFields/Range.js","components/settings/inputFields/Numeric.js","components/settings/inputFields/QueriesInput.js","components/settings/inputFields/Array.js","components/settings/inputFields/List.js","components/settings/inputFields/CreatableDropown.js","components/settings/inputFields/AtomSelector.js","components/settings/InputField.js","components/settings/SettingsContainer.js","pages/PlotTweaking.js","pages/Settings.js","components/pythonMethods/Method.js","components/pythonMethods/Methods.js","pages/PlotMethods.js","components/settings/inputFields/Files.js","components/controls/ConnectionStatus.js","components/structureView/MoleculeViewer.js","pages/PlotEditor.js","components/loading/NotConnected.js","pages/SislDocs.js","pages/Plots.js","redux/store/index.js","App.js","serviceWorker.js","index.js"],"names":["defaultState","session","newState","state","action","type","console","log","warn","settings","settingKey","value","chosenPlots","plotables","plotableID","plots","newPlots","_","omit","plotID","extraParams","unsubmittedSettings","toast","error","plot","undefined","tab","structs","page","active","activeTab","activeTabInSession","find","tabs","anyTab","length","id","structsToDeactivate","Array","isArray","structID","filter","includes","pageName","plotablesToDeactivate","loading","from","Date","persist","key","whitelist","reducer","persistReducer","storage","combineReducers","browser","createResponsiveStateReducer","small","medium","selectActiveStructs","map","structures","selectActivePlotables","selectActivePlot","setCurrentSession","addPlots","tabsIDs","setNewStructures","newStructures","setSessionTabs","setActivePlot","setActiveTab","setActiveStructs","deactivateStruct","informLoadingPlot","informLoadedPlot","setActivePage","setActivePlotables","deactivatePlotable","Text","this","props","label","setting","name","TextField","variant","onChange","e","target","style","width","inputField","params","Component","Prompt","controlClose","closeToast","callback","paddingBottom","content","setState","inputProps","Button","onClick","prompt","autoClose","closeOnClick","onClose","arg","connect","address","apiAddress","externalListeners","socket","io","listeners","forEach","listener","on","connectionTimeOut","setTimeout","currentAddress","newAddress","trim","connected","disconnect","close","onConnect","args","push","onDisconnect","setupListeners","clearTimeout","requestSession","reason","askForAuth","err","handleError","document","dispatchEvent","CustomEvent","detail","info","authenticating","toastPrompt","username","emit","path","loadSession","newProcessId","uuidv4","_sessionMethod","methodName","kwargs","updateSessionSettings","newSettings","undoSessionSettings","addTab","tabName","removeTab","tabID","updateTab","newParams","setTabLayouts","layouts","saveSession","getPlot","plot_id","newPlot","newPlotKwargs","removePlot","movePlot","mergePlots","plotIDs","to","_plotMethod","showPlotFullScreen","updatePlotSettings","undoPlotSettings","updatePlotLayout","layoutUpdates","updateFigure","layout","data","frames","overwrite","callPlotShortcut","sequence","dispatchPlotEvent","event","savePlot","sendFile","file","user","api","GLOBAL_HOT_KEYS","SHOW_AVAIL_HOTKEYS","GO_TO_SETTINGS","GO_TO_DASHBOARD","GO_TO_MOLECULEVIEWER","SAVE_SESSION","sequences","LOAD_SESSION","TABS_HOT_KEYS","global","MOVE_TO_NEXT_TAB","MOVE_TO_PREVIOUS_TAB","NEW_TAB","TRY","PLOTS_HOT_KEYS","PLOT_CARD_HOT_KEYS","GO_TO_PLOT_SETTINGSEDITING","GO_TO_PLOT_LAYOUTEDITING","GO_TO_PLOT_METHODS","FULL_SCREEN","REMOVE_PLOT","UNDO_PLOT_SETTINGS","SETTING_GROUP_HOT_KEYS","SUBMIT_SETTINGS","PLOT_TWEAKING_HOT_KEYS","UNDO_SETTINGS","SUBMIT_ALL_SETTINGS","PlotCard","hotKeys","querySelectorAll","hotKeysHandlers","goToPlotLayoutEditing","goToPlotSettingsEditing","goToPlotMethods","undoSettings","shortcuts","PythonApi","handlePlotClick","points","handlePlotRelayout","keys","Object","setPlotAsActive","togglePlotAsActive","isActivePlot","rootDir","isLoading","addEventListener","cou","Math","random","Card","className","borderRadius","figure","backColor","paper_bgcolor","hotKeysKeyMap","TESTING","reduce","plotShortcuts","shortcut","replace","activeStyles","component","elevation","keyMap","handlers","allowChanges","height","display","flexDirection","overflow","background","paddingTop","flex","ref","plotlyRef","useResizeHandler","autosize","onRelayout","onUpdate","config","editable","responsive","paddingLeft","paddingRight","marginBottom","Provider","size","margin","color","textAlign","IconButton","data-tip","disable","showTooltips","mapDispatchToProps","Tab","updateTabs","updateTabParams","newTabParams","updateTabName","blur","textContent","contentEditable","onBlur","onKeyUp","keyCode","Tabs","moveThroughTabs","newTab","direction","newI","i","findIndex","noTabsMessage","flexWrap","alignItems","marginTop","data-place","ResponsiveReactGridLayout","WidthProvider","Responsive","selectedPlotStyles","backgroundColor","PlotDashboard","currentBreakpoint","compactType","mounted","lg","emptyDashboard","noPlotsMessage","justifyContent","fontSize","fontWeight","padding","toggleSelected","selected","onBreakpointChange","breakpoint","onResizeStop","finalL","initL","higher","h","shouldComponentUpdate","newProps","_plotsInLayout","hasDifferentPlots","isDifferentTab","isEqual","onLayoutChange","onDrop","elemParams","alert","JSON","stringify","getLayout","newPlotLayout","draggableCancel","measureBeforeMount","useCSSTransforms","preventCollision","rowHeight","generateDOM","removePlots","movePlots","iTab","renderSelectedManager","nSelected","Paper","merge","toggleSelect","l","ctrlKey","hotKeysHandler","pick","React","defaultProps","cols","md","sm","xs","xxs","x","grid_dims","y","w","setTabPlots","withHotKeys","StructureTag","struct","toggleStruct","data-effect","split","slice","useStyles","makeStyles","theme","root","transform","flexGrow","exampleWrapper","position","spacing","radioGroup","speedDial","bottom","right","top","left","SpeedDials","classes","useState","open","setOpen","hidden","SpeedDial","ariaLabel","icon","SpeedDialIcon","onOpen","actions","SpeedDialAction","tooltipTitle","tip","tooltipPlacement","href","Controls","saveCurrentSession","syncWithSession","showPage","Control","tooltip","floating","ROUTES","hotKey","NavigateButton","route","PlotableTag","plotable","togglePlotable","StructurePicker","togglePlotInitializer","selectedStructs","selectedPlotables","forceShow","forceHide","selectStructs","selectPlotables","xor","toggleStructDisplay","displayStructures","togglePlotablesDisplay","displayPlotables","toggleAlphabeticSorting","toggles","alphabeticSorting","toggleSearchByFolder","searchByFolder","toggleSelectedSorting","selectedSorting","toggleAll","onDisplay","filterStructs","onDisplaySelected","intersection","displayedStructs","displayedPlotables","searchString","object","index","isPlotable","newStructs","str","toTest","RegExp","test","newSearchString","noStructuresMessage","noMatchingStructuresMessage","structsAndPlotables","orderBy","autocomplete","placeholder","marginRight","cursor","values","obj","activeStructs","activePlotables","ValueContainer","components","Placeholder","CustomValueContainer","children","isFocused","selectProps","Children","child","PlotTypePicker","plotOptions","options","isClearable","isSearchable","isMulti","styles","container","provided","valueContainer","hasValue","inputValue","transition","marginLeft","TabPicker","defaultValue","StructureRow","structure","groupActive","moveStructToActiveGroup","OPTIONS","MergeMethodPicker","StructuresGroup","initializingOptions","plotClasses","mergeMethod","activenessStyles","splitGroup","removeGroup","setGroupAsActive","Grid","borderTopLeftRadius","item","val","onInitParamChange","PlotableRow","plotOption","plotTypes","setPlotablePlots","PlotInitializer","onStructsUpdate","prevActiveStructs","structureGroups","markActiveGroup","newGroup","activeGroupIndex","activeGroup","cleanUnselectedFromGroups","groups","cleanGroups","group","groupParams","defaultTabID","addGroup","iGroup","g","splitted","updateGroupInitParams","toggleVisibility","Event","updateInitializingOptions","getNewPlot","plotType","plotable_path","plot_method","animation","plotClass","nothingToPlotMessage","prevProps","paramName","endIcon","SwitchInput","Switch","checked","Dropdown","ColorPicker","toggleColorPicker","displayColorPicker","tempcolor","colorPicker","hex","onChangeComplete","RangeWithTooltip","createSliderWithTooltip","Range","RangeSlider","Number","InputField","number","Numeric","additionalProps","QueriesField","addQuery","newQuery","queryForm","queryParam","default","changeSettingValue","iQuery","paramKey","paramValue","newValue","cloneDeep","renderQuery","query","String","onValueChange","ArrayInput","changeValue","newVal","handleNone","shape","fill","orientationStyles","vertical","inputStyle","DragHandle","sortableHandle","SortableItem","sortableElement","sortable","remove","SortableContainer","sortableContainer","ListInput","sanitizeVal","addItem","removeItem","onSortEnd","oldIndex","newIndex","arrayMove","useDragHandle","itemInput","CreatableDropdown","santitizeValue","sanitized","handleChange","AtomSelector","onCategoryChange","catName","addNewCategory","deleteCategory","renderCategory","ATOMIC_CATEGORIES_INPUT","InputComponent","borderStyle","borderColor","borderWidth","new_cat_value","AtomIndexCategory","FractionalCoordinatesCategory","min","max","step","tipFormatter","CoordinatesCategory","AtomicNumberCategory","AtomicTagCategory","fx","fy","fz","z","Z","neighbours","onRangeChange","onKeyChange","R","neighbour","tag","INPUT_FIELDS","textinput","TextInput","switch","dropdown","rangeslider","range","queries","vector","list","string","isSizeDefined","sizeLabel","indexOf","substr","mediaType","changeSettings","onSettingChangeType","onSettingChangeExtraParams","fieldLayout","tooltipParams","help","actionType","SettingsContainer","MOVE_EXPANDED_UP","moveExpanded","MOVE_EXPANDED_DOWN","newExpanded","expanded","renderSettingsGroup","settingsGroup","renderSettingsGroups","groupedParams","paramGroups","paramGroup","iParamGroup","groupKey","subGrouped","groupBy","itemContent","subGroups","submitSettings","Icon","parse","description","PlotTweaking","activePlot","plotSettings","setsCont","maxHeight","multiline","Settings","isEmpty","defaultActiveKey","dispatch","Method","applyMethod","renderDetails","showingDetails","ExpansionPanel","ExpansionPanelSummary","ExpansionPanelDetails","source","ExpansionPanelActions","Methods","PlotMethods","FilesInput","useCallback","acceptedFiles","useDropzone","getRootProps","getInputProps","ConnectionStatus","data-background-color","MoleculeViewer","PlotEditor","plotly","debug","advancedTraceTypeSelector","Box","mesh","useRef","hovered","setHover","setActive","useFrame","current","rotation","scale","onPointerOver","onPointerOut","attach","NotConnected","sign","SislDocs","process","aria-label","configure","logLevel","simulateMissingKeyPressEvents","Plots","getApplicationKeyMap","askForSession","plotToInitialize","currentlyShowing","loadingPlots","justUpdated","MainComponent","connectedProps","minWidth","borderRight","Files","camera","setNewPlotables","newPlotables","store","createStore","rootReducer","responsiveStoreEnhancer","persistor","persistStore","getStoreAndPersistor","App","Boolean","window","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.05bb6bdc.chunk.js","sourcesContent":["import { CLEAR_SESSION, SET_SESSION, CHANGE_SESSION_SETTINGS, SET_PLOTABLE_PLOTS, DEACTIVATE_PLOTABLE} from '../actions/actionTypes'\n\nconst defaultState = {}\n\nconst session = (state = defaultState, action) => {\n    let newState;\n    switch (action.type) {\n        case SET_SESSION:\n            console.log(\"REDUX: Setting current session...\")\n            console.warn(action.session)\n            newState = action.session\n            console.log(newState)\n\n            return newState\n        \n        case CHANGE_SESSION_SETTINGS:\n            console.log(\"REDUX: Changing current session settings (not submitting yet)...\")\n            newState = {\n                ...state,\n                settings: {\n                    ...state.settings,\n                    [action.settingKey]: action.value\n                }\n            }\n            console.log(newState)\n            return newState\n\n        \n        case CLEAR_SESSION:\n            return defaultState\n\n        case DEACTIVATE_PLOTABLE:\n\n            action.chosenPlots = []\n\n            newState = {\n                ...state,\n                plotables: {\n                    ...state.plotables,\n                    [action.plotableID]: {\n                        ...state.plotables[action.plotableID],\n                        chosenPlots: action.chosenPlots\n                    }\n                }\n            }\n\n            return newState\n\n        case SET_PLOTABLE_PLOTS:\n\n            newState = {\n                ...state,\n                plotables: {\n                    ...state.plotables,\n                    [action.plotableID]: {\n                        ...state.plotables[action.plotableID],\n                        chosenPlots: action.chosenPlots\n                    }\n                }\n            }\n\n            return newState\n\n        default:\n            return state\n    }\n}\n\nexport default session","export const ADD_PLOTS = 'ADD_PLOTS'\nexport const REMOVE_PLOT = 'REMOVE_PLOT'\nexport const CHANGE_PLOT_SETTINGS = 'CHANGE_PLOT_SETTINGS'\nexport const ADD_TABS = 'ADD_TABS'\nexport const SET_STRUCTURES = 'SET_STRUCTURES'\nexport const SET_PLOTABLES = 'SET_PLOTABLES'\nexport const SET_TAB_PLOTS = 'SET_TAB_PLOTS'\nexport const SET_SESSION_TABS = 'SET_SESSION_TABS'\n//Activate\nexport const SET_ACTIVE_PLOT = 'SET_ACTIVE_PLOT'\nexport const SET_ACTIVE_TAB = 'SET_ACTIVE_TAB'\nexport const SET_ACTIVE_STRUCTS = 'SET_ACTIVE_STRUCTS'\nexport const SET_ACTIVE_PLOTABLES = 'SET_ACTIVE_PLOTABLES'\n//Deactivate\nexport const DEACTIVATE_STRUCT = 'DEACTIVATE_STRUCT'\nexport const DEACTIVATE_PLOTABLE = 'DEACTIVATE_PLOTABLE'\nexport const SET_SESSION = 'SET_SESSION'\nexport const CHANGE_SESSION_SETTINGS = 'CHANGE_SESSION_SETTINGS'\nexport const CLEAR_SESSION = 'CLEAR_SESSION'\nexport const START_LOADING_PLOT = 'START_LOADING_PLOT'\nexport const END_LOADING_PLOT = 'END_LOADING_PLOT'\nexport const SET_ACTIVE_PAGE = 'SET_ACTIVE_PAGE'\n\nexport const SET_PLOTABLE_PLOTS = 'SET_PLOTABLE_PLOTS'\n\n\n","import { ADD_PLOTS, CLEAR_SESSION, REMOVE_PLOT, CHANGE_PLOT_SETTINGS } from '../actions/actionTypes'\nimport _ from \"lodash\"\nimport { toast } from 'react-toastify';\n\nconst defaultState = {};\n\nconst plots = (state = defaultState, action) => {\n    let newState;\n    switch (action.type) {\n        case ADD_PLOTS:\n            console.log(\"REDUX: Storing a new plot...\")\n            newState = {\n                ...state,\n                ...action.newPlots,\n            }\n            console.log(newState)\n            return newState\n        \n        case REMOVE_PLOT:\n            return _.omit(state, [action.plotID])\n        \n        case CHANGE_PLOT_SETTINGS:\n            console.log(\"REDUX: Changing plot settings (not submitting yet)...\")\n\n            let plotID = action.extraParams.plotID\n            if (!state[plotID]) {\n                toast.error(\"You are trying to change the settings of a plot that does not exist\")\n                return state\n            }\n\n            newState = {\n                ...state,\n                [plotID]: {\n                    ...state[plotID],\n                    unsubmittedSettings: {\n                        ...state[plotID].unsubmittedSettings,\n                        [action.settingKey]: action.value\n                    }\n                }\n            }\n            console.log(newState)\n            return newState\n        \n        case CLEAR_SESSION:\n            return defaultState\n            \n        default:\n            return state\n    }\n}\n\nexport default plots","import { \n    SET_ACTIVE_PLOT,\n    SET_ACTIVE_TAB,\n    CLEAR_SESSION,\n    SET_ACTIVE_STRUCTS,\n    SET_ACTIVE_PLOTABLES,\n    DEACTIVATE_STRUCT,\n    SET_ACTIVE_PAGE,\n    DEACTIVATE_PLOTABLE,\n    SET_STRUCTURES,\n    SET_PLOTABLES,\n    SET_SESSION\n} from '../actions/actionTypes'\n\nimport _ from \"lodash\"\n\nconst defaultState = {plot: undefined, tab: undefined, structs: [], plotables:[], page: \"plots\"};\n\nconst active = (state = defaultState, action) => {\n    let newState;\n    switch (action.type) {\n        case SET_ACTIVE_PLOT:\n            console.log(\"REDUX: Setting active plot...\")\n            newState = {\n                ...state,\n                plot: action.plotID,\n            }\n            console.log(newState)\n            return newState\n\n        case SET_ACTIVE_TAB:\n            console.log(\"REDUX: Setting active tab...\")\n            newState = {\n                ...state,\n                tab: action.activeTab,\n            }\n            console.log(newState)\n            return newState\n        \n        case SET_SESSION:\n\n            const activeTabInSession = _.find(action.session.tabs, [\"id\", state.tab])\n            const anyTab = action.session.tabs.length > 0\n            \n            if (activeTabInSession) {\n                return state\n            } else if (anyTab){\n                return {...state, tab: action.session.tabs[0].id}\n            } else {\n                return { ...state, tab: null}\n            }\n        \n        case SET_ACTIVE_STRUCTS:\n            \n            newState = {\n                ...state,\n                structs: action.structs,\n            }\n\n            return newState\n        \n        case SET_STRUCTURES:\n\n            return { ...state, structs: []}\n        \n        case DEACTIVATE_STRUCT:\n\n            let structsToDeactivate = Array.isArray(action.structID) ? action.structID : [action.structID]\n\n            newState = {\n                ...state,\n                structs: state.structs.filter( structID => !structsToDeactivate.includes(structID) ),\n            }\n\n            return newState\n        \n        case SET_ACTIVE_PAGE:\n\n            newState = {\n                ...state,\n                page: action.pageName,\n            }\n\n            return newState\n        \n        case SET_ACTIVE_PLOTABLES:\n        \n            newState = {\n                ...state,\n                plotables: action.plotables,\n            }\n\n            return newState\n        \n        case SET_PLOTABLES:\n\n            return { ...state, plotables: [] }\n        \n        case DEACTIVATE_PLOTABLE:\n\n            let plotablesToDeactivate = Array.isArray(action.plotableID) ? action.plotableID : [action.plotableID]\n    \n            newState = {\n                ...state,\n                plotables: state.plotables.filter( plotableID => !plotablesToDeactivate.includes(plotableID) ),\n            }\n\n            return newState\n        \n        case CLEAR_SESSION:\n            return defaultState\n                \n        default:\n            return state\n    }\n}\n\nexport default active","import { \n    START_LOADING_PLOT,\n    END_LOADING_PLOT\n} from '../actions/actionTypes'\n\nimport _ from 'lodash';\n\nconst loading = (state = {plots:{}}, action) => {\n    let newState;\n    switch (action.type) {\n        case START_LOADING_PLOT:\n            console.log(\"REDUX: Setting active plot...\")\n            newState = {\n                ...state,\n                plots: {\n                    ...state.plots,\n                    [action.plot.id]: {\n                        ...action.plot,\n                        from: new Date()\n                    }\n                }\n            }\n            console.log(newState)\n            return newState\n        \n        case END_LOADING_PLOT:\n            console.log(\"REDUX: Changing plot settings (not submitting yet)...\")\n            newState = {\n                ...state,\n                plots: _.omit(state.plots, [action.plotID]),\n            }\n            console.log(newState)\n            return newState\n                \n        default:\n            return state\n    }\n}\n\nexport default loading","import storage from \"redux-persist/lib/storage\"\nimport { persistReducer } from 'redux-persist';\nexport function persist(key, whitelist, reducer) {\n    return persistReducer({\n        key,\n        storage,\n        whitelist,\n    }, reducer);\n}","import { combineReducers } from 'redux'\nimport {createResponsiveStateReducer} from 'redux-responsive'\n\nimport session from './session'\nimport plots from './plots'\nimport active from './active'\nimport loading from './loading'\nimport { persist } from './persist'\n\nexport default combineReducers({\n    session,\n    plots,\n    loading: persist('loading', ['plots'], loading),\n    active: persist( 'active', ['tab', 'plot'], active),\n    browser: createResponsiveStateReducer({\n        small: 600,\n        medium: 992,\n    })\n})\n\nexport const selectActiveStructs = (state) => {\n    return state.active.structs.map(structID => state.session.structures[structID])\n}\n\nexport const selectActivePlotables = (state) => {\n    return state.active.plotables.map(plotableID => state.session.plotables[plotableID])\n}\n\nexport const selectActivePlot = (state) => {\n    return state.plots[state.active.plot]\n}","import { \n    ADD_PLOTS,\n    REMOVE_PLOT,\n    ADD_TABS,\n    SET_STRUCTURES,\n    SET_TAB_PLOTS,\n    SET_SESSION_TABS,\n    SET_ACTIVE_PLOT,\n    SET_ACTIVE_TAB,\n    CLEAR_SESSION,\n    SET_SESSION,\n    SET_ACTIVE_STRUCTS,\n    DEACTIVATE_STRUCT,\n    START_LOADING_PLOT,\n    END_LOADING_PLOT,\n    SET_ACTIVE_PAGE,\n    DEACTIVATE_PLOTABLE,\n    SET_ACTIVE_PLOTABLES,\n    SET_PLOTABLES,\n    SET_PLOTABLE_PLOTS\n} from './actionTypes'\n\nexport const setCurrentSession = (session) => {\n\n    return {\n        type: SET_SESSION,\n        session\n    }\n}\n    \nexport const addPlots = (newPlots, tabsIDs) => ({\n    type: ADD_PLOTS,\n    newPlots,\n    tabsIDs\n})\n\nexport const removePlot = (plotID, tabID) => ({\n    type: REMOVE_PLOT,\n    plotID,\n    tabID\n})\n\nexport const changeSettings = (actionType, settingKey, value, extraParams) => ({\n    type: actionType, //Valid action types are all of type CHANGE_<something>_SETTINGS\n    settingKey,\n    value,\n    extraParams // Here the plotID is passed, for example, if the actionType is CHANGE_PLOT_SETTINGS\n})\n\nexport const addTabs = (newTabs) => ({\n    type: ADD_TABS,\n    newTabs\n})\n\nexport const setNewStructures = (newStructures) => ({\n    type: SET_STRUCTURES,\n    newStructures\n})\n\nexport const setTabPlots = (tabID, plots) => ({\n    type: SET_TAB_PLOTS,\n    tabID,\n    plots\n})\n\nexport const setSessionTabs = (tabs) => ({\n    type: SET_SESSION_TABS,\n    tabs\n})\n\nexport const setActivePlot = (plot) => ({\n    type: SET_ACTIVE_PLOT,\n    plotID: plot ? typeof(plot) == \"string\" ? plot : plot.id : undefined\n})\n\nexport const setActiveTab = (tab) => ({\n    type: SET_ACTIVE_TAB,\n    activeTab: tab\n})\n\nexport const clearSession = () => ({\n    type: CLEAR_SESSION,\n})\n\nexport const setActiveStructs = (structs) => ({\n    type: SET_ACTIVE_STRUCTS,\n    structs: structs\n})\n\nexport const deactivateStruct = (structID) => ({\n    type: DEACTIVATE_STRUCT,\n    structID\n})\n\nexport const informLoadingPlot = (plot) => ({\n    type: START_LOADING_PLOT,\n    plot\n})\n\nexport const informLoadedPlot = (plotID) => ({\n    type: END_LOADING_PLOT,\n    plotID\n})\n\nexport const setActivePage = (pageName) => ({\n    type: SET_ACTIVE_PAGE,\n    pageName\n})\n\nexport const setNewPlotables = (newPlotables) => ({\n    type: SET_PLOTABLES,\n    newPlotables\n})\n\nexport const setActivePlotables = (plotables) => ({\n    type: SET_ACTIVE_PLOTABLES,\n    plotables\n})\n\nexport const deactivatePlotable = (plotableID) => ({\n    type: DEACTIVATE_PLOTABLE,\n    plotableID\n})\n\nexport const setPlotablePlots = (plotableID, chosenPlots) => ({\n    type: SET_PLOTABLE_PLOTS,\n    plotableID,\n    chosenPlots\n})\n\n\n\n","import React, { Component } from 'react'\nimport TextField from '@material-ui/core/TextField'\n\n\nexport default class Text extends Component {\n    render() {\n\n        const value = this.props.value || \"\"\n\n        const label = this.props.label || (this.props.setting ? this.props.setting.name : \"\")\n\n        return (\n            <TextField\n                variant=\"outlined\"\n                value={value}\n                onChange={(e) => this.props.onChange(e.target.value)}\n                label={label}\n                style={{width: \"100%\", ...this.props.style}}\n                {...(this.props.inputField ? this.props.inputField.params : this.props.params)}/>\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport { toast } from 'react-toastify'\n\nimport TextInput from \"../settings/inputFields/TextInput\"\nimport { Button } from '@material-ui/core'\n\nexport class Prompt extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = {\n            value: \"\"\n        }\n\n        if (props.controlClose){\n            props.controlClose(props.closeToast)\n        }\n    }\n\n    componentWillUnmount(){\n        this.props.callback(this.state.value)\n    }\n\n    render() {\n        return (\n            <div>\n                <div style={{paddingBottom: 10}}>{this.props.content}</div>\n                <TextInput value={this.state.value} onChange={(value) => {this.setState({value})}} label={this.props.inputProps.label}/>\n                <Button onClick={this.props.closeToast}>Submit</Button>\n            </div>\n        )\n    }\n\n}\n\nconst prompt = (content, callback, props) => {\n\n    toast(<Prompt content={content} callback={callback} {...props}/>, {autoClose: false, closeOnClick: false, onClose: (arg) => {console.warn(arg)} })\n\n}\n\nexport const connectionPrompt = (currentAddress, callback, props) => {\n\n    const content = <div>\n        <div>{\"Couldn't connect to \" + currentAddress}</div>\n        <div>Do you want to specify a different address for the API?</div>\n        <div> (http(s)://host:port)</div>\n    </div>\n\n    prompt(content, callback, {inputProps: {label: \"New address\" }, ...props})\n\n}\n\nexport const authPrompt = (callback, props) => {\n\n    const content = <div>\n        <div>Authorization is required</div>\n        <div>We need you to provide your username:</div>\n    </div>\n\n    prompt(content, callback, { inputProps: { label: \"Username\" }, ...props })\n\n} \n\nexport default prompt;\n","import io from 'socket.io-client';\nimport { toast } from 'react-toastify';\nimport { v4 as uuidv4 } from 'uuid';\nimport toastPrompt, {connectionPrompt} from '../components/prompts/Prompt';\n\nexport class PythonApi {\n\n    constructor() {\n\n        this.apiAddress = 'http://localhost:4000'\n        this.user = undefined\n\n        this.listeners = []\n        this.setupListeners()\n\n        this.connect()\n\n        /*This can be dangerous in the browser if the user let's other websites\n        access this tab. By default it is not possible, one would have to download\n        an extension to make it possible, but still. */ \n        document.api = this\n\n    }\n\n    connect = (address) => {\n\n        if (address) this.apiAddress = address\n\n        this.externalListeners = {}\n\n        this.socket = io(this.apiAddress);\n        this.listeners.forEach(listener => this.socket.on(...listener))\n\n        // Timeout to prompt the user for a new api address if the socket fails to connect\n        this.connectionTimeOut = setTimeout(() => {\n\n            connectionPrompt(this.apiAddress, (newAddress) => {\n                if (newAddress) {\n                    this.apiAddress = newAddress.trim()\n                }\n                if (!this.socket.connected){\n                    this.disconnect()\n                    this.connect()\n                }\n\n            }, {controlClose: (close) => this.onConnect(close)})\n            \n        }, 3000)\n\n        this.socket.connect()\n\n    }\n\n    disconnect = () => {\n        this.socket.disconnect()\n    }\n\n    on = (...args) => {\n\n        if (this.socket){\n            this.socket.on(...args)\n        }\n        // In this way all the listeners are registered each time\n        // The socket changes\n        this.listeners.push(args)\n    }\n\n    onConnect = (...args) => {\n        this.on('connect', ...args)\n    }\n\n    onDisconnect = (...args) => {\n        this.on('disconnect', ...args)\n    }\n\n    setupListeners = () => {\n\n        this.on('connect', () => {\n            //document.dispatchEvent(new Event('socket_connect'))\n            clearTimeout(this.connectionTimeOut)\n            this.requestSession()\n        });\n\n        this.on('disconnect', (reason) => {\n            console.warn(reason)\n            this.disconnect()\n            this.connect()\n        });\n\n        this.on('auth_required', this.askForAuth)\n\n        this.on('logged_in', this.requestSession)\n\n        this.on('error', (err) => this.handleError(err, \"socket\"));\n\n        this.on('server_error', (err) => this.handleError(err, \"server\"));\n        \n        this.on('current_session', (session) => {\n            console.error(session)\n            document.dispatchEvent(new CustomEvent(\"syncWithSession\", { detail: { session } }))\n        })\n\n        this.on('loading_plot', (info) => {\n            document.dispatchEvent(new CustomEvent(\"loadingPlot\", { detail: info }))\n        })\n\n        this.on('plot', (plot) => {\n            document.dispatchEvent(new CustomEvent(\"plot\", { detail: { plot } }))\n        })\n\n    }\n\n    handleError = (err, type) => {\n        if (type === \"server\"){\n            toast.error(\"THERE WAS A PYTHON ERROR:\\n\" + err)\n        } else {\n            toast.error(err)\n        }\n        \n    }\n\n    askForAuth = () => {\n\n        if (this.authenticating) return\n\n        this.authenticating = true\n        toastPrompt((username) => {\n            this.socket.emit(\"login\", username)\n            this.authenticating = false\n        })\n    }\n\n    requestSession = (path) => {\n        this.socket.emit('request_session', path)\n    }\n\n    loadSession = (path) => {\n        this.requestSession(path)\n    }\n\n    newProcessId = uuidv4\n\n    _sessionMethod = (methodName, kwargs, callback, ...args) => {\n        /* With this you can call any session method\n        \n        However this method should not be directly used.\n        A new method should be defined in this class to avoid \n        headaches with changes in method names in sisl.viz.Session\n        \n        You have the possibility to set up a callback, but remember that \n        by default the session will be emitted by the server and its update\n        is automatic. Therefore, only use the callback if you are using a\n        \"getter\" method and you want to act according to the results. You may\n        want also to inform the user that the process has finished. But again,\n        this behavior should also be taken care of automatically.*/\n\n        if (callback) {\n            \n        }\n\n        this.socket.emit(\"apply_method_on_session\", methodName, kwargs, ...args)\n    }\n\n    updateSessionSettings = (newSettings) => {\n        this._sessionMethod(\"update_settings\", newSettings)\n    }\n\n    undoSessionSettings = () => {\n        this._sessionMethod(\"undo_settings\")\n    }\n\n    addTab = (tabName) => {\n        this._sessionMethod(\"add_tab\", {name: tabName})\n    }\n\n    removeTab = (tabID) => {\n        this._sessionMethod(\"remove_tab\", {tabID})\n    }\n\n    updateTab = (tabID, newParams) => {\n        this._sessionMethod(\"update_tab\", { tabID, newParams })\n    }\n\n    setTabLayouts = (tabID, layouts) => {\n        this.updateTab(tabID, {layouts})\n    }\n\n    saveSession = (path) => {\n        this._sessionMethod(\"save\", {path})\n    }\n\n    getPlot = (plotID) => {\n        document.dispatchEvent(new CustomEvent(\"updatingPlot\", {detail: {plot_id: plotID}}))\n        this.socket.emit(\"get_plot\", plotID)\n    }\n\n    newPlot = (newPlotKwargs) => {\n        this._sessionMethod(\"new_plot\", newPlotKwargs)\n    }\n\n    removePlot = (plotID) => {\n        this._sessionMethod(\"remove_plot\", null, null, plotID)\n    }\n\n    movePlot = (plotID, tab) => {\n        this._sessionMethod(\"move_plot\", null, null, plotID, tab)\n    }\n\n    mergePlots = (plotIDs, to) => {\n        this._sessionMethod(\"merge_plots\", {to}, null, plotIDs)\n    }\n\n    _plotMethod = (plotID, methodName, kwargs, callback, ...args) => {\n        this._sessionMethod(\"_run_plot_method\", kwargs, callback, plotID, methodName, ...args)\n    }\n\n    showPlotFullScreen = (plotID) => {\n        this._plotMethod(plotID, \"show\")\n    }\n\n    updatePlotSettings = (plotID, settings) => {\n        this._plotMethod(plotID, \"update_settings\", settings)\n    }\n\n    undoPlotSettings = (plotID) => {\n        this._plotMethod(plotID, \"undo_settings\")\n    }\n\n    updatePlotLayout = (plotID, layoutUpdates) => {\n        this._plotMethod(plotID, \"update_layout\", layoutUpdates)\n    }\n\n    updateFigure = (plotID, {layout, data, frames, overwrite}) => {\n        this._plotMethod(plotID, \"update\", {layout, data, frames, overwrite})\n    }\n\n    callPlotShortcut = (plotID, sequence) => {\n        this._plotMethod(plotID, \"call_shortcut\", null, null, sequence)\n    }\n\n    dispatchPlotEvent = (plotID, event, data) => {\n        this._plotMethod(plotID, 'dispatch_event', data, null, event)\n    }\n\n    savePlot = (plotID, path) => {\n        this._plotMethod(plotID, \"save\", { path: path })\n    }\n\n    sendFile = (file) => {\n        console.log(\"TRYING TO SEND\")\n        this.socket.emit(\"upload_file\", file, file.name)\n    }\n\n}\n\nexport default new PythonApi();","\nexport const GLOBAL_HOT_KEYS = {\n\n    //HELP\n    SHOW_AVAIL_HOTKEYS:{\n        name: \"Show available hotkeys\",\n        sequence: \"shift+?\"\n    },\n\n    //NAVIGATION\n    GO_TO_SETTINGS: {\n        name: \"Go to settings\",\n        sequence: \"shift+s\",\n    },\n    GO_TO_DASHBOARD: {\n        name: \"Go to the plot's dashboard\",\n        sequence: \"shift+d\",\n    },\n    GO_TO_MOLECULEVIEWER: {\n        name: \"Go to the molecule viewer\",\n        sequence: \"shift+m\",\n    },\n\n    //SESSION\n    SAVE_SESSION: {\n        name: \"Save session\",\n        sequences: [\"ctrl+shift+s\", \"ctrl+alt+s\"]\n    },\n    LOAD_SESSION: {\n        name: \"Load session\",\n        sequences: [\"ctrl+shift+l\", \"ctrl+alt+l\"]\n    }\n\n}\n\nexport const ADDITIONAL_GLOBAL_HOT_KEYS = {\n    settings: {\n\n    },\n    plots:{\n        \n\n    }\n}\n\nexport const SETTINGS_HOT_KEYS = {\n\n}\n\nexport const TABS_HOT_KEYS = {\n    global: {\n        // TAB NAVIGATION\n        MOVE_TO_NEXT_TAB: {\n            name: \"Move to next tab\",\n            sequence: \"shift+t+right\",\n        },\n        MOVE_TO_PREVIOUS_TAB: {\n            name: \"Move to previous tab\",\n            sequence: \"shift+t+left\",\n        },\n        NEW_TAB: {\n            name: \"New tab\",\n            sequence: \"shift+t\",\n            action: \"keyup\"\n        },\n        TRY: \"shift+t+r\"\n    }\n}\n\nexport const PLOTS_HOT_KEYS = {\n    global: {\n        // TAB NAVIGATION\n        MOVE_TO_NEXT_TAB: {\n            name: \"Move to next tab\",\n            sequence: \"shift+right\",\n        },\n        MOVE_TO_PREVIOUS_TAB: {\n            name: \"Move to previous tab\",\n            sequence: \"shift+left\",\n        },\n    }\n}\n\nexport const PLOT_CARD_HOT_KEYS = {\n\n    GO_TO_PLOT_SETTINGSEDITING: {\n        name: \"Edit current plot's settings\",\n        sequence: \"s\"\n    },\n    GO_TO_PLOT_LAYOUTEDITING: {\n        name: \"Edit current plot's layout\",\n        sequence: \"e\"\n    },\n    GO_TO_PLOT_METHODS: {\n        name: \"Go to current plot methods\",\n        sequence: \"m\"\n    },\n    FULL_SCREEN: {\n        name: \"See current plot in full screen in a different browser's tab\",\n        sequence: \"f\"\n    },\n    REMOVE_PLOT: {\n        name: \"Remove current plot\",\n        sequences: [\"del\",\"backspace\"]\n    },\n    UNDO_PLOT_SETTINGS: {\n        name: \"Undo current plot settings\",\n        sequence: \"ctrl+z\"\n    },\n\n}\n\nexport const STRUCTURE_PICKER_HOT_KEYS = {\n\n}\n\nexport const SETTING_CONTAINER_HOT_KEYS = {\n\n    MOVE_EXPANDED_UP:{\n        name: \"Expand the previous settings group\",\n        sequence: \"up\"\n    },\n    MOVE_EXPANDED_DOWN:{\n        name: \"Expand the next settings group\",\n        sequence: \"down\"\n    }\n\n}\n\nexport const SETTING_GROUP_HOT_KEYS = {\n\n    SUBMIT_SETTINGS:{\n        name: \"Submit this group's settings\",\n        sequence: \"shift+enter\"\n    },\n    \n}\n\nexport const PLOT_TWEAKING_HOT_KEYS = {\n    global:{\n        UNDO_SETTINGS: {\n            name:\"Undo settings\",\n            sequence: \"ctrl+z\"\n        },\n\n        SUBMIT_ALL_SETTINGS: {\n            name: \"Submit all settings\",\n            sequence: \"shift+enter\"\n        }\n    }\n}","import React, { Component } from 'react'\nimport Plot from 'react-plotly.js';\nimport Card from \"@material-ui/core/Card\"\nimport { AiOutlineEdit, AiOutlineDelete, AiOutlineExport, AiOutlineFullscreen } from 'react-icons/ai'\nimport { FaHammer, FaSave } from 'react-icons/fa'\nimport { MdSettings } from 'react-icons/md'\nimport { IconContext } from 'react-icons'\n\nimport ReactTooltip from \"react-tooltip\"\n\nimport _ from \"lodash\"\n\n//--Redux\nimport { connect } from 'react-redux'\nimport { setActivePlot, removePlot, setSessionTabs, setActivePage, addPlots} from \"../../redux/actions\"\nimport PythonApi from '../../apis/PythonApi';\nimport { HotKeys } from 'react-hotkeys';\nimport { PLOT_CARD_HOT_KEYS } from '../../utils/hotkeys';\nimport { toast } from 'react-toastify';\nimport { IconButton } from '@material-ui/core';\n\nclass PlotCard extends Component {\n\n    constructor(props){\n        super(props)\n        this.state = {\n            isLoading: false,\n        }\n\n    }\n\n    hotKeys = () => document.querySelectorAll(\".plotCardHotKeys\")\n\n    hotKeysHandlers = {\n        GO_TO_PLOT_LAYOUTEDITING: () => this.goToPlotLayoutEditing(),\n        GO_TO_PLOT_SETTINGSEDITING: () => this.goToPlotSettingsEditing(),\n        GO_TO_PLOT_METHODS: () => this.goToPlotMethods(),\n        FULL_SCREEN: () => this.showPlotFullScreen(),\n        UNDO_PLOT_SETTINGS: () => this.undoSettings(),\n        REMOVE_PLOT: () => this.removePlot(),\n    }\n\n    callPlotShortcut = (sequence) => {\n        toast.warn(\"Applying \" + this.props.plot.shortcuts[sequence].name + \" shortcut\")\n        PythonApi.callPlotShortcut(this.props.plot.id, sequence)\n    }\n\n    handlePlotClick = ({points}) => {\n        const data = _.omit(points[0], [\"data\", \"fullData\", \"xaxis\", \"yaxis\"])\n        console.warn(data)\n        PythonApi.dispatchPlotEvent(this.props.plot.id, \"click\", data)\n    }\n\n    handlePlotRelayout = (layoutUpdates) => {\n        if (layoutUpdates[\"scene.camera\"]) return\n\n        const keys = Object.keys(layoutUpdates)\n        if (keys.includes(\"autosize\")) return \n        else if (keys.length === 0) return\n        else {\n            PythonApi.updatePlotLayout(this.props.plot.id, layoutUpdates)\n        }\n    }\n\n    undoSettings = () => {\n\n        PythonApi.undoPlotSettings(this.props.plot.id)\n    }\n\n    componentDidMount(){\n        document.addEventListener(\"plotResize\", (e) => {\n            \n            if (e.detail.id === this.props.plot.id || e.detail.id === \"all\"){\n                this.setState({cou: Math.random()})          \n            }\n            \n        })\n    }\n\n    removePlot = () => {\n        PythonApi.removePlot(this.props.plot.id)   \n    }\n\n    goToPlotSettingsEditing = () => {\n        this.setPlotAsActive()\n        this.props.setActivePage(\"plotTweaking\")\n    }\n\n    goToPlotLayoutEditing = () => {\n        this.setPlotAsActive()\n        this.props.setActivePage(\"plotLayoutEditor\")\n    }\n\n    goToPlotMethods = () => {\n        this.setPlotAsActive()\n        this.props.setActivePage(\"plotMethods\")\n    }\n\n    setPlotAsActive = () => {\n        this.props.setActivePlot(this.props.plot)\n    }\n\n    togglePlotAsActive = () => {\n        if (this.isActivePlot){\n            this.props.setActivePlot(undefined)\n        } else {\n            this.setPlotAsActive()\n        }\n    }\n\n    savePlot = () => {\n        let path = prompt(\"Please provide the path to save the plot.\\n\\nRoot directory:\\n\" + this.props.session.settings.rootDir)\n        if (!path) return\n\n        PythonApi.savePlot(this.props.plot.id, path)\n    }\n\n    get isActivePlot(){\n        return this.props.plot.id === this.props.active.plot\n    }\n\n    showPlotFullScreen = () => {\n        PythonApi.showPlotFullScreen(this.props.plot.id)\n    }\n\n    render() {\n\n        if (this.state.isLoading || !this.props.plot) {\n            return (\n                <Card \n                    className=\"plotcard\"\n                    style={{borderRadius: 15}}>\n                    <div>We are working hard to load your plot.</div>\n                </Card>\n            )\n        }\n\n        let layout = this.props.plot.figure.layout;\n        let backColor = layout.paper_bgcolor || \"white\"\n\n        const hotKeysKeyMap = {\n            ...PLOT_CARD_HOT_KEYS,\n            TESTING: \"shift+r\",\n            ...Object.keys(this.props.plot.shortcuts).reduce((plotShortcuts, sequence) => {\n                let shortcut = this.props.plot.shortcuts[sequence]\n                if ([\"ctrl+z\", \"ctrl+alt+l\"].includes(sequence)) return plotShortcuts\n                    plotShortcuts[shortcut.name.replace(/ /g, \"_\")] = {\n                    sequence: sequence,\n                    ...shortcut\n                }\n                return plotShortcuts\n            }, {})\n        }\n\n        const hotKeysHandlers = {\n            ...this.hotKeysHandlers,\n            ...Object.keys(this.props.plot.shortcuts).reduce((plotShortcuts, sequence) => {\n                let shortcut = this.props.plot.shortcuts[sequence]\n                if ([\"ctrl+z\", \"ctrl+alt+l\"].includes(sequence)) return plotShortcuts\n                plotShortcuts[shortcut.name.replace(/ /g, \"_\")] = () => this.callPlotShortcut(sequence)\n                return plotShortcuts\n            }, {})\n        }\n\n        const activeStyles = this.isActivePlot && false ? {\n            borderStyle: \"dashed\",\n            borderWidth: \"2px\",\n            borderColor: \"black\"\n        } : {}\n\n        return <HotKeys\n                 className=\"plotCardHotKeys\"\n                 //onClick={(e) => {if (e.ctrlKey && false){this.togglePlotAsActive()}}}\n                 component={Card}\n                 elevation={this.props.elevation || 1}\n                 keyMap={hotKeysKeyMap} handlers={hotKeysHandlers} allowChanges={true}\n                 style={ {width: \"100%\", height: \"100%\", display: \"flex\", flexDirection: \"column\", borderRadius: 3, overflow:\"hidden\", background: backColor, paddingTop: 5, ...activeStyles, ...this.props.style}}>\n                <div style={{flex:1}}>\n                    <Plot\n                        ref={plotlyRef => {\n                            this.plotlyRef = plotlyRef;\n                        }}\n                        useResizeHandler\n                        style={{ width: \"100%\", height: \"100%\"}}\n                        data={this.props.plot.figure.data}\n                        layout={{autosize: true, ...layout}}\n                        frames={this.props.plot.figure.frames}\n                        onClick={this.handlePlotClick}\n                        onRelayout={this.handlePlotRelayout}\n                        onUpdate={(figure) => {}}//PythonApi.updateFigure(this.props.plot.id, figure)}\n                    config={{editable: true, responsive: true}}\n                    />\n                </div>\n                \n            <div style={{ display: \"flex\", paddingLeft: 10, paddingRight: 20, background: backColor, marginBottom: 5}} className=\"card-action\">\n                <IconContext.Provider value={{ size: 25, style: { margin: 5 }, color: \"#6eb6ff\"}}>\n                    <div style={{flex:1, textAlign: \"left\"}}>\n                        <IconButton size=\"small\" data-tip=\"Full screen (f)\" onClick={this.showPlotFullScreen}><AiOutlineFullscreen/></IconButton> \n                    </div>\n\n                    <div>\n                        <IconButton\n                            size=\"small\"\n                            data-tip=\"Settings (s)\"\n                            onClick={this.goToPlotSettingsEditing}><MdSettings /></IconButton>\n                        <IconButton\n                            size=\"small\"\n                            data-tip=\"Methods (m)\"\n                            onClick={this.goToPlotMethods}><FaHammer/></IconButton>\n                        <IconButton\n                            size=\"small\"\n                            data-tip=\"Edit layout (e)\"\n                            onClick={this.goToPlotLayoutEditing}><AiOutlineEdit/></IconButton>\n                        <IconButton size=\"small\" data-tip=\"Save plot (coming soon)\"><FaSave color=\"#ccc\"/></IconButton>\n                        <IconButton size=\"small\" data-tip=\"Export data (coming soon)\"><AiOutlineExport color=\"#ccc\"/></IconButton>\n                        <IconButton size=\"small\" data-tip=\"Remove (supr)\" onClick={this.removePlot}><AiOutlineDelete color=\"red\"/></IconButton>\n                    </div> \n                </IconContext.Provider>\n                <ReactTooltip disable={this.props.session.settings ? !this.props.session.settings.showTooltips : false} /> \n            </div>\n        </HotKeys>\n    }\n}\n\nconst mapStateToProps = state => ({\n    plots: state.plots,\n    active: state.active,\n    session: state.session\n})\n\nconst mapDispatchToProps = {\n    setSessionTabs,\n    setActivePlot,\n    removePlot,\n    setActivePage,\n    addPlots\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PlotCard);\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\n\nimport PythonApi from '../../apis/PythonApi'\nimport { setActiveTab } from '../../redux/actions'\n\nimport { MdRemoveCircle } from 'react-icons/md'\n\nclass Tab extends Component {\n\n    updateTabs = (tabs) => {\n        document.dispatchEvent(new CustomEvent(\"updateTabs\", {detail: {tabs: tabs}}))\n    }\n\n    updateTabParams = (tabID, newTabParams) => {\n\n        PythonApi.updateTab(tabID, newTabParams)\n    }\n\n    removeTab = (tabID) => {\n\n        PythonApi.removeTab(tabID)\n\n    }\n\n    updateTabName = (e) => {e.target.blur(); this.updateTabParams(e.target.id, {name: e.target.textContent})}\n\n    render() {\n\n        let {id: tabID, name: tabName} = this.props.tab\n\n        let active = tabID === this.props.active.tab\n\n        return (\n            <div\n                    key={tabID}\n                    className={active ? \"active plotTab\" : \"plotTab\"}\n                    onClick={active ? null : ()=> this.props.setActiveTab(tabID)}>\n                <div\n                    id={tabID}\n                    contentEditable={active}\n                    \n                    onBlur={this.updateTabName}\n                    onKeyUp={(e) => {if (e.keyCode === 13) this.updateTabName(e)}}\n                    >{tabName}</div>\n                {active ? <div className=\"removeTabBut\" onClick={() => this.removeTab(tabID)}><MdRemoveCircle size={20}/></div> : null}\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    active: state.active,\n    tabs: state.tabs,\n})\n\nconst mapDispatchToProps = {\n    setActiveTab\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Tab);\n","import React, { Component } from 'react'\nimport Tab from './Tab'\nimport { setActiveTab } from '../../redux/actions'\nimport PythonApi from '../../apis/PythonApi'\nimport { connect } from 'react-redux'\nimport { MdAddCircle} from 'react-icons/md'\n\nimport _ from \"lodash\"\nimport { GlobalHotKeys } from 'react-hotkeys'\nimport { TABS_HOT_KEYS } from '../../utils/hotkeys'\n\nexport class Tabs extends Component {\n\n    hotKeysHandlers = {\n        MOVE_TO_NEXT_TAB: () => this.moveThroughTabs(\"right\"),\n        MOVE_TO_PREVIOUS_TAB: () => this.moveThroughTabs(\"left\"),\n        NEW_TAB: () => this.newTab(),\n        TRY: () => console.warn(\"YES\")\n    }\n    \n    moveThroughTabs = (direction) => {\n\n        const tabs = this.props.tabs\n        const i = _.findIndex(tabs, [\"id\", this.props.active.tab])\n\n        var newI;\n        if (direction === \"left\"){\n            newI = i !== 0 ? i-1 : tabs.length -1\n        } else if (direction === \"right\"){\n            newI = i !== tabs.length - 1 ? i+1 : 0 \n        }\n\n        this.props.setActiveTab(tabs[newI].id)\n    }\n\n    updateTabs = (tabs) => {\n        document.dispatchEvent(new CustomEvent(\"updateTabs\", {detail: {tabs: tabs}}))\n    }\n\n    newTab = () => {\n\n        PythonApi.addTab()\n        \n    }\n\n    noTabsMessage = () => {\n        return <div style={{paddingLeft: 20}}>\n            <span style={{color: \"darkred\"}}>You don't seem to have any tab. </span>\n            That's wierd, but if that's what you want...\n        </div>\n    }\n\n    render() {\n\n        const tabs = this.props.tabs || []\n\n        return (\n            <div style={{display: \"flex\", flexWrap: \"wrap\", alignItems:\"center\", marginTop: 10, marginBottom: 5}}>\n                <GlobalHotKeys keyMap={TABS_HOT_KEYS.global} handlers={this.hotKeysHandlers}/>\n                {tabs.length === 0 ? \n                    this.noTabsMessage()\n                    :\n                    tabs.map( tab => <Tab tab={tab}/>)\n                }\n                <MdAddCircle onClick={this.newTab} data-tip=\"New tab\" data-place=\"right\" color=\"green\" size={20} className=\"newTabIcon\"/>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    tabs: state.session.tabs,\n    active: state.active\n})\n\nconst mapDispatchToProps = {\n    setActiveTab\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Tabs);\n","import React from \"react\";\n\nimport _ from \"lodash\"\n\n//--Components\nimport PlotCard from \"./PlotCard\";\n\n//--Redux\nimport { connect } from 'react-redux'\nimport { setTabPlots, setSessionTabs, setActivePlot} from \"../../redux/actions\"\nimport PythonApi from \"../../apis/PythonApi\";\n\nimport { Responsive, WidthProvider } from 'react-grid-layout';\nimport { Paper, Button } from '@material-ui/core';\n\nimport 'react-grid-layout/css/styles.css'\nimport'react-resizable/css/styles.css'\n\nimport { withHotKeys, GlobalHotKeys } from \"react-hotkeys\";\nimport { PLOTS_HOT_KEYS } from \"../../utils/hotkeys\";\nimport Tabs from \"../tabs/Tabs\";\n\nconst ResponsiveReactGridLayout = WidthProvider(Responsive);\n\nconst selectedPlotStyles = { backgroundColor: \"#757eff\",  paddingTop: 5, marginTop: -5}\n\nclass PlotDashboard extends React.Component {\n\n  constructor(props){\n    super(props)\n\n    this._plotsInLayout = false\n\n    this.state = {\n      selected: []\n    }\n\n  }\n\n  static defaultProps = {\n    className: \"layout\",\n    rowHeight: 30,\n    onLayoutChange: function() {},\n    cols: { lg: 12, md: 12, sm: 6, xs: 4, xxs: 2 },\n  };\n\n  state = {\n    currentBreakpoint: \"lg\",\n    compactType: \"vertical\",\n    mounted: false,\n    layouts: { lg: [] }\n  };\n\n  componentDidMount() {\n    this.setState({ mounted: true });\n    this.props.setActivePlot(undefined)\n  }\n\n  emptyDashboard = () => {\n    return null\n  }\n\n  noTabsMessage = () => {\n    return null\n  }\n\n  noPlotsMessage = () => {\n    //className=\"attentionLeft\"\n    return <div style={{display: \"flex\", flexDirection: \"column\", justifyContent: \"center\", alignItems: \"center\", height: \"100%\"}}>\n      <div style={{fontSize: \"5em\", fontWeight: \"bold\"}}>This is the plots dashboard.</div>\n      <div style={{fontSize: \"1.2em\"}}>We would like to display your plots here, but currently you don't seem to have any</div>\n      <div style={{backgroundColor: \"white\",  fontSize: \"2em\", margin: 20, padding: 20, paddingLeft: 50, paddingRight: 50, borderRadius: 70}}> You can try to create one by clicking on your structures</div>\n    </div>\n  }\n\n  static newPlotLayout = (plot, layouts) => {\n    return {\n      x: plot.grid_dims[0]*(layouts.lg.length),\n      y: 2,\n      w: plot.grid_dims[0],\n      h: plot.grid_dims[1],\n      i: plot.id,\n    };\n  }\n\n  generateDOM(layouts, plots, selected, toggleSelect) {\n    return _.map(layouts, function(l, i) {\n      return <div key={plots[i].id} onClick={(e) => e.ctrlKey ? toggleSelect(plots[i].id) : null}> \n        <PlotCard \n          plot={plots[i]} \n          style={selected.includes(plots[i].id) ? selectedPlotStyles : {}}/>\n      </div>\n    });\n  }\n\n  toggleSelected = (plotID) => {\n\n    let selected;\n\n    if (this.state.selected.includes(plotID)){\n      selected = this.state.selected.filter(id => id !== plotID)\n    } else {\n      selected = [...this.state.selected, plotID]\n    }\n\n    this.setState({selected})\n  }\n\n  onBreakpointChange = (breakpoint) => {\n    document.dispatchEvent(new CustomEvent(\"plotResize\", {detail: {id: \"all\"}}))\n  };\n\n  onResizeStop = (layouts, finalL, initL) => {\n    document.dispatchEvent(new CustomEvent(\"plotResize\", {detail: {id: initL.i, higher: finalL.h > initL.h}}))\n  }\n\n  shouldComponentUpdate = (newProps) => {\n\n    if( !this._plotsInLayout ) return true\n\n    const isDifferentTab = newProps.active.tab !== this.props.active.tab\n    let hasDifferentPlots;\n    if (!isDifferentTab){\n      let tab = _.find(this.props.tabs, [\"id\", this.props.active.tab])\n      let newTab = _.find(newProps.tabs, [\"id\", newProps.active.tab])\n\n      if (!tab || !newTab) return true\n      else if (!tab.layouts || !newTab.layouts) return true\n      else if (_.isEqual(tab.layouts, newTab.layouts)) return true\n      else if (! _.isEqual(this._plotsInLayout, newTab.plots)) return true\n\n      hasDifferentPlots = ! _.isEqual(tab.plots, newTab.plots)\n    }\n    \n    return isDifferentTab || hasDifferentPlots\n  }\n\n  onLayoutChange = (layout, layouts) => {\n    this.props.onLayoutChange(layout, layouts);\n\n    PythonApi.setTabLayouts(this.props.active.tab, layouts)\n  };\n\n  onDrop = (elemParams) => {\n    alert(`Element parameters: ${JSON.stringify(elemParams)}`);\n  };\n\n  getLayout = () => {\n    if (!this.props.active.tab ) return this.noTabsMessage()\n\n    let tab = _.find(this.props.tabs, [\"id\", this.props.active.tab])\n\n    if (!tab) return this.noTabsMessage()\n    if (tab.plots.length === 0) return this.noPlotsMessage()\n    \n    let plots = tab.plots.map(plotID => this.props.plots[plotID])\n\n    plots = plots.filter( plot => plot)\n\n    // Wait for all plots to draw a first layout\n    // THIS IS KEY in order to avoid the layout going crazy\n    if (plots.length !== tab.plots.length) return null\n\n    let layouts = tab.layouts\n\n    if (layouts.lg.length !== plots.length){\n      layouts.lg = plots.map(plot => {\n        let layout = _.find(layouts.lg, [\"i\", plot.id])\n        return layout || PlotDashboard.newPlotLayout(plot, layouts)\n      })\n    }\n\n    this._plotsInLayout = tab.plots\n\n    return (\n      <ResponsiveReactGridLayout\n        {...this.props}\n        layouts={layouts}\n        onBreakpointChange={this.onBreakpointChange}\n        onLayoutChange={this.onLayoutChange}\n        onDrop={this.onDrop}\n        onResizeStop={this.onResizeStop}\n        draggableCancel=\".infolayer, .draglayer, .shapelayer, #scene\" //Avoids plot being dragged when zooming and other drag actions\n        // WidthProvider option\n        measureBeforeMount={false}\n        // I like to have it animate on mount. If you don't, delete `useCSSTransforms` (it's default `true`)\n        // and set `measureBeforeMount={true}`.\n        useCSSTransforms={this.state.mounted}\n        compactType={this.state.compactType}\n        preventCollision={!this.state.compactType}\n        rowHeight={10}\n      >\n        {this.generateDOM(layouts.lg, plots, this.state.selected, this.toggleSelected)}\n      </ResponsiveReactGridLayout>\n    )\n\n  }\n\n  mergePlots = (to) => {\n    PythonApi.mergePlots(this.state.selected, to)\n    this.setState({selected: []})\n  }\n\n  removePlots = () => {\n    this.state.selected.forEach(plotID => PythonApi.removePlot(plotID))\n    this.setState({ selected: [] })\n  }\n\n  movePlots = () => {\n    // For now, we will just move the plots to the next tab\n    // (testing if it works)\n    let iTab = _.findIndex(this.props.tabs, [\"id\", this.props.active.tab ]) + 1\n    if (this.props.tabs.length === iTab) iTab = 0\n\n    console.warn(iTab)\n\n    this.state.selected.forEach(plotID => PythonApi.movePlot(plotID, this.props.tabs[iTab].id ))\n    this.setState({ selected: [] })\n  }\n\n  renderSelectedManager = () => {\n\n    const nSelected = this.state.selected.length\n\n    if (nSelected === 0) return null\n\n    const availableMerges = [\n      {\"to\": \"multiple\"}, {\"to\": \"subplots\"}, {\"to\": \"animation\"}\n    ]\n\n    return <Paper style={{padding: 10, marginBottom: 10}} elevation={3}>\n      {`You have ${nSelected} plots selected. What do you want to do?`}\n      <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n        {nSelected > 1 ? availableMerges.map(\n          merge => <Button onClick={() => this.mergePlots(merge.to)}>{`Merge as ${merge.to}`}</Button>) \n        : null}\n        <Button onClick={this.removePlots}>Remove</Button>\n        <Button onClick={this.movePlots}>Move to other tab</Button>\n      </div>\n    </Paper>\n  }\n\n  render() {\n\n    // We will reuse some of the tabs hot keys handlers\n    const tabs = <Tabs/>\n    const handlers = {...this.hotKeysHandler, ..._.pick(tabs.hotKeysHandler, [\"MOVE_TO_NEXT_TAB\", \"MOVE_TO_PREVIOUS_TAB\"]) }\n\n    // eslint-disable-next-line no-unused-vars\n    return (\n      <div style={{padding: 10, ...this.props.style}} className=\"scrollView\">\n        <GlobalHotKeys keyMap={PLOTS_HOT_KEYS.global} handlers={handlers}/>\n        {this.renderSelectedManager()}\n        {this.getLayout()}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  plots: state.plots,\n  structures: state.session.structures,\n  tabs: state.session.tabs,\n  active: state.active,\n  session: state.session\n})\n\nconst mapDispatchToProps = {\n  setSessionTabs,\n  setTabPlots,\n  setActivePlot\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withHotKeys(PlotDashboard));","import React, { Component } from 'react'\n\nexport default class StructureTag extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = {}\n    }\n\n    render() {\n\n        return (\n            <div \n                className={\"structTag \" + (this.props.struct.selected ? \"active\" : \"\")} \n                onClick={this.props.toggleStruct}\n                data-tip={this.props.struct.path}\n                data-effect=\"solid\">\n                <div>{this.props.struct.name.replace(\".fdf\", \"\")}</div>\n                <div style={{fontSize: \"0.7em\", color: \"gray\"}}>{\".../\" + this.props.struct.path.split(\"/\").slice(-2,-1)[0]}</div>\n            </div>\n        )\n    }\n}\n\n\n\n\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\n\nimport SpeedDial from '@material-ui/lab/SpeedDial';\nimport SpeedDialIcon from '@material-ui/lab/SpeedDialIcon';\nimport SpeedDialAction from '@material-ui/lab/SpeedDialAction';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button } from '@material-ui/core';\n\nimport { FaSave} from 'react-icons/fa'\nimport { AiOutlineUpload } from 'react-icons/ai'\nimport { setActivePage } from '../../redux/actions'\n\nimport PythonApi from '../../apis/PythonApi'\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        transform: 'translateZ(0px)',\n        flexGrow: 1,\n    },\n    exampleWrapper: {\n        position: 'relative',\n        marginTop: theme.spacing(3),\n    },\n    radioGroup: {\n        margin: theme.spacing(1, 0),\n    },\n    speedDial: {\n        position: 'absolute',\n        '&.MuiSpeedDial-directionUp, &.MuiSpeedDial-directionLeft': {\n            bottom: theme.spacing(2),\n            right: theme.spacing(2),\n        },\n        '&.MuiSpeedDial-directionDown, &.MuiSpeedDial-directionRight': {\n            top: theme.spacing(2),\n            left: theme.spacing(2),\n        },\n    },\n}));\n\nfunction SpeedDials(props) {\n    const classes = useStyles();\n    const direction = React.useState('left')[0];\n    const [open, setOpen] = React.useState(false);\n    const hidden = React.useState(false)[0];\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const handleOpen = () => {\n        setOpen(true);\n    };\n\n    return (\n        <SpeedDial\n            ariaLabel=\"SpeedDial example\"\n            className={classes.speedDial}\n            hidden={hidden}\n            icon={<SpeedDialIcon />}\n            onClose={handleClose}\n            onOpen={handleOpen}\n            open={open}\n            direction={direction}\n        >\n            {props.actions.map((action) => (\n                <SpeedDialAction\n                    key={action.name}\n                    icon={action.icon}\n                    tooltipTitle={action.tip || action.name}\n                    tooltipPlacement={\"top\"}\n                    onClick={action.onClick}\n                    href={action.href}\n                />\n            ))}\n        </SpeedDial>\n    );\n}\n\nclass Controls extends Component {\n\n    hotKeysHandler = {\n        SAVE_SESSION: () => this.saveCurrentSession(),\n        LOAD_SESSION: () => this.loadSession()\n    }\n\n    syncWithSession = (session) => {\n        document.dispatchEvent(new CustomEvent(\"syncWithSession\", {detail: {session}}))\n    }\n\n    showPage = (pageName) => {\n        this.props.setActivePage(pageName)\n    }\n\n    saveCurrentSession = () => {\n        let path = prompt(\"Please provide the path to save the session.\\n\\nRoot directory:\\n\" + this.props.session.settings.rootDir)\n        if (!path) return \n\n        PythonApi.saveSession(path)\n    }\n\n    loadSession = () => {\n\n        let path = prompt(\"Please provide the path of the saved session.\\n\\nRoot directory:\\n\" + this.props.session.settings.rootDir)\n        if (!path) return\n\n        PythonApi.loadSession(path)\n    }\n\n    render() {\n\n        const actions = [{\n            name: \"Save session\",\n            icon: <FaSave size={20} />,\n            onClick: this.saveCurrentSession\n        }, {\n            name: \"Load session\",\n                icon: <AiOutlineUpload size={20} />,\n            onClick: this.loadSession\n        }]\n\n        return <SpeedDials actions={actions} />\n    }\n}\n\nexport class Control extends Component {\n\n    render(){\n        \n        return <Button\n                    data-tip={this.props.tooltip}\n                    style={this.props.style}\n                    floating\n                    icon={this.props.icon}\n                    onClick={this.props.onClick}\n                    className={this.props.className} />\n    }\n}\n\nconst mapStateToProps = state => ({\n    session: state.session,\n    active: state.active\n})\n\nconst mapDispatchToProps = {\n    setActivePage\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Controls);\n","import React, { Component } from 'react'\nimport { Control } from './Controls'\nimport { connect } from 'react-redux'\nimport { setActivePage } from '../../redux/actions'\nimport { IoMdSettings } from 'react-icons/io'\nimport { MdDashboard } from 'react-icons/md'\n\nexport const ROUTES = {\n    settings: {\n        name: \"Settings\",\n        icon: <IoMdSettings size={20}/>,\n        color: \"grey\",\n        hotKey: \"Shift + s\",\n    },\n    plots: {\n        name: \"Dashboard\",\n        icon: <MdDashboard/>,\n        color: \"grey\",\n        hotKey: \"Shift + d\"\n    }\n}\n\nclass NavigateButton extends Component {\n\n    showPage = () => {\n        this.props.setActivePage(this.props.to)\n    }\n\n    render() {\n\n        const route = ROUTES[this.props.to]\n\n        return <Control \n            icon={route.icon} \n            className={route.color}\n            tooltip={\"Go to \" + this.props.to + \" (\" + route.hotKey + \")\"}\n            onClick={this.showPage}\n            {...this.props}/>\n    }\n}\n\nconst mapDispatchToProps = {\n    setActivePage\n}\n\nexport default connect(null, mapDispatchToProps)(NavigateButton);\n","import React, { Component } from 'react'\n\nexport default class PlotableTag extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = {}\n    }\n\n    render() {\n\n        return (\n            <div \n                className={\"plotableTag \" + (this.props.plotable.selected ? \"active\" : \"\")} \n                onClick={this.props.togglePlotable}\n                data-tip={this.props.plotable.path}\n                data-effect=\"solid\">\n                <div>{this.props.plotable.name}</div>\n                <div style={{fontSize: \"0.7em\", color: \"gray\"}}>{\".../\" + this.props.plotable.path.split(\"/\").slice(-2,-1)[0]}</div>\n            </div>\n        )\n    }\n}\n\n","import React, { Component } from 'react'\nimport StructureTag from './StructureTag'\nimport _ from \"lodash\"\nimport { setActiveStructs, setActivePlotables } from '../../redux/actions'\nimport { MdFolder, MdFolderOpen} from 'react-icons/md'\n\nimport { connect } from 'react-redux'\nimport NavigateButton from '../controls/NavigateButton'\nimport PlotableTag from './PlotableTag'\nimport TextInput from '../settings/inputFields/TextInput'\n\nfunction wildTest(wildcard, str) {\n    const re = new RegExp(`^${wildcard.replace(/\\*/g,'.*').replace(/\\?/g,'.')}$`,'i');\n    return re.test(str); // remove last 'i' above to have case sensitive\n}\n\nexport class StructurePicker extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = {\n            searchString: \"\",\n            alphabeticSorting: false,\n            selectedSorting: false,\n            searchByFolder: false,\n            displayStructures: true,\n            displayPlotables: false,\n        }\n\n    }\n\n    togglePlotInitializer = (selectedStructs, selectedPlotables) => {\n\n        let forceShow, forceHide;\n\n        if ([...selectedStructs, ...selectedPlotables].length !== 0){\n            forceShow = true\n        } else {\n            forceHide = true\n        }\n\n        document.dispatchEvent(new CustomEvent(\"togglePlotInitializer\", {detail: {forceShow, forceHide}}))\n\n    }\n\n    selectStructs = (structs) => {\n        this.props.setActiveStructs(structs)\n        this.togglePlotInitializer(structs, this.selectedPlotables)\n    }\n\n    get selectedStructs(){\n        return this.props.activeStructs || []\n    }\n\n    selectPlotables = (plotables) => {\n        this.props.setActivePlotables(plotables)\n        this.togglePlotInitializer(this.selectedStructs, plotables)\n    }\n\n    get selectedPlotables(){\n        return this.props.activePlotables || []\n    }\n\n    toggleStruct = ({id: structID}) => {\n        \n        //this.setState({selectedStructures: _.xor(this.selectedStructs, [structID])})\n\n        this.selectStructs(_.xor(this.selectedStructs, [structID]))\n      \n    }\n\n    togglePlotable = ({id: plotableID}) => {\n        \n        //this.setState({selectedPlotableures: _.xor(this.selectedPlotables, [PlotableID])})\n\n        this.selectPlotables(_.xor(this.selectedPlotables, [plotableID]))\n      \n    }\n\n    toggleStructDisplay = () => {\n        this.setState({displayStructures: !this.state.displayStructures})\n    }\n\n    togglePlotablesDisplay = () => {\n        this.setState({displayPlotables: !this.state.displayPlotables})\n    }\n\n    toggleAlphabeticSorting = () => {\n\n        const toggles = { [false]: \"asc\", asc: \"desc\", desc: false}\n        this.setState({alphabeticSorting: toggles[this.state.alphabeticSorting]})\n    }\n\n    toggleSearchByFolder = () => {\n\n        this.setState({searchByFolder: !this.state.searchByFolder})\n    }\n\n    toggleSelectedSorting = () => {\n        this.setState({selectedSorting: !this.state.selectedSorting})\n    }\n\n    toggleAll = () => {\n\n        const onDisplay = Object.keys(this.filterStructs())\n\n        const onDisplaySelected = _.intersection([...this.selectedStructs, ...this.selectedPlotables], onDisplay).length === 0\n\n        const displayedStructs = _.intersection(Object.keys(this.props.structures), onDisplay)\n        const displayedPlotables = _.intersection(Object.keys(this.props.plotables), onDisplay)\n\n        this.selectStructs(onDisplaySelected ? \n            [...displayedStructs, ...this.selectedStructs] \n                : \n            this.selectedStructs.filter( structID => !displayedStructs.includes(structID) )\n        )\n\n        this.selectPlotables(onDisplaySelected ? \n            [...displayedPlotables, ...this.selectedPlotables] \n                : \n            this.selectedPlotables.filter( plotableID => !displayedPlotables.includes(plotableID) )\n        )\n\n    }\n\n    filterStructs = (searchString) => {\n\n        searchString = searchString || this.state.searchString\n\n        console.warn(searchString)\n        searchString = searchString.includes(\"*\") || searchString.includes(\"?\") ? searchString : \"*\"+searchString+\"*\"\n\n        let structs = {}\n\n        let toggles = [this.state.displayStructures, this.state.displayPlotables]\n        \n        const structures = this.props.structures || []\n        const plotables = this.props.plotables || []\n        let objs = [structures, plotables]\n\n        //Filter both structures and plotables\n        objs.forEach( (object, index) => {\n\n            if (!toggles[index]) return\n\n            const isPlotable = index === 1\n\n            let newStructs = Object.keys(object).reduce( (structs, structID) => {\n\n                const struct = object[structID]\n    \n                const toTest = this.state.searchByFolder ? struct.path.split(\"/\").slice(-2,-1)[0] : struct.name.replace(\".fdf\", \"\")\n    \n                if (wildTest(searchString, toTest)){\n    \n                    structs[structID] = { \n                        ...struct,\n                        selected: [...this.selectedStructs, ...this.selectedPlotables].includes(structID),\n                        isPlotable,\n                        id: structID,\n                    }\n                }\n    \n                return structs\n            }, {})\n\n            structs = {...structs, ...newStructs}\n\n        })\n\n        return structs\n\n    }\n\n    newSearchString = (searchString) => {\n\n        this.setState({searchString: searchString})\n    }\n\n    noStructuresMessage = () => {\n\n        return <div>\n            <div style={{color: \"darkred\"}}>No structures in the search scope right now.</div>\n            <div>Try to change file system settings or initialize the GUI from a different directory</div>\n            <NavigateButton to=\"settings\" style={{marginTop: 10}}/>\n        </div>\n    }\n\n    noMatchingStructuresMessage = () => {\n        return <div>\n            <div style={{color: \"darkred\"}}>No structure that matches your search.</div>\n            <div>Try to change file system settings or initialize the GUI from a different directory</div>\n            <NavigateButton to=\"settings\" style={{marginTop: 10}}/>\n        </div>\n    }\n\n    render() {\n\n        let structsAndPlotables = this.filterStructs()\n\n        if (this.state.alphabeticSorting){\n            structsAndPlotables = _.orderBy(structsAndPlotables, \"name\", this.state.alphabeticSorting)\n        }\n        if (this.state.selectedSorting){\n            structsAndPlotables = _.orderBy(structsAndPlotables, \"selected\", \"desc\")\n        }\n        \n        return (\n            <div style={{height: \"100vh\", overflow: \"hidden\", display: \"flex\", flexDirection: \"column\", backgroundColor: \"white\", ...this.props.style}}>\n                <div style={{ display: \"flex\", flexDirection: \"row\", justifyContent: \"center\", alignItems: \"center\", marginTop: 20, marginBottom: 20 }}>\n                    <TextInput\n                        label=\"Search string\"\n                        autocomplete=\"off\"\n                        placeholder=\"Enter your search string...\"\n                        style={{marginRight: 10}}\n                        value={this.state.searchString} \n                        onChange={this.newSearchString}/>\n                    <div\n                        data-tip=\"Search by folder\"\n                        className={\"structPickerToggle \" + (this.state.searchByFolder ? \"active\" : \"\")}\n                        onClick={this.toggleSearchByFolder} style={{cursor: \"pointer\"}}>{this.state.searchByFolder ? <MdFolder/> : <MdFolderOpen/>}</div>\n                </div>\n                <div style={{display: \"flex\", justifyContent: \"space-between\", marginBottom: 5}}>\n                    <span\n                        data-tip=\"Show structures\"\n                        className={\"structPickerToggle \" + (this.state.displayStructures ? \"active\" : \"\")} \n                        onClick={this.toggleStructDisplay} style={{cursor: \"pointer\"}}>Struct</span>\n                    <span\n                        data-tip=\"Show plotables\"\n                        className={\"structPickerToggle \" + (this.state.displayPlotables ? \"active\" : \"\")}\n                        onClick={this.togglePlotablesDisplay} style={{cursor: \"pointer\"}}>Plotables</span>\n                </div>\n                <div style={{display: \"flex\", justifyContent: \"space-between\", marginBottom: 5}}>\n                    <span \n                        className={\"structPickerToggle \" + (this.state.alphabeticSorting ? \"active\" : \"\")} \n                        onClick={this.toggleAlphabeticSorting} style={{cursor: \"pointer\"}}>A-Z</span>\n                    <span\n                        data-tip=\"Show selected first\"\n                        className={\"structPickerToggle \" + (this.state.selectedSorting ? \"active\" : \"\")}\n                        onClick={this.toggleSelectedSorting} style={{cursor: \"pointer\"}}>sel</span>\n                    <span \n                        className=\"structPickerToggle\" \n                        onClick={this.toggleAll} style={{cursor: \"pointer\"}}>All</span>\n                </div>\n\n                {Object.keys({...this.props.structures, ...this.props.plotables}).length === 0 ? \n                    this.noStructuresMessage() : Object.values(structsAndPlotables).length === 0 ? \n                        this.noMatchingStructuresMessage() : null\n                }\n\n                <div className=\"scrollView\" >\n                    {Object.values(structsAndPlotables).map(obj => {\n                        if (obj.isPlotable) {\n                            return <PlotableTag id={obj.id} \n                                plotable={obj} \n                                togglePlotable={ () => this.togglePlotable(obj)}\n                            />\n                        } else {\n                            return <StructureTag id={obj.id} \n                                struct={obj} \n                                toggleStruct={ () => this.toggleStruct(obj)}\n                            />\n                        }\n                        \n                    })}\n                </div>  \n            </div>\n            \n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    activeStructs: state.active.structs,\n    activePlotables: state.active.plotables,\n    plotables: state.session.plotables,\n    structures: state.session.structures\n})\n\nconst mapDispatchToProps = {\n    setActiveStructs,\n    setActivePlotables\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StructurePicker);\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\n\nimport Select, { components } from 'react-select'\n\nimport _ from \"lodash\"\n\nconst { ValueContainer, Placeholder } = components;\n\nconst CustomValueContainer = ({ children, ...props }) => {\n    return (\n        <ValueContainer {...props}>\n            <Placeholder {...props} isFocused={props.isFocused}>\n                {props.selectProps.placeholder}\n            </Placeholder>\n            {React.Children.map(children, child =>\n                child && child.type !== Placeholder ? child : null\n            )}\n        </ValueContainer>\n    );\n};\n\nclass PlotTypePicker extends Component {\n\n    render() {\n\n        const plotOptions = this.props.options || this.props.session.plotOptions\n\n        let value;\n\n        if (Array.isArray(this.props.value)){\n            value = this.props.value.map(value => _.find(plotOptions, [\"value\", value]))\n        } else {\n            value = _.find(plotOptions, [\"value\", this.props.value])\n        }\n\n        return (\n            <Select\n                options={plotOptions}\n                placeholder=\"Choose the plot type...\"\n                isClearable isSearchable isMulti\n                onChange={(obj) => this.props.onChange(obj ? obj.value || obj.map(selected => selected.value) : undefined)}\n                value={value}\n                components={{\n                    ValueContainer: CustomValueContainer\n                }}\n                styles={{\n                    container: (provided, state) => ({\n                        ...provided,\n                        marginTop: 20,\n                        marginBottom: 20\n                    }),\n                    valueContainer: (provided, state) => ({\n                        ...provided,\n                        overflow: \"visible\"\n                    }),\n                    placeholder: (provided, state) => ({\n                        ...provided,\n                        position: \"absolute\",\n                        top: state.hasValue || state.selectProps.inputValue ? -15 : \"50%\",\n                        transition: \"top 0.1s, font-size 0.1s\",\n                        fontSize: (state.hasValue || state.selectProps.inputValue) && 13,\n                        color: state.hasValue || state.selectProps.inputValue ? \"blue\" : \"#ccc\",\n                        marginLeft: state.hasValue || state.selectProps.inputValue ? -5 : 0,\n                    })\n                }}\n            />\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    tabs: state.tabs,\n    active: state.active,\n    session: state.session\n})\n\nexport default connect(mapStateToProps, null)(PlotTypePicker);","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\n\nimport Select from 'react-select'\n\nimport _ from \"lodash\"\n\nclass TabPicker extends Component {\n    render() {\n\n        const options = this.props.tabs.map( (tab) => ({label: tab.name, value: tab.id }))\n        const value = _.find(options, [\"value\", this.props.value])\n        return (\n            <Select\n                placeholder=\"Choose a tab...\"\n                options={options}\n                defaultValue={this.props.active.tab && _.find(this.props.tabs, [\"id\", this.props.active.tab])? {label: _.find(this.props.tabs, [\"id\", this.props.active.tab]).name, value: this.props.active.tab } : null}\n                isSearchable\n                onChange={(obj) => this.props.onChange(obj ? obj.value : undefined)}\n                value={value}\n            />\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    tabs: state.session.tabs,\n    active: state.active\n})\n\nexport default connect(mapStateToProps, null)(TabPicker);\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { deactivateStruct, setActiveStructs } from '../../redux/actions'\nimport { MdRemove } from 'react-icons/md'\n\nclass StructureRow extends Component {\n\n    render() {\n\n        const struct = this.props.structure\n        const groupActive = this.props.groupActive\n\n        return (\n            <div style={{display: \"flex\", flexDirection: \"row\", justifyContent: \"flex-start\", alignItems: \"center\", marginTop: 10, marginBottom: 10}}>\n                <div \n                    style={{color: \"darkred\", cursor: \"pointer\", display: \"flex\", justifyContent: \"center\", alignItems:\"center\"}}\n                    onClick={() => this.props.deactivateStruct(struct.id)}>\n                    <MdRemove/>\n                </div>\n                <div \n                    style={{cursor: groupActive ? \"default\" : \"pointer\", marginRight: 20, marginLeft: 20, padding: 10, backgroundColor: groupActive ? \"whitesmoke\" : \"#ccc\", borderRadius: 3}}\n                    onClick={groupActive ? undefined : this.props.moveStructToActiveGroup}>\n                    {struct.name.replace(\".fdf\", \"\")}\n                </div>\n                <div data-tip={struct.path}>{\".../\" + struct.path.split(\"/\").slice(-2,-1)[0]}</div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    active: state.active\n})\n\nconst mapDispatchToProps = {\n    deactivateStruct,\n    setActiveStructs\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StructureRow);\n","import React, { Component } from 'react'\nimport Select from 'react-select'\n\nimport _ from \"lodash\"\n\nconst OPTIONS = [\n    {label: \"Plot individually\", value:\"separatePlot\"},\n    {label: \"Merge in single plot\", value:\"jointPlot\"},\n    {label: \"Build animation\", value:\"jointAnimation\"},\n    {label: \"Animation for each\", value:\"separateAnimation\"},\n]\n\nexport default class MergeMethodPicker extends Component {\n\n    render() {\n        return (\n            <Select\n                options={OPTIONS}\n                defaultValue={OPTIONS[0]}\n                placeholder=\"Choose the plotting method...\"\n                isSearchable\n                onChange={(obj) => this.props.onChange(obj ? obj.value || obj.map(selected => selected.value) : undefined)}\n                value={_.find(OPTIONS, [\"value\", this.props.value])}\n            />\n                \n        )\n    }\n}","import React, { Component } from 'react'\nimport PlotTypePicker from './PlotTypePicker'\nimport TabPicker from './TabPicker'\nimport StructureRow from './StructureRow'\nimport MergeMethodPicker from './MergeMethodPicker'\nimport { deactivateStruct } from '../../redux/actions'\nimport { connect } from 'react-redux'\nimport { Grid } from '@material-ui/core'\n\nclass StructuresGroup extends Component {\n\n    render() {\n\n        const {tabID, plotClasses, mergeMethod} = this.props.initializingOptions\n        const activenessStyles = this.props.active ? {\n            backgroundColor: \"#ccc\"\n        } : {\n            backgroundColor: \"whitesmoke\"\n        }\n\n        return (\n            <div>\n                <div style={{display: \"flex\", flexDirection: \"row\", margin: -4}}>\n                    <div className=\"structGroupAction\" style={activenessStyles} onClick={this.props.splitGroup}>Split</div>\n                    <div className=\"structGroupAction\" style={activenessStyles} onClick={this.props.removeGroup}>Remove</div>\n                    {this.props.active ? \n                        null\n                            : \n                        <div className=\"structGroupAction\" style={activenessStyles} onClick={this.props.setGroupAsActive}>Mark as receptive</div>\n                    }\n                    <div style={{flex:1}}/>\n                </div>\n                <Grid container spacing={1} style={{transition: \"all 300ms\", display:\"flex\", flexWrap: \"wrap\", padding: 20, marginTop: 0, marginBottom: 20, borderRadius: 5, borderTopLeftRadius: 0, justifyContent: \"center\", alignItems: \"center\", ...activenessStyles}}>\n                    <Grid item sm={12} md={4} lg={3}>\n                        {this.props.structs.map(struct => <StructureRow structure={struct} groupActive={this.props.active} moveStructToActiveGroup={() => this.props.moveStructToActiveGroup(struct.id)}/>)}\n                    </Grid>\n                    <Grid item sm={12} md={4} lg={3}>\n                        <PlotTypePicker value={plotClasses} onChange={(val) => this.props.onInitParamChange(\"plotClasses\", val) }/>\n                    </Grid>\n                    <Grid item sm={12} md={4} lg={3}>\n                        <TabPicker value={tabID} onChange={(val) => this.props.onInitParamChange(\"tabID\", val) }/>\n                    </Grid>\n                    <Grid item sm={12} md={4} lg={3}>\n                        <MergeMethodPicker value={mergeMethod} onChange={(val) => this.props.onInitParamChange(\"mergeMethod\", val) }/>\n                    </Grid>\n                </Grid>\n            </div>      \n        )\n    }\n}\n\nconst mapDispatchToProps = {\n    deactivateStruct\n}\n\nexport default connect(null, mapDispatchToProps)(StructuresGroup);","import React, { Component } from 'react'\nimport { MdRemove } from 'react-icons/md'\nimport { deactivatePlotable, setPlotablePlots } from '../../redux/actions'\n\nimport { connect } from 'react-redux'\nimport PlotTypePicker from './PlotTypePicker'\n\nclass PlotableRow extends Component {\n    render() {\n\n        const plotable = this.props.plotable\n\n        return (\n            <div style={{ display: \"flex\", flexDirection: \"row\", alignItems: \"center\", marginTop: 10 }}>\n                <div style={{ display: \"flex\", flexDirection: \"row\", alignItems: \"center\"}}>\n                    <div style={{ color: \"darkred\", cursor: \"pointer\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\" }} onClick={() => this.props.deactivatePlotable(plotable.id)}>\n                        <MdRemove />\n                    </div>\n                    <div data-tip={plotable.path} style={{marginLeft: 20}}>{\"(.../\" + plotable.path.split(\"/\").slice(-2, -1)[0] + \")\"}</div>\n                    <div style={{  marginLeft: 20, padding: 10, backgroundColor: \"whitesmoke\", borderRadius: 3 }}>\n                        {plotable.name}\n                    </div>\n                </div>\n                <div style={{flex: 1, paddingLeft: 20, paddingRight: 20}}>\n                    <PlotTypePicker \n                        options={plotable.plots.map(plotOption => ({value: plotOption, label: plotOption}))} \n                        value={plotable.chosenPlots}\n                        onChange={(plotTypes) => this.props.setPlotablePlots(plotable.id, plotTypes)}\n                    />\n                </div>\n                \n            </div> \n        )\n    }\n}\n\nconst mapDispatchToProps = {\n    deactivatePlotable,\n    setPlotablePlots\n}\n\nexport default connect(null, mapDispatchToProps)(PlotableRow);\n\n","import React, { Component } from 'react'\n\nimport _ from \"lodash\"\n\nimport Card from '@material-ui/core/Card'\n\nimport PythonApi from '../../apis/PythonApi'\n\nimport { connect } from 'react-redux'\nimport { selectActiveStructs, selectActivePlotables } from '../../redux/reducers'\nimport { setActiveTab, addPlots, setActiveStructs, informLoadingPlot, informLoadedPlot, deactivateStruct, deactivatePlotable, setActivePlotables } from '../../redux/actions'\nimport StructuresGroup from './StructuresGroup';\nimport { MdClose, MdDone } from 'react-icons/md'\nimport { Button } from '@material-ui/core'\nimport PlotableRow from './PlotableRow'\n\nclass PlotInitializer extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = {\n            structureGroups: [],\n            plotables: [],\n        }\n        \n    }\n\n    get selectedStructs(){\n        return this.props.activeStructs || []\n    }\n\n    get selectedPlotables(){\n        return this.props.activePlotables || []\n    }\n\n    get defaultTabID(){\n        return this.props.active.tab ? this.props.active.tab : this.props.tabs.length && this.props.tabs.length > 0 ? this.props.tabs[0].id : undefined\n    }\n\n    componentDidMount(){\n\n        this.onStructsUpdate([])\n\n    }\n\n    componentWillUnmount(){\n\n    }\n\n    componentDidUpdate(prevProps) {\n\n        if ( !_.isEqual(prevProps.active.structs, this.props.active.structs) ){\n\n            this.onStructsUpdate(prevProps.active.structs)\n            \n        }\n    }\n\n    onStructsUpdate = (prevActiveStructs) => {\n\n        let structureGroups = [];\n\n        const newStructs = this.selectedStructs.filter(({id:structID}) => !prevActiveStructs.includes(structID))\n\n        if (this.state.structureGroups.length === 0){\n            //In this case build a new group and mark it as active\n            structureGroups = this.markActiveGroup(0, [this.newGroup(this.selectedStructs)])\n        } else {\n            const activeGroupIndex = _.findIndex(this.state.structureGroups, \"active\" )\n            const activeGroup = this.state.structureGroups[activeGroupIndex]\n\n            //Add the structure to the receptive group\n            structureGroups = [\n                ...this.state.structureGroups.slice(0,activeGroupIndex),\n                {...activeGroup, structs: [...activeGroup.structs, ...newStructs]},\n                ...this.state.structureGroups.slice(activeGroupIndex + 1)\n            ]\n        }\n\n        structureGroups = this.cleanUnselectedFromGroups(structureGroups)\n\n        //Ensure that there is an active group\n        if ( !_.find(structureGroups, \"active\") ){\n            structureGroups = this.markActiveGroup(structureGroups.length - 1, structureGroups)\n        }\n\n        this.setState({structureGroups})\n    }\n\n    cleanUnselectedFromGroups = (groups) => {\n        /* Removes unselected structures */\n        return groups.reduce((cleanGroups, group) => {\n            group = {...group, structs: group.structs.filter(({id: structID}) => this.props.active.structs.includes(structID))}\n\n            if (group.structs.length > 0){\n                cleanGroups.push(group)\n            }\n            \n            return cleanGroups\n        },[])\n    }\n\n    newGroup = (structs, groupParams) => {\n\n        return {\n            structs: structs || [],\n            initializingOptions: {tabID: this.defaultTabID, plotClasses: [], mergeMethod: \"separatePlot\"},\n            ...groupParams\n        }\n    }\n\n    addGroup = ({structs}) => {\n\n        const structureGroups = this.markActiveGroup(this.state.structureGroups.length,\n            [...this.state.structureGroups, this.newGroup(structs)])\n\n        this.setState({structureGroups})\n    }\n\n    removeGroup = (iGroup) => {\n\n        const group = this.state.structureGroups[iGroup]\n        \n        if (group.structs.length > 0){\n\n            //We need to deactivate all structures in the group, this will automatically update groups\n            this.props.deactivateStruct(group.structs.map(struct => struct.id))\n        } else {\n            //If no structures in the group, we just delete it\n\n            let structureGroups = this.state.structureGroups.filter((g, i) => i !== iGroup)\n\n            if (group.active){\n                structureGroups = this.markActiveGroup(structureGroups.length - 1, structureGroups)\n            }\n\n            this.setState({structureGroups})\n        }\n        \n    }\n\n    splitGroup = (iGroup) => {\n        const group = this.state.structureGroups[iGroup]\n\n        const splitted = group.structs.map( struct => this.newGroup([struct], _.omit(group, [\"structs\"])) )\n\n        //Remove the old group\n        let structureGroups = this.state.structureGroups.filter( (g, i) => i !== iGroup)\n\n        //Add the new ones\n        structureGroups = [...structureGroups.slice(0,iGroup), ...splitted, ...structureGroups.slice(iGroup) ]\n\n        //If it was the active group, we can't leave all groups as active!\n        if (group.active) structureGroups = this.markActiveGroup(iGroup, structureGroups)\n\n        this.setState({structureGroups})\n\n    }\n\n    markActiveGroup = (iGroup, groups) => {\n        groups = groups || this.state.structureGroups\n        \n        return groups.map((group, i) => {\n            return {...group, active: i === iGroup}\n        })\n    }\n\n    setGroupAsActive = (iGroup) => {\n        this.setState({structureGroups: this.markActiveGroup(iGroup)})\n    }\n\n    moveStructToActiveGroup = (structID) => {\n        \n        //Get the structure\n        const struct = _.find(this.selectedStructs, [\"id\", structID])\n\n        //Remove the structure from its actual group and move it to the active group\n        //THIS WILL BE A PROBLEM IF AT SOME POINT THE SAME STRUCTURE IS ALLOWED IN TWO GROUPS AT THE SAME TIME\n        //WE SHOULD THEN SPECIFY THE ORIGIN GROUP!!!!!!!!!!!!!!\n        const structureGroups = this.state.structureGroups.map( group => {\n\n            let structs = group.active ? [...group.structs, struct] : group.structs.filter( ({id}) => id !== structID)\n            \n            return {...group, structs}\n        })\n\n        this.setState({structureGroups})\n\n    }\n\n    updateGroupInitParams = (iGroup, key, val) => {\n\n        const structureGroups = this.state.structureGroups.map((group, i) => {\n            return i === iGroup ? {...group, initializingOptions: {...group.initializingOptions, [key]: val}}: group\n        })\n\n        this.setState({structureGroups})\n    }\n\n    toggleVisibility = () => {\n\n        document.dispatchEvent( new Event(\"togglePlotInitializer\"))\n    }\n\n    updateInitializingOptions = (key, value) => {\n        this.setState({ [key]: value})\n    }\n\n    getNewPlot = () => {\n\n        //Plot plotables\n        this.selectedPlotables.forEach(plotable => {\n            plotable.chosenPlots.forEach(plotType => {\n                PythonApi.newPlot({ tabID: this.defaultTabID, plotable_path: plotable.path, plot_method: plotType})\n            })\n        })\n\n        //Plot the structures\n        this.state.structureGroups.forEach( ({structs, initializingOptions}) =>  {\n\n            if (initializingOptions.mergeMethod.includes(\"separate\")){\n\n                const animation = initializingOptions.mergeMethod.includes(\"Animation\")\n\n                structs.forEach( struct => {\n                    \n                    initializingOptions.plotClasses.forEach( plotClass => {\n                    \n                        PythonApi.newPlot(\n                            {tabID: initializingOptions.tabID, structID: struct.id, animation, plotClass: plotClass}\n                        )\n        \n                    })\n                    \n                    \n                })\n            }\n            \n        })\n\n        this.toggleVisibility()\n\n        this.props.setActiveStructs([])\n        this.props.setActivePlotables([])\n\n    }\n\n    nothingToPlotMessage = () => {\n        return <div>\n            <div style={{color: \"darkred\", fontSize: \"1.3em\", fontWeight: \"bold\"}}>There's nothing to plot currently</div>\n            <div>Select a structure or plotable to begin.</div>\n        </div>\n    }\n\n    render() {\n\n        if (this.props.tabs.length === 0) return null\n\n        // let plotables = _.groupBy(this.selectedPlotables, \"plot\")\n\n        const plotables = this.selectedPlotables\n\n        return (\n            <div className=\"plotInitializer\" style={this.props.style}>\n\n                <Card\n                    style={{margin: 20, padding: 20, background: \"aliceblue\", overflow: \"visible\"}}>\n                    {this.selectedStructs.length > 0 ? <div>\n                        <div className=\"sectionHeader\">\n                            Structures\n                        </div>\n                        {this.state.structureGroups.map( (group, i) => {\n                            return <StructuresGroup \n                                {...group}\n                                onInitParamChange={(paramName, val) => this.updateGroupInitParams(i, paramName, val)}\n                                setGroupAsActive={() => this.setGroupAsActive(i)}\n                                removeGroup={() => this.removeGroup(i)}\n                                splitGroup={() => this.splitGroup(i)}\n                                moveStructToActiveGroup={this.moveStructToActiveGroup}\n                            />\n                        })}\n                        <div onClick={this.addGroup}>New Group</div>\n                    </div>: null}\n\n                    {this.selectedPlotables.length > 0 ? <div className=\"sectionHeader\">\n                        Plotables\n                    </div> : null}\n\n                    <div>\n                        {plotables.map(plotable => <PlotableRow plotable={plotable}/>)}\n                    </div>\n                        \n\n                    {[...this.selectedPlotables, ...this.selectedStructs].length === 0 ? this.nothingToPlotMessage() : null}\n\n                    <div style={{ display: \"flex\", flexDirection: \"row\", justifyContent: \"center\", alignItems: \"center\", paddingTop: 20 }}>\n\n                        <Button\n                            style={{marginRight: 20}}\n                            onClick={this.toggleVisibility}\n                            endIcon={<MdClose />}\n                        >\n                            Dismiss\n                        </Button>\n\n                        <Button\n                            style={{ marginLeft: 20 }}\n                            onClick={this.getNewPlot}\n                            endIcon={<MdDone/>}\n                        >\n                            Initialize plots      \n                        </Button>\n\n                    </div>     \n\n                </Card>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    activeStructs: selectActiveStructs(state),\n    activePlotables: selectActivePlotables(state),\n    tabs: state.session.tabs,\n    active: state.active,\n})\n\nconst mapDispatchToProps = {\n    setActiveTab,\n    addPlots,\n    setActiveStructs,\n    setActivePlotables,\n    informLoadingPlot,\n    informLoadedPlot,\n    deactivateStruct,\n    deactivatePlotable\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PlotInitializer);\n","import React, { Component } from 'react'\nimport Switch from '@material-ui/core/Switch'\n\nexport default class SwitchInput extends Component {\n    render() {\n        return (\n            <div style={{display:\"flex\", flexDirection:\"column\", justifyContent:\"center\", alignItems:\"center\"}}>\n                <div style={{paddingBottom: 10}}>{this.props.setting.name}</div>\n                <Switch\n                    id = {this.props.id || this.props.setting.key}\n                    checked={this.props.value}\n                    onChange={(e) => this.props.onChange(e.target.checked) }\n                    {...this.props.inputField.params}/>\n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\n\nimport Select, { components } from \"react-select\"\n\nimport _ from 'lodash'\n\nconst { ValueContainer, Placeholder } = components;\n\nconst CustomValueContainer = ({ children, ...props }) => {\n    return (\n        <ValueContainer {...props}>\n            <Placeholder {...props} isFocused={props.isFocused}>\n                {props.selectProps.placeholder}\n            </Placeholder>\n            {React.Children.map(children, child =>\n                child && child.type !== Placeholder ? child : null\n            )}\n        </ValueContainer>\n    );\n};\n\nexport default class Dropdown extends Component {\n    render() {\n\n        const label = this.props.label || (this.props.setting ? this.props.setting.name : \"\")\n\n        return (\n            <Select\n                value={ Array.isArray(this.props.value) ? this.props.value.map(val => _.find(this.props.inputField.params.options, {value: val})) : _.find(this.props.inputField.params.options, {value: this.props.value})}\n                onChange={(obj) => this.props.onChange(Array.isArray(obj) ? obj.map(obj => obj.value) : obj ? obj.value : null )}\n                {...this.props.inputField.params}\n                components={{\n                    ValueContainer: CustomValueContainer\n                }}\n                styles={{\n                    container: (provided, state) => ({\n                        ...provided,\n                        marginTop: 20,\n                        marginBottom: 20\n                    }),\n                    valueContainer: (provided, state) => ({\n                        ...provided,\n                        overflow: \"visible\"\n                    }),\n                    placeholder: (provided, state) => ({\n                        ...provided,\n                        position: \"absolute\",\n                        top: state.hasValue || state.selectProps.inputValue ? -15 : \"50%\",\n                        transition: \"top 0.1s, font-size 0.1s\",\n                        fontSize: (state.hasValue || state.selectProps.inputValue ) && 13,\n                        color: state.hasValue || state.selectProps.inputValue ? \"blue\" : \"#ccc\",\n                        marginLeft: state.hasValue || state.selectProps.inputValue ? -5 : 0,\n                    })\n                }}\n                placeholder={label}/>\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport { ChromePicker } from 'react-color';\n\nexport default class ColorPicker extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state ={\n            tempcolor: undefined\n        }\n    }\n\n    toggleColorPicker = () => {\n        this.setState({ displayColorPicker: !this.state.displayColorPicker })\n    };\n    \n    render() {\n\n        let colorPicker = this.state.displayColorPicker ? (\n            <div style={{position: \"absolute\", bottom: 60}}>\n                <ChromePicker\n                    color={this.state.tempcolor || this.props.value || 'black'}\n                    onChange={(color) => {this.setState({tempcolor: color.hex})}}\n                    onChangeComplete={(color) => {this.props.onChange(color.hex); this.setState({tempcolor: undefined})}}\n                    {...this.props.inputField.params}/>\n            </div>\n        ) : null;\n\n        return (\n            <div style={{position: \"relative\",display:\"flex\", flexDirection:\"column\", justifyContent:\"center\", alignItems:\"center\"}}>\n                <div style={{paddingBottom: 10}}>{this.props.setting.name}</div>\n                <div \n                    className=\"z-depth-2\"\n                    onClick={this.toggleColorPicker}\n                    style={{width: 30, height: 30, borderRadius: 30, background: this.props.value}}/>\n                \n                {colorPicker}\n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\n\nimport { Range, createSliderWithTooltip } from 'rc-slider'\nimport 'rc-slider/assets/index.css';\n\nconst RangeWithTooltip = createSliderWithTooltip(Range)\n\nexport default class RangeSlider extends Component {\n    render() {\n\n        const value = this.props.value || [0,0]\n\n        return (\n            <div style={{paddingLeft: \"10%\", paddingRight: \"10%\"}}>\n                <div style={{paddingBottom: 10}}>{this.props.setting.name}</div>\n                <RangeWithTooltip\n                    value={value}\n                    onChange={(value) => this.props.onChange(value)}\n                    {...this.props.inputField.params}\n                    />\n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport InputField from '../InputField'\nimport { TextField } from '@material-ui/core'\n\nexport default class Range extends Component {\n\n    render() {\n\n        const value = this.props.value != null ? this.props.value : [\"\", \"\"]\n\n        return (\n            <div>\n                <div style={{paddingBottom: 10}}>{this.props.setting.name}</div>\n                <div style={{display: 'flex'}}>\n                    <TextField\n                        style={{marginRight: 30, flex:1}}\n                        type=\"number\"\n                        variant=\"outlined\"\n                        label=\"min\"\n                        value={value[0]}\n                        onChange={(e) => value[1] >= Number(e.target.value) ? \n                            this.props.onChange( [InputField.number(e.target.value), value[1]] ) : null}\n                        {...this.props.inputField.params}/>\n                    <TextField\n                        style={{marginLeft: 30, flex:1}}\n                        type=\"number\"\n                        variant=\"outlined\"\n                        label=\"max\"\n                        value={value[1]}\n                        onChange={(e) => Number(e.target.value) >= value[0] ? \n                            this.props.onChange( [value[0], InputField.number(e.target.value)] ) : null }\n                        {...this.props.inputField.params}/>\n                </div>\n                \n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport InputField from '../InputField'\nimport TextField from '@material-ui/core/TextField'\n\nexport default class Numeric extends Component {\n    render() {\n\n        const additionalProps = this.props.inputField ? this.props.inputField.params : {}\n\n        const value = this.props.value || \"\"\n        const label = this.props.label || (this.props.setting ? this.props.setting.name : \"\")\n\n        return (\n            <div>\n                <TextField\n                    type=\"number\"\n                    label={label}\n                    value={value}\n                    onChange={(e) => this.props.onChange( InputField.number(e.target.value) )}\n                    style = {this.props.style}\n                    variant=\"outlined\"\n                    {...additionalProps}/>\n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\n\n//--Components\nimport Switch from '@material-ui/core/Switch';\nimport Button from '@material-ui/core/Button';\nimport 'rc-slider/assets/index.css';\n\nimport _ from \"lodash\"\nimport InputField from '../InputField';\n\nexport default class QueriesField extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = {\n            displayColorPicker: {}\n        }\n    }\n\n    addQuery = () => {\n\n        let newQuery = this.props.setting.inputField.queryForm.reduce((map, queryParam) => {\n            map[queryParam.key] = queryParam.default || null\n            return map\n        }, {})\n\n        newQuery.active = true\n\n        this.props.onChange([...this.props.value, newQuery])\n    }\n\n    changeSettingValue = (iQuery, paramKey, paramValue) => {\n\n        let newValue = _.cloneDeep(this.props.value)\n\n        newValue[iQuery] = { ...newValue[iQuery], [paramKey]: paramValue}\n\n        this.props.onChange(newValue)\n    }\n\n    renderQuery = (query, iQuery) => {\n\n        return (\n\n            <div key={iQuery} style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", marginBottom: 10}}>\n                <Switch\n                    id={iQuery+\"active\"}\n                    checked={query.active}\n                    onChange={(e) => this.changeSettingValue(iQuery, \"active\", e.target.checked) }/>\n                <div className=\"queryCard MuiPaper-elevation3\" style={{flex: 1, background: query.active ? \"#CBFFC0\" : \"#ffc3cd\", borderRadius: 10, margin: 10}}>\n                    <div style={{display:\"flex\", flexWrap: \"wrap\", justifyContent: \"space-around\"}}>\n                        {this.props.setting.inputField.queryForm.map(queryParam => <InputField \n                                                                                    id={String(iQuery) + queryParam.key}\n                                                                                    setting={queryParam}\n                                                                                    value={query[queryParam.key]}\n                                                                                    onValueChange={(val) => this.changeSettingValue(iQuery, queryParam.key, val)}/>)}\n                    </div>   \n                </div>\n            </div>\n            \n        )\n\n    }\n\n    render() {\n\n        const value = this.props.value || []\n\n        return (\n            <div>\n                <div style={{paddingBottom: 10}}>{this.props.setting.name}</div>\n                <div>\n                    {value.map( (query, iQuery) => this.renderQuery(query, iQuery))}\n                    <Button\n                        data-tip=\"Add a new query\"\n                        onClick={this.addQuery}>\n                        Add Query\n                    </Button>\n                </div>\n            </div>\n            \n        )\n    }\n}\n","import React, { Component } from 'react'\nimport NumericInput from './Numeric'\n\nimport _ from \"lodash\"\n\nexport default class ArrayInput extends Component {\n\n    changeValue = (newVal, i) => {\n        let value = _.cloneDeep(this.props.value)\n\n        if(!value){\n            value = this.handleNone()\n        }\n\n        value[i] = newVal\n\n        this.props.onChange(value)\n    }\n\n    handleNone = () => {\n        return Array((this.props.inputField.params.shape || [1])[0]).fill(null)\n    }\n\n    render() {\n\n        //Params to pass to numeric inputs\n        const orientationStyles = this.props.inputField.params.vertical ? {\n            marginLeft: 20, marginRight: 20, marginBottom: 0, width: 70\n        } : {\n            marginLeft: 5, marginRight: 5, marginBottom: 0, width: 100\n        }\n        const inputStyle = { ...orientationStyles, textAlign: \"center\"}\n\n        let value = this.props.value\n\n        if (!value){\n            value = this.handleNone()\n        }\n\n        return (\n            <div style={{display: \"flex\", flexDirection: \"column\", justifyContent: \"center\", alignItems: \"center\"}}>\n                <div style={{paddingBottom: 10}}>{this.props.setting.name}</div>\n                <div style={{display: \"flex\", flexDirection: this.props.inputField.params.vertical ? \"column\" : \"row\", justifyContent: \"center\", alignItems: \"center\"}} className=\"arrayContainer\">\n                    {value.map((val, i) => <NumericInput value={val} onChange={(val) => this.changeValue(val, i)} style={inputStyle}/>)}\n                </div>  \n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport InputField from \"../InputField\"\nimport {MdDragHandle} from \"react-icons/md\"\nimport { IoIosRemoveCircle, IoIosAddCircle } from \"react-icons/io\"\nimport _ from \"lodash\"\nimport {\n    sortableContainer,\n    sortableElement,\n    sortableHandle,\n    arrayMove\n} from 'react-sortable-hoc';\n\nconst DragHandle = sortableHandle(() => <MdDragHandle size={20} color=\"gray\"/>);\n\nconst SortableItem = sortableElement((props) => (\n    <div style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n        {props.sortable ? <DragHandle /> : null}\n        <InputField {...props} />\n        { props.remove ? <IoIosRemoveCircle color=\"darkred\" size={20} onClick={props.remove}/> : null }\n    </div>\n));\n\nconst SortableContainer = sortableContainer(({ children }) => {\n    return <div>{children}</div>;\n});\n\nexport default class ListInput extends Component {\n\n    changeValue = (newVal, i) => {\n        let value = _.cloneDeep(this.sanitizeVal())\n\n        value[i] = newVal\n\n        this.props.onChange(value)\n    }\n\n    sanitizeVal = () => {\n        if(!this.props.value){\n            return this.handleNone()\n        } else {\n            return this.props.value\n        }\n    }\n\n    handleNone = () => {\n\n        return []\n        \n    }\n\n    addItem = () => {\n\n        this.props.onChange([...this.sanitizeVal(), null])\n    }\n\n    removeItem = (i) => {\n        this.props.onChange(this.sanitizeVal().filter((val, index) => index !== i))\n    }\n\n    onSortEnd = ({ oldIndex, newIndex }) => {\n\n        this.props.onChange(\n            arrayMove(this.sanitizeVal(), oldIndex, newIndex)\n        )\n\n    };\n\n    render() {\n\n        let value = this.sanitizeVal()\n\n        return (\n            <div style={{ display: \"flex\", flexDirection: \"column\", justifyContent: \"center\", alignItems: \"center\" }}>\n                <div style={{ paddingBottom: 10 }}>{this.props.setting.name}</div>\n                <SortableContainer onSortEnd={this.onSortEnd} useDragHandle>\n                    {value.map((val, i) => (\n                        <SortableItem \n                            key={`item-${i}`} index={i} value={val} \n                            onValueChange={(val) => this.changeValue(val, i)} \n                            remove={() => this.removeItem(i)}\n                            sortable={this.props.setting.inputField.params.sortable}\n                            setting={this.props.setting.inputField.params.itemInput} />\n                    ))}\n                </SortableContainer>\n                <IoIosAddCircle\n                    data-tip=\"Add a new item\"\n                    onClick={this.addItem}\n                    size={20}\n                    color=\"green\"\n                />\n            </div>\n        )\n    }\n}","import React, { Component } from 'react'\n\nimport CreatableSelect from 'react-select/creatable';\n\nimport { components } from \"react-select\"\n\nimport _ from 'lodash'\n\nconst { ValueContainer, Placeholder } = components;\n\nconst CustomValueContainer = ({ children, ...props }) => {\n    return (\n        <ValueContainer {...props}>\n            <Placeholder {...props} isFocused={props.isFocused}>\n                {props.selectProps.placeholder}\n            </Placeholder>\n            {React.Children.map(children, child =>\n                child && child.type !== Placeholder ? child : null\n            )}\n        </ValueContainer>\n    );\n};\n\nexport default class CreatableDropdown extends Component {\n\n    santitizeValue = (val) => {\n        /*\n        Maps the real value to something that can be passed to react select\n\n        What we need to do is convert each value into an object {value: , label: }\n        */\n\n        var sanitized = _.find(this.props.inputField.params.options, { value: val })\n\n        if (!sanitized && val) {\n            sanitized = {label: val, value: val}\n        }\n\n        return sanitized || null\n\n    }\n\n    handleChange = (obj) => {\n        /*\n        Treats the new object before passing it to the onChange function\n        */\n\n        var newVal;\n        if (Array.isArray(obj)){\n            newVal = obj.map(obj => obj.value)\n        } else if (obj) {\n            newVal = obj.value\n        } else {\n            newVal = this.props.inputField.params.isMulti ? [] : null\n        }\n\n        this.props.onChange(newVal)\n\n    }\n\n    render() {\n\n        const label = this.props.label || (this.props.setting ? this.props.setting.name : \"\")\n\n        var value;\n        \n        if (Array.isArray(this.props.value)){\n            value = this.props.value.map(val => this.santitizeValue(val))\n        } else {\n            value = this.santitizeValue(this.props.value)\n        }\n\n        return (\n            <CreatableSelect\n                value={value}\n                onChange={this.handleChange}\n                {...this.props.inputField.params}\n                components={{\n                    ValueContainer: CustomValueContainer\n                }}\n                styles={{\n                    container: (provided, state) => ({\n                        ...provided,\n                        marginTop: 20,\n                        marginBottom: 20\n                    }),\n                    valueContainer: (provided, state) => ({\n                        ...provided,\n                        overflow: \"visible\"\n                    }),\n                    placeholder: (provided, state) => ({\n                        ...provided,\n                        position: \"absolute\",\n                        top: state.hasValue || state.selectProps.inputValue ? -15 : \"50%\",\n                        transition: \"top 0.1s, font-size 0.1s\",\n                        fontSize: (state.hasValue || state.selectProps.inputValue) && 13,\n                        color: state.hasValue || state.selectProps.inputValue ? \"blue\" : \"#ccc\",\n                        marginLeft: state.hasValue || state.selectProps.inputValue ? -5 : 0,\n                    })\n                }}\n                placeholder={label} />\n        )\n    }\n}\n","import React, { Component } from 'react'\n\nimport _ from 'lodash'\nimport Dropdown from './Dropdown'\nimport Numeric from './Numeric'\nimport Range from './Range'\nimport RangeSlider from './RangeSlider'\nimport Text from './TextInput'\n\nimport { AiOutlineDelete } from 'react-icons/ai'\nimport { MdPlaylistAdd } from 'react-icons/md'\nimport { IconButton } from '@material-ui/core'\n\n\n\nexport default class AtomSelector extends Component {\n\n    state = {}\n\n    onCategoryChange = (catName, value) => {\n        //this.props.onChange({...this.props.value, [catName]: value})\n        this.props.onChange({\n            ...this.props.value, [catName]: value\n        })\n    }\n\n    addNewCategory = (key) => {\n        if (!key) return\n        this.onCategoryChange(key, undefined)\n    }\n\n    deleteCategory = (key) => {\n        this.props.onChange(_.omit(this.props.value, key))\n    }\n\n    renderCategory = (key, value) => {\n        // If we have no component for this category, return null\n        if (!ATOMIC_CATEGORIES_INPUT[key]) return null\n\n        // Otherwise, get the name and the component for this category\n        const { component: InputComponent, name } = ATOMIC_CATEGORIES_INPUT[key]\n\n        // And render it\n        return <fieldset style={{\n            borderStyle: \"dashed\", borderColor: \"#ccc\", borderRadius: 5, borderWidth: 1, padding: 5, marginTop: 2, marginBottom: 2\n        }}>\n            <legend style={{\n                paddingLeft: 10, paddingRight: 10, paddingTop: 2, paddingBottom: 2, borderRadius: 3,\n                backgroundColor: \"white\"\n            }}>{name}</legend>\n            <InputComponent\n                {...this.props}\n                value={value}\n                onChange={(value) => this.onCategoryChange(key, value)}/>\n            <IconButton onClick={() => this.deleteCategory(key)}><AiOutlineDelete color=\"red\" /></IconButton>\n        </fieldset>\n    }\n\n    render() {\n\n        const label = this.props.label || (this.props.setting ? this.props.setting.name : \"\")\n\n        let value = this.props.value || {}\n        // If we are getting a list of atomic indices, convert it to categories\n        if (Array.isArray(value)) {\n            value = {index: value}\n            return this.props.onChange(value)\n        }\n\n        return (\n            <div>\n                <div>\n                    {label}\n                </div>\n                <div>\n                    {Object.keys(value).map(key => this.renderCategory(key, value[key]))}\n                </div>\n                <div style={{display: \"flex\"}}>\n                    <div style={{flex: 1, paddingLeft: 5}}>\n                        <Dropdown\n                            value={this.state.new_cat_value}\n                            onChange={(val) => this.setState({new_cat_value: val})}\n                            label=\"Add a new selection...\"\n                            inputField={{\n                                params: {\n                                    options: Object.keys(ATOMIC_CATEGORIES_INPUT).map(key => ({ label: ATOMIC_CATEGORIES_INPUT[key].name, value: key })),\n                                }\n                            }} />\n                    </div>\n                    <IconButton onClick={() => this.addNewCategory(this.state.new_cat_value)}><MdPlaylistAdd color=\"green\" /></IconButton>\n                </div>\n            </div>\n            \n        )\n    }\n}\n\nclass AtomIndexCategory extends Component {\n    \n    render() {\n\n        return <Dropdown {...this.props}/>\n    }\n}\n\nclass FractionalCoordinatesCategory extends Component {\n    render() {\n\n        const value = this.props.value || [0,1]\n\n        return (\n            <RangeSlider\n                value={value}\n                setting={{}}\n                inputField={{\n                    params: {\n                        min: 0, max: 1, step: 0.01,\n                        //marks: { 0: \"0\", 0.25: \"0.25\", 0.5: \"0.5\", 0.75: \"0.75\", 1: \"1\" },\n                        tipFormatter: value => `${value}`\n                    }\n                }}\n                onChange={this.props.onChange}\n            /> \n        )\n    }\n}\n\nclass CoordinatesCategory extends Component {\n    render() {\n\n        const value = this.props.value || [null, null]\n\n        return (\n            <Range\n                value={value}\n                setting={{ }}\n                inputField={{params:{}}}\n                onChange={this.props.onChange}\n                />\n        )\n    }\n}\n\nclass AtomicNumberCategory extends Component {\n    render() {\n\n        const value = this.props.value || null\n\n        return (\n            <Numeric\n                value={value}\n                setting={{ }}\n                inputField={{ params: {min: 1} }}\n                onChange={this.props.onChange}\n            />\n        )\n    }\n}\n\nclass AtomicTagCategory extends Component {\n    render() {\n\n        const value = this.props.value || null\n\n        return (\n            <Text\n                value={value}\n                setting={{ }}\n                inputField={{ params: {} }}\n                onChange={this.props.onChange}\n            />\n        )\n    }\n}\n\nclass AtomNeighboursCategory extends Component {\n\n    onRangeChange = (val) => {\n        this.props.onChange({ ...this.props.value, min: val[0], max: val[1]})\n    }\n\n    onKeyChange = (key, val) => {\n        this.props.onChange({...this.props.value, [key]: val})\n    }\n\n    render() {\n        const value = this.props.value || {\"min\": 0, \"max\": 20, \"R\": 1}\n\n        return (\n            <div>\n                <div style={{ display: \"flex\", justifyContent: \"center\", alignItems: \"center\", paddingBottom: 5}}>\n                    <Range\n                        value={[value.min, value.max]}\n                        setting={{ name: \"\" }}\n                        inputField={{ params: { min: 0 } }}\n                        onChange={this.onRangeChange}\n                    />\n                    <Numeric\n                        style={{ paddingLeft: 5 }}\n                        value={value.R}\n                        setting={{ name: \"R\" }}\n                        inputField={{ params: { min: 0 } }}\n                        onChange={(val) => this.onKeyChange(\"R\", val)}\n                    />\n                </div>\n                <Text\n                    value={value.neighbour ? value.neighbour.tag : null}\n                    setting={{ name: \"Neighbour tag\" }}\n                    inputField={{ params: { placeholder: \"Neighbour tag...\" } }}\n                    onChange={(tag) => this.onKeyChange(\"neighbour\", { \"tag\": tag })} />\n            </div>\n            \n        )\n\n    }\n}\n\n// class CompositeCategory extends Component {\n\n//     render() {\n\n//         return (\n//             <div>\n//                 <Numeric />\n//             </div>\n//         )\n//     }\n// }\n\nconst ATOMIC_CATEGORIES_INPUT = {\n    index: {\n        name: \"Indices\",\n        component: AtomIndexCategory,\n    },\n    fx: {\n        name: \"Fractional X\",\n        component: FractionalCoordinatesCategory\n    },\n    fy: {\n        name: \"Fractional Y\",\n        component: FractionalCoordinatesCategory\n    },\n    fz: {\n        name: \"Fractional Z\",\n        component: FractionalCoordinatesCategory\n    },\n    x: {\n        name: \"X coordinate\",\n        component: CoordinatesCategory\n    },\n    y: {\n        name: \"Y coordinate\",\n        component: CoordinatesCategory\n    },\n    z: {\n        name: \"Z coordinate\",\n        component: CoordinatesCategory\n    },\n    Z: {\n        name: \"Atomic Number\",\n        component: AtomicNumberCategory\n    },\n    neighbours: {\n        name: \"Neighbours\",\n        component: AtomNeighboursCategory\n    },\n    tag: {\n        name: \"Atom tag\",\n        component: AtomicTagCategory\n    }\n}\n","import React, { Component } from 'react'\n\nimport _ from \"lodash\"\n\n//--Redux\nimport { connect } from 'react-redux'\nimport { changeSettings } from \"../../redux/actions\"\n\n/*  All the different input fields */\nimport TextInput from './inputFields/TextInput';\nimport Switch from './inputFields/Switch';\nimport Dropdown from './inputFields/Dropdown';\nimport ColorPicker from './inputFields/ColorPicker';\nimport RangeSlider from './inputFields/RangeSlider';\nimport Range from './inputFields/Range';\nimport Numeric from './inputFields/Numeric';\nimport QueriesField from './inputFields/QueriesInput';\nimport ArrayInput from './inputFields/Array';\nimport ListInput from './inputFields/List';\nimport CreatableDropdown from './inputFields/CreatableDropown';\nimport AtomSelector from './inputFields/AtomSelector';\n\nexport const INPUT_FIELDS = {\n    textinput: TextInput,\n    switch: Switch,\n    dropdown: Dropdown,\n    \"creatable dropdown\": CreatableDropdown,\n    color: ColorPicker,\n    rangeslider: RangeSlider,\n    range: Range,\n    number: Numeric,\n    queries: QueriesField,\n    vector: ArrayInput,\n    list: ListInput,\n    \"atom selector\": AtomSelector,\n}\n\nexport class InputField extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state ={}\n    }\n\n    w = (string) => {\n\n        if (!string) return undefined\n\n        let isSizeDefined = [\"s\", \"m\", \"l\"].map(sizeLabel => string.indexOf(sizeLabel) >= 0)\n\n        let iWindowSize = [\"small\", \"medium\", \"infinity\"].indexOf(this.props.browser.mediaType)\n\n        for (let i = iWindowSize; i > -1; i--) {\n            \n            if(isSizeDefined[i]){\n                let width = _.find(string.split(\" \"), (str) => str.indexOf([\"s\",\"m\",\"l\"][i]) >= 0)\n                return width.substr(1)\n            }\n          }\n\n        return undefined\n    }\n\n    changeSettingValue = (newValue) => {\n\n        if (this.props.onValueChange){\n            this.props.onValueChange(newValue)\n        } else {\n            this.props.changeSettings(this.props.onSettingChangeType, this.props.setting.key, newValue, this.props.onSettingChangeExtraParams)\n        }\n\n    }\n\n    static number = (value) => [\"\", \"-\"].includes(value) ? value : Number(value)\n\n    render() {\n\n        let inputField = this.props.setting.inputField\n\n        // Get the input field that we need\n        const InputComponent = INPUT_FIELDS[inputField.type]\n        \n        if (!InputComponent) return null\n\n        const fieldLayout = <InputComponent\n            {...this.props}\n            inputField={inputField}\n            onChange={(value) => this.changeSettingValue(value)}\n            //w={this.w} //This is only needed by the queries field, maybe there is a better way to do it\n        />\n\n        let tooltipParams = {\n            \"data-tip\": (this.props.setting.help ? this.props.setting.help + \"<br>\" : \"\") + \"Default: \" + (this.props.setting.default || \"None\"),\n            \"data-multiline\": true,\n            \"data-effect\": \"solid\",\n            \"data-place\": inputField.type === \"color\" ? \"bottom\" : \"top\", \n        }\n\n        const backgroundColor = this.props.value == null ? \"rgba(230,230,230,0.4)\" : undefined\n\n        return <div\n            onClick={(e) => inputField.type !== \"queries\" && e.ctrlKey ? this.changeSettingValue(this.props.value == null ? this.props.setting.default : null) : null}\n            style={{backgroundColor, paddingTop: 10, paddingBottom: 10, paddingLeft: 20, paddingRight: 20, borderRadius: 3, marginTop: 20, marginBottom: 20, width: this.w(inputField.width), ...inputField.style}}\n            {...tooltipParams}>\n                {fieldLayout}\n            </div>\n\n    }\n}\n\nconst mapStateToProps = state => ({\n    browser: state.browser\n})\n\nconst mapDispatchToProps = {\n    changeSettings,\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InputField);","import React, { Component } from 'react'\n\nimport Button from '@material-ui/core/Button'\nimport Icon from '@material-ui/core/Icon'\nimport MuiExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport MuiExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport MuiExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport { FaAngleLeft, FaAngleRight } from 'react-icons/fa'\nimport { MdRestore } from 'react-icons/md'\n\nimport InputField from \"./InputField\"\n\nimport parse from 'html-react-parser';\nimport _ from \"lodash\"\nimport { HotKeys, ObserveKeys } from 'react-hotkeys';\nimport { SETTING_GROUP_HOT_KEYS } from '../../utils/hotkeys';\n\nexport default class SettingsContainer extends Component {\n\n    hotKeysHandlers = {\n        MOVE_EXPANDED_UP: () => this.moveExpanded(\"up\"),\n        MOVE_EXPANDED_DOWN: () => this.moveExpanded(\"down\")\n    }\n\n    moveExpanded = (direction = \"down\") => {\n\n        var newExpanded;\n        if (direction === \"up\"){\n            newExpanded = this.state.expanded !== 0 ? this.state.expanded - 1 : 2\n        } else if (direction === \"down\"){\n            newExpanded = this.state.expanded !== 2 ? this.state.expanded + 1 : 0 \n        }\n\n        this.setState({expanded: newExpanded})\n    }\n\n    renderSettingsGroup = (settingsGroup) => {\n\n        return settingsGroup.map(setting => {\n\n            if (!setting.inputField) return null\n        \n            return <InputField \n                        key={setting.key}\n                        setting={setting} \n                        value={this.props.settings[setting.key]}\n                        onSettingChangeType={this.props.onSettingChangeType}\n                        onSettingChangeExtraParams={this.props.onSettingChangeExtraParams}/>\n        }) \n    }\n\n    renderSettingsGroups = (groupedParams) => {\n\n        return this.props.paramGroups.map((paramGroup, iParamGroup) => {\n\n            let groupKey = paramGroup.key ? paramGroup.key : \"null\";\n\n            let settingsGroup = groupedParams[groupKey]\n\n            if (!settingsGroup) return null\n\n            let subGrouped = _.groupBy(settingsGroup, \"subGroup\")\n\n            let subGroups = paramGroup.subGroups ? [{key: \"null\", name: null},  ...paramGroup.subGroups] : [{key: \"null\", name: null}]\n\n            let itemContent = subGroups.map(({key, name}) => {\n\n                if ( ! subGrouped[key] ) return null\n                \n                return <div key={key}>\n                    <div style={{paddingBottom: 20, fontWeight:\"bold\", fontSize: \"1.3em\", textAlign: \"left\"}}>{name}</div>\n                    <div style={{display: \"flex\", flexWrap: \"wrap\", justifyContent: \"space-around\", alignItems: \"center\"}}>{this.renderSettingsGroup(subGrouped[key])}</div>\n                </div>\n            })\n\n            const submitSettings = () => this.props.submitSettings( settingsGroup.reduce((settings, setting) => {\n                settings[setting.key] = this.props.settings[setting.key]\n                return settings\n            }, {}))\n\n            const hotKeysHandlers = {\n                SUBMIT_SETTINGS: submitSettings,\n                UNDO_SETTINGS: this.props.undoSettings,\n            }\n\n            return (\n                <MuiExpansionPanel\n                    key={groupKey}>\n                    <MuiExpansionPanelSummary style={{ display: \"flex\", justifyContent: \"center\", alignItems: \"center\" }}>\n                        <Icon>{paramGroup.icon}</Icon>\n                        <span style={{paddingLeft: 10}}>{paramGroup.name}</span>\n                    </MuiExpansionPanelSummary>\n                    <MuiExpansionPanelDetails>\n                        <HotKeys keyMap={SETTING_GROUP_HOT_KEYS} handlers={hotKeysHandlers}>\n                            <ObserveKeys>\n                                <blockquote style={{ textAlign: \"left\" }}>\n                                    {parse(paramGroup.description)}\n                                </blockquote>\n                                {itemContent}\n                                <div style={{ display: \"flex\", flexWrap: \"wrap\", justifyContent: \"space-around\" }}>\n                                    <Button\n                                        onClick={this.props.undoSettings}\n                                        data-tip=\"This will roll back to previous settings.<br> IT AFFECTS ALL GROUPS OF PARAMETERS, not only this one.\"\n                                        className=\"orange\"\n                                        style={{ margin: 20 }}>\n                                        <FaAngleLeft />Previous settings\n                            </Button>\n\n                                    <Button\n                                        data-tip=\"This will restore all settings to the plot's defaults\"\n                                        className=\"red\" style={{ margin: 20 }}><MdRestore />Restore defaults</Button>\n\n                                    <Button\n                                        data-tip=\"This will change the settings and will update everything accordingly.<br> IT ONLY AFFECTS THIS GROUP OF SETTINGS, not all settings\"\n                                        onClick={submitSettings}\n                                        className=\"blue\"\n                                        style={{ margin: 20 }}>\n                                        Submit settings<FaAngleRight />\n                                    </Button>\n\n                                </div>\n                            </ObserveKeys>\n                        </HotKeys>\n                    </MuiExpansionPanelDetails>\n                </MuiExpansionPanel> \n            )\n\n        })\n    }\n\n    render() {\n\n        let groupedParams = _.groupBy(this.props.params, \"group\")\n\n        return (\n            <div style={this.props.style}>\n                {this.renderSettingsGroups(groupedParams)}          \n            </div>\n        )\n    }\n}\n\n","import React, { Component } from 'react'\nimport Grid from '@material-ui/core/Grid';\nimport ReactTooltip from \"react-tooltip\"\n\nimport PythonApi from \"../apis/PythonApi\"\n\n//--Components\nimport PlotCard from '../components/plots/PlotCard'\nimport SettingsContainer from '../components/settings/SettingsContainer'\n\n//--Redux\nimport { connect } from 'react-redux'\nimport { addPlots, setNewStructures, setActivePlot, setCurrentSession, informLoadedPlot, informLoadingPlot } from \"../redux/actions\"\nimport { CHANGE_PLOT_SETTINGS } from '../redux/actions/actionTypes'\nimport { GlobalHotKeys } from 'react-hotkeys'\nimport { PLOT_TWEAKING_HOT_KEYS } from '../utils/hotkeys'\nimport { selectActivePlot } from '../redux/reducers'\n\nclass PlotTweaking extends Component {\n\n    hotKeysHandlers = {\n        UNDO_SETTINGS: () => this.undoSettings(),\n        SUBMIT_ALL_SETTINGS: () => this.submitSettings(\"all\")\n    }\n\n    submitSettings = (settings) => {\n\n        if (settings === \"all\"){\n            settings = this.props.activePlot.unsubmittedSettings\n        }\n\n        PythonApi.updatePlotSettings(this.props.activePlot.id, settings)\n\n    }\n\n    undoSettings = () => {\n\n        PythonApi.undoPlotSettings(this.props.activePlot.id)\n\n    }\n\n    render() {\n\n        const activePlot = this.props.activePlot\n\n        if (! activePlot ) return null\n\n        const plotSettings = { ...activePlot.settings, ...activePlot.unsubmittedSettings}\n\n        let setsCont = <SettingsContainer\n                            settings={plotSettings}\n                            params={activePlot.params}\n                            paramGroups={activePlot.paramGroups}\n                            onSettingChangeType={CHANGE_PLOT_SETTINGS}\n                            onSettingChangeExtraParams={{plotID: activePlot.id}}\n                            submitSettings={this.submitSettings}\n                            undoSettings={this.undoSettings}/>\n        \n        return (\n            <div style={{...this.props.style}}>\n                <GlobalHotKeys keyMap={PLOT_TWEAKING_HOT_KEYS.global} handlers={this.hotKeysHandlers}/>\n                <Grid container>\n                    <Grid item sm={12} md={4} style={{height:\"90vh\", display: \"flex\", flexDirection: \"column\", justifyContent: \"center\", alignItems:\"center\"}}>\n                        <PlotCard plot={activePlot} style={{height: \"80vh\"}}/>\n                    </Grid>\n                    <Grid item sm={12} md={8} style={{ padding: 20, display: \"flex\", flexDirection: \"column\"}} >\n                        {this.props.browser.mediaType === \"infinity\" ? <div className=\"scrollView\" style={{ maxHeight: \"90vh\"}}>{setsCont}</div> : setsCont}\n                    </Grid>\n                </Grid>\n                <ReactTooltip multiline disable={this.props.session.settings ? !this.props.session.settings.showTooltips : false}/>  \n            </div>\n            \n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    plots: state.plots,\n    structures: state.structures,\n    active: state.active,\n    activePlot: selectActivePlot(state),\n    session: state.session,\n    browser: state.browser\n})\n\nconst mapDispatchToProps = {\n    setCurrentSession,\n    addPlots,\n    setActivePlot,\n    setNewStructures,\n    informLoadedPlot,\n    informLoadingPlot\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PlotTweaking);\n","import React, { Component } from 'react'\nimport PythonApi from \"../apis/PythonApi\"\n\n//--Components\nimport ReactTooltip from \"react-tooltip\"\nimport SettingsContainer from \"../components/settings/SettingsContainer\"\n\n//--Redux\nimport { connect } from 'react-redux'\nimport { setCurrentSession } from \"../redux/actions\"\n\nimport _ from \"lodash\"\nimport { CHANGE_SESSION_SETTINGS } from '../redux/actions/actionTypes'\n\nclass Settings extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = {}\n    }\n\n    submitSettings = (settings) => {\n\n        PythonApi.updateSessionSettings(settings)\n\n    }\n\n    undoSettings = () => {\n        PythonApi.undoSessionSettings()\n    }\n\n    render() {\n\n        if ( _.isEmpty(this.props.session) ) return null\n\n        return (\n            <div className=\"scrollView\" style={{...this.props.style, padding: 20}}>\n                <SettingsContainer\n                    defaultActiveKey={1}\n                    settings={this.props.session.settings}\n                    params={this.props.session.params}\n                    paramGroups={this.props.session.paramGroups}\n                    onSettingChangeType={CHANGE_SESSION_SETTINGS}\n                    submitSettings={this.submitSettings}\n                    undoSettings={this.undoSettings}/>\n                <ReactTooltip multiline disable={this.props.session.settings ? !this.props.session.settings.showTooltips : false}/>\n            </div>\n            \n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    session: state.session\n})\n\nconst mapDispatchToProps = dispatch => ({\n    setCurrentSession: (session) => dispatch(setCurrentSession(session)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Settings);\n","import React, { Component } from 'react'\nimport ReactMarkDown from \"react-markdown\"\nimport PythonApi from '../../apis/PythonApi'\nimport { ExpansionPanel, ExpansionPanelSummary, ExpansionPanelDetails, Button, ExpansionPanelActions } from '@material-ui/core'\n\nexport default class Method extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = {\n            showingDetails: false\n        }\n    }\n\n    applyMethod = () => {\n        PythonApi.callPlotShortcut(this.props.plot.id, this.props.shortcut)\n    }\n\n    renderDetails = () => {\n\n        return \n    }\n\n    render() {\n\n        return (\n            <ExpansionPanel>\n                <ExpansionPanelSummary\n                    style={{display: \"flex\", cursor: \"pointer\", justifyContent: \"space-between\", alignItems: \"center\"}}>\n                    <span style={{color: \"gray\", marginRight: 10}}>{this.props.shortcut}</span>\n                    <span style={{fontWeight: \"bold\"}}>{this.props.info.name}</span>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails style={{fontSize: 13}}>\n                    <ReactMarkDown source={this.props.info.description}/>\n                </ExpansionPanelDetails>\n                <ExpansionPanelActions>\n                    <Button onClick={this.applyMethod}>APPLY METHOD</Button>\n                </ExpansionPanelActions>\n            </ExpansionPanel>\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport Method from './Method'\n\nexport default class Methods extends Component {\n    render() {\n        return (\n            <div className=\"scrollView\" style={{textAlign: \"left\", borderRadius: 3, maxHeight: \"90vh\"}}>\n                {Object.keys(this.props.plot.shortcuts).map((sequence) => <Method plot={this.props.plot} shortcut={sequence} info={this.props.plot.shortcuts[sequence]}/>)}\n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport Grid from '@material-ui/core/Grid';\nimport ReactTooltip from \"react-tooltip\"\n\n//--Components\nimport PlotCard from '../components/plots/PlotCard'\n\n//--Redux\nimport { connect } from 'react-redux'\nimport { addPlots, setNewStructures, setActivePlot, setCurrentSession, informLoadedPlot, informLoadingPlot } from \"../redux/actions\"\nimport { GlobalHotKeys } from 'react-hotkeys'\nimport { PLOT_TWEAKING_HOT_KEYS } from '../utils/hotkeys'\nimport Methods from '../components/pythonMethods/Methods'\nimport { selectActivePlot } from '../redux/reducers'\n\n\n\nclass PlotMethods extends Component {\n\n    hotKeysHandlers = {\n    }\n\n    render() {\n\n        if (! this.props.activePlot ) return null\n        \n        return (\n            <div style={{...this.props.style}}>\n                <GlobalHotKeys keyMap={PLOT_TWEAKING_HOT_KEYS.global} handlers={this.hotKeysHandlers}/>\n                <Grid container>\n                    <Grid item sm={12} md={4} style={{ height: \"90vh\", display: \"flex\", flexDirection: \"column\", justifyContent: \"center\", alignItems: \"center\" }}>\n                        <PlotCard plot={this.props.activePlot} style={{ height: \"80vh\" }} />\n                    </Grid>\n                    <Grid item sm={12} md={8} style={{ padding: 20, display: \"flex\", flexDirection: \"column\" }} >\n                        <Methods plot={this.props.activePlot} />\n                    </Grid>\n                </Grid>\n                <ReactTooltip multiline disable={this.props.session.settings ? !this.props.session.settings.showTooltips : false} />   \n            </div>\n            \n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    plots: state.plots,\n    structures: state.structures,\n    active: state.active,\n    activePlot: selectActivePlot(state),\n    session: state.session,\n    browser: state.browser\n})\n\nconst mapDispatchToProps = {\n    setCurrentSession,\n    addPlots,\n    setActivePlot,\n    setNewStructures,\n    informLoadedPlot,\n    informLoadingPlot\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PlotMethods);\n","import React, { useCallback } from 'react'\nimport { useDropzone } from 'react-dropzone'\nimport PythonApi from '../../../apis/PythonApi'\n\nfunction FilesInput() {\n    const onDrop = useCallback((acceptedFiles) => {\n        acceptedFiles.forEach((file) => {\n            console.warn(\"ACCEPTED FILE\")\n            PythonApi.sendFile(file)\n        })\n\n    }, [])\n    const { getRootProps, getInputProps } = useDropzone({ onDrop })\n\n    return (\n        <div {...getRootProps()}>\n            <input {...getInputProps()} />\n            <p>Drag 'n' drop some files here, or click to select files</p>\n        </div>\n    )\n}\n\nexport default FilesInput;\n","import React, { Component } from 'react'\nimport PythonApi from '../../apis/PythonApi'\nimport { FiWifi, FiWifiOff } from 'react-icons/fi'\n\nexport default class ConnectionStatus extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = { connected: PythonApi.socket.connected }\n    }\n\n    componentDidMount() {\n        PythonApi.onConnect(() => this.setState({connected: true}))\n        PythonApi.onDisconnect(() => this.setState({ connected: false }))\n    }\n\n    render() {\n\n        const style = this.state.connected ? { backgroundColor: \"lightgreen\" } : { backgroundColor: \"salmon\" }\n        return <div {...this.props} style={{...style, ...this.props.style}} \n                data-tip={this.state.connected ? `Connected to ${PythonApi.apiAddress}` : \"Currently not connected\"} \n                data-place=\"left\"\n                data-background-color={style.backgroundColor}>\n            {this.state.connected ? <FiWifi color=\"green\" size={20} /> : <FiWifiOff color=\"darkred\" size={20}/>}\n        </div>\n\n    }\n}\n","import React, { Component } from 'react'\n//import Speck from 'speck-renderer';\n\nexport default class MoleculeViewer extends Component {\n\n    componentDidMount(){\n        //const speck = new Speck({ canvasContainerID: \"speck-root\", canvasID: \"speck-canvas\" });\n    }\n    \n    render() {\n        return (\n            <div id=\"speck-root\" style={{...this.props.style, justifyContent: \"center\", alignItems:\"center\", display:\"flex\"}}>\n                <canvas id=\"speck-canvas\" style={{width:800, height:800}}/>\n            </div>\n        )\n    }\n}\n","\nimport PythonApi from \"../apis/PythonApi\"\n\n//--Redux\nimport { connect } from 'react-redux'\nimport { selectActivePlot } from '../redux/reducers'\n\nimport React, { Component } from 'react';\nimport plotly from 'plotly.js/dist/plotly';\nimport PlotlyEditor from 'react-chart-editor';\nimport 'react-chart-editor/lib/react-chart-editor.css';\n\n// const dataSources = {\n//     col1: [1, 2, 3], // eslint-disable-line no-magic-numbers\n//     col2: [4, 3, 2], // eslint-disable-line no-magic-numbers\n//     col3: [17, 13, 9], // eslint-disable-line no-magic-numbers\n// };\n\n// const dataSourceOptions = Object.keys(dataSources).map(name => ({\n//     value: name,\n//     label: name,\n// }));\n\nconst config = { editable: true };\n\nclass PlotEditor extends Component {\n\n    constructor(props) {\n        super(props);\n        const activePlot = props.activePlot\n        this.state = activePlot.figure;\n    }\n\n    hotKeysHandlers = {\n        UNDO_SETTINGS: () => this.undoSettings(),\n        SUBMIT_ALL_SETTINGS: () => this.submitSettings(\"all\")\n    }\n\n    submitSettings = (settings) => {\n\n        if (settings === \"all\") {\n            settings = this.props.activePlot.unsubmittedSettings\n        }\n\n        PythonApi.updatePlotSettings(this.props.activePlot.id, settings)\n\n    }\n\n    componentWillUnmount(){\n\n        PythonApi.updateFigure(this.props.activePlot.id, {...this.state, overwrite: true})\n        // this.props.addPlots({\n        //     [this.props.activePlot.id]: {\n        //         ...this.props.activePlot,\n        //         figure: this.state\n        //     }\n        // })\n    }\n\n    undoSettings = () => {\n\n        PythonApi.undoPlotSettings(this.props.activePlot.id)\n\n    }\n\n    render() {\n\n        const activePlot = this.props.activePlot\n\n        if (!activePlot) return null\n\n        return (\n            <PlotlyEditor\n                data={this.state.data}\n                layout={this.state.layout}\n                config={config}\n                frames={this.state.frames}\n                plotly={plotly}\n                style={{...this.props.style}}\n                onUpdate={(data, layout, frames) =>\n                    this.setState({ data, layout, frames })\n                }\n                useResizeHandler\n                debug\n                advancedTraceTypeSelector\n            />\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    activePlot: selectActivePlot(state),\n})\n\nexport default connect(mapStateToProps, null)(PlotEditor);","import React, { useRef, useState } from 'react'\nimport { Canvas, useFrame } from 'react-three-fiber'\n\nfunction Box(props) {\n    // This reference will give us direct access to the mesh\n    const mesh = useRef()\n\n    // Set up state for the hovered and active state\n    const [hovered, setHover] = useState(false)\n    const [active, setActive] = useState(false)\n\n    // Rotate mesh every frame, this is outside of React without overhead\n    useFrame(() => {\n        mesh.current.rotation.x = mesh.current.rotation.y += 0.01\n    })\n\n    return (\n        <mesh\n            {...props}\n            ref={mesh}\n            scale={active ? [1.5, 1.5, 1.5] : [1, 1, 1]}\n            onClick={(e) => setActive(!active)}\n            onPointerOver={(e) => setHover(true)}\n            onPointerOut={(e) => setHover(false)}>\n            <boxBufferGeometry attach=\"geometry\" args={[1, 1, 1]} />\n            <meshStandardMaterial attach=\"material\" color={hovered ? 'hotpink' : 'orange'} />\n        </mesh>\n    )\n}\n\nexport default function NotConnected(props){\n\n    return <Canvas style={props.style} {...props}>\n        <ambientLight />\n        <pointLight position={[10, 10, 10]} />\n        <Box position={[-1.2, 0, 0]} sign={-1}/>\n        <Box position={[1.2, 0, 0]} />\n    </Canvas>\n}","// This is currently not used\nimport React, { Component } from 'react'\n\nexport default class SislDocs extends Component {\n    render() {\n        \n        return (\n            <object data={process.env.PUBLIC_URL + \"/sisl-docs/html/index.html\"} aria-label=\"Sisl documentation\" width=\"100%\" height=\"100%\"/>\n        )\n    }\n}","import React, { Component } from 'react'\n\nimport _ from \"lodash\"\n\n//--Components\nimport ReactTooltip from \"react-tooltip\"\nimport PlotDashboard from '../components/plots/PlotDashboard';\n\n//--Python api \nimport PythonApi from '../apis/PythonApi'\n\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.min.css'\n\n//--Redux\nimport { connect } from 'react-redux'\nimport {addPlots, setNewStructures, setActiveTab, setActivePlot, setSessionTabs, setCurrentSession, setNewPlotables, setActivePage} from \"../redux/actions\"\nimport StructurePicker from '../components/structures/StructurePicker'\nimport PlotInitializer from '../components/plotInitializer/PlotInitializer'\nimport Tabs from '../components/tabs/Tabs'\nimport Controls from '../components/controls/Controls'\nimport PlotTweaking from './PlotTweaking'\nimport Settings from './Settings'\n\nimport {getApplicationKeyMap, GlobalHotKeys, configure} from 'react-hotkeys'\nimport { GLOBAL_HOT_KEYS } from '../utils/hotkeys';\nimport PlotMethods from './PlotMethods';\nimport FilesInput from '../components/settings/inputFields/Files';\nimport ConnectionStatus from '../components/controls/ConnectionStatus';\nimport MoleculeViewer from '../components/structureView/MoleculeViewer';\nimport PlotEditor from './PlotEditor';\nimport NotConnected from '../components/loading/NotConnected';\nimport SislDocs from './SislDocs';\n\nconfigure({logLevel: \"debug\", simulateMissingKeyPressEvents: false})\nclass Plots extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = {\n            connected: PythonApi.socket.connected,\n            loadingPlots: []\n        }\n\n        PythonApi.onConnect(() => {\n            this.setState({connected: true})\n        })\n\n        document.addEventListener(\"syncWithSession\", (e) => this.syncWithSession(e.detail.session) )\n\n        document.addEventListener(\"updateTabs\", () => this.syncWithSession())\n\n        document.addEventListener(\"loadingPlot\", (e) => {\n            this.setState({ loadingPlots: [...this.state.loadingPlots, e.detail.plot_id] })\n        })\n\n        document.addEventListener(\"plot\", (e) => {\n            const plot = e.detail.plot\n            props.addPlots({ [plot.id]: plot })\n            this.setState({ loadingPlots: this.state.loadingPlots.filter(id => id !== plot.id) })\n        })\n\n        document.addEventListener(\"newPlot\", () => this.syncWithSession())\n\n        document.addEventListener(\"sessionUpdate\", (e) => {\n            e.detail.justUpdated.forEach( plotID => {\n                \n                PythonApi.getPlot(plotID)\n\n            })\n\n        })\n            \n    }\n\n    hotKeysHandlers = {\n        GO_TO_SETTINGS: () => this.props.setActivePage(\"settings\"),\n        GO_TO_DASHBOARD: () => this.props.setActivePage(\"plots\"),\n        GO_TO_MOLECULEVIEWER: () => this.props.setActivePage(\"moleculeViewer\"),\n        SHOW_AVAIL_HOTKEYS: () => console.warn(getApplicationKeyMap())\n    }\n\n    syncWithSession = (session) => {\n\n        if (!session) {\n            return PythonApi.askForSession()\n        }\n        \n        this.props.setCurrentSession(session)\n        \n    }\n\n    componentDidMount(){\n\n        this.props.setActivePlot(undefined)\n\n        //Add the listener to display or not the plot initializer\n        this.listener = document.addEventListener(\"togglePlotInitializer\", this.togglePlotInitializer)\n\n    }\n\n    componentDidUpdate(){\n\n        let activeTab = _.find(this.props.tabs, [\"id\", this.props.active.tab]) \n        \n        if (!activeTab) return\n\n        //Get the missing plots if there are any\n        activeTab.plots.forEach(plotID => {\n\n            if ( !this.props.plots[plotID] && this.state.loadingPlots.indexOf(plotID) === -1){\n\n                PythonApi.getPlot(plotID)\n                \n            }\n        })\n\n    }\n\n    getNewPlot = () => {\n\n        PythonApi.newPlot({tabID: this.props.active.tab, ...this.state.plotToInitialize})\n        \n        this.togglePlotInitializer()\n\n    }\n\n    togglePlotInitializer = (e) => {\n\n        let currentlyShowing = this.props.active.page === \"plotInitializer\"\n\n        if (e !== undefined & e.detail !== undefined) {\n            if (e.detail.forceShow &&  !currentlyShowing){\n                this.props.setActivePage(\"plotInitializer\")\n            } if (e.detail.forceHide && currentlyShowing){\n                this.props.setActivePage(\"plots\")\n            }\n        } else {\n            this.props.setActivePage(currentlyShowing ? \"plots\" : \"plotInitializer\")\n        }\n\n    }\n\n    render() {\n\n        const MainComponent = {\n            'plots': PlotDashboard,\n            'settings': Settings,\n            'plotLayoutEditor': PlotEditor,\n            'plotTweaking': PlotTweaking,\n            'plotMethods': PlotMethods,\n            'plotInitializer': PlotInitializer,\n            'moleculeViewer': MoleculeViewer,\n            'sislDocs': SislDocs,\n        }[this.props.active.page]\n\n        if (!this.state.connected && this.props.active.page !== 'sislDocs'){\n            return <div style={{height: \"100vh\", display: \"flex\", flexDirection: \"column\", justifyContent: \"center\", alignItems: \"center\"}}>\n                <div style={{ paddingTop: 100 }}>\n                    <div style={{ fontSize: \"2.5em\", fontWeight: \"bold\"}}>We are trying to connect to the sisl API.</div>\n                </div>\n                <NotConnected camera={{ position: [0, 0, 5] }}/>\n                <div style={{ paddingBottom: 100, fontSize: \"1.2em\" }}> Meanwhile you can have fun with these two moving cubes. </div>\n                <ConnectionStatus\n                    connectedProps={{ style: { backgroundColor: \"lightgreen\" } }}\n                    style={{ position: \"absolute\", right: 0, top: 0, margin: 20, width: 40, height: 40, borderRadius: 40, display: \"flex\", justifyContent: \"center\", alignItems: \"center\" }} />\n                <ToastContainer />\n                <Controls />\n                <ReactTooltip multiline disable={this.props.session.settings ? !this.props.session.settings.showTooltips : false} />\n                </div>\n        }\n\n        if (['plotLayoutEditor', \"sislDocs\"].includes(this.props.active.page)) {\n            return (\n                <div style={{ marginBottom: 0, display: \"flex\", flexWrap: \"wrap\", height: \"100vh\", position: \"relative\"}}>\n                    <GlobalHotKeys keyMap={{ ...GLOBAL_HOT_KEYS }} handlers={this.hotKeysHandlers} />\n                    <MainComponent />\n                    <Controls style={{position: \"absolute\", bottom: 0, right: 0}}/>\n                    {this.props.active.page === \"sislDocs\" ? null : <ToastContainer />}\n                    {this.props.active.page === \"sislDocs\" ? null : <ConnectionStatus\n                        connectedProps={{ style: { backgroundColor: \"lightgreen\" } }}\n                        style={{ position: \"absolute\", right: 0, top: 0, margin: 20, width: 40, height: 40, borderRadius: 40, display: \"flex\", justifyContent: \"center\", alignItems: \"center\" }} />}\n                    <ReactTooltip multiline disable={this.props.session.settings ? !this.props.session.settings.showTooltips : false} />\n                </div>\n            )\n        }\n\n        return (\n            <div style={{display: \"flex\", flexWrap: \"wrap\"}}>\n                <GlobalHotKeys keyMap={{...GLOBAL_HOT_KEYS}} handlers={this.hotKeysHandlers}/>\n                <StructurePicker style={{ paddingLeft: 15, paddingRight: 15, width: \"10vw\", minWidth: 200, borderRight: \"#ccc solid 1px\"}}/>   \n                <div style={{flex: 1, paddingLeft: 20, height: \"100vh\", display: \"flex\", flexDirection: \"column\"}}>\n                    {this.props.active.page === \"plots\" ? <Tabs /> : null}\n                    <MainComponent style={{flex: 1}}/>\n                    <FilesInput/>\n                </div>\n                <Controls />\n                <ToastContainer/>\n                <ConnectionStatus \n                connectedProps={{ style: {backgroundColor: \"lightgreen\"}}}\n                style={{ position: \"absolute\", right: 0, top: 0, margin: 20, width:40, height: 40, borderRadius: 40, display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}/>\n                <ReactTooltip multiline disable={this.props.session.settings ? !this.props.session.settings.showTooltips : false}/>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    plots: state.plots,\n    structures: state.session.structures,\n    tabs: state.session.tabs,\n    active: state.active,\n    session: state.session\n})\n\nconst mapDispatchToProps = {\n    setCurrentSession,\n    setActiveTab,\n    setSessionTabs,\n    setActivePlot,\n    addPlots,\n    setNewStructures,\n    setNewPlotables,\n    setActivePage\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Plots);","import { createStore } from 'redux'\nimport {responsiveStoreEnhancer} from 'redux-responsive'\nimport { persistStore} from 'redux-persist'\n\nimport rootReducer from '../reducers'\n\nexport default () => {\n  let store = createStore(rootReducer, responsiveStoreEnhancer)\n  let persistor = persistStore(store)\n  //persistor.purge()\n  return { store, persistor }\n}","import React from 'react';\nimport './App.css';\n\n//--Redux\nimport getStoreAndPersistor from './redux/store'\nimport { Provider } from 'react-redux'\nimport { PersistGate } from 'redux-persist/integration/react'\nimport Plots from './pages/Plots'\n\nconst {store, persistor} = getStoreAndPersistor()\n\nfunction App() {\n  return (\n    <Provider store={store}>\n      <PersistGate persistor={persistor}>\n        <div className=\"App\" style={{display: \"flex\", flexDirection: \"column\"}}>\n          <div className = \"appContent\" style={{height: \"100vh\"}}>\n            <Plots/>\n          </div>   \n        </div>\n      </PersistGate>\n    </Provider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}