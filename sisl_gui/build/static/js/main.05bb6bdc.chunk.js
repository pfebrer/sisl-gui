(this["webpackJsonpsisl-gui-ui"]=this["webpackJsonpsisl-gui-ui"]||[]).push([[0],{1421:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),r=n(14),s=n.n(r),i=(n(531),n(532),n(88)),l=n(238),c=n(237),u=n(17),p=n(4),d={},h=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_SESSION":return console.log("REDUX: Setting current session..."),console.warn(n.session),e=n.session,console.log(e),e;case"CHANGE_SESSION_SETTINGS":return console.log("REDUX: Changing current session settings (not submitting yet)..."),e=Object(p.a)(Object(p.a)({},t),{},{settings:Object(p.a)(Object(p.a)({},t.settings),{},Object(u.a)({},n.settingKey,n.value))}),console.log(e),e;case"CLEAR_SESSION":return d;case"DEACTIVATE_PLOTABLE":return n.chosenPlots=[],e=Object(p.a)(Object(p.a)({},t),{},{plotables:Object(p.a)(Object(p.a)({},t.plotables),{},Object(u.a)({},n.plotableID,Object(p.a)(Object(p.a)({},t.plotables[n.plotableID]),{},{chosenPlots:n.chosenPlots})))});case"SET_PLOTABLE_PLOTS":return e=Object(p.a)(Object(p.a)({},t),{},{plotables:Object(p.a)(Object(p.a)({},t.plotables),{},Object(u.a)({},n.plotableID,Object(p.a)(Object(p.a)({},t.plotables[n.plotableID]),{},{chosenPlots:n.chosenPlots})))});default:return t}},m=n(16),g=n.n(m),f=n(65),b={},v=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"ADD_PLOTS":return console.log("REDUX: Storing a new plot..."),e=Object(p.a)(Object(p.a)({},t),n.newPlots),console.log(e),e;case"REMOVE_PLOT":return g.a.omit(t,[n.plotID]);case"CHANGE_PLOT_SETTINGS":console.log("REDUX: Changing plot settings (not submitting yet)...");var a=n.extraParams.plotID;return t[a]?(e=Object(p.a)(Object(p.a)({},t),{},Object(u.a)({},a,Object(p.a)(Object(p.a)({},t[a]),{},{unsubmittedSettings:Object(p.a)(Object(p.a)({},t[a].unsubmittedSettings),{},Object(u.a)({},n.settingKey,n.value))}))),console.log(e),e):(f.b.error("You are trying to change the settings of a plot that does not exist"),t);case"CLEAR_SESSION":return b;default:return t}},y={plot:void 0,tab:void 0,structs:[],plotables:[],page:"plots"},O=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_ACTIVE_PLOT":return console.log("REDUX: Setting active plot..."),e=Object(p.a)(Object(p.a)({},t),{},{plot:n.plotID}),console.log(e),e;case"SET_ACTIVE_TAB":return console.log("REDUX: Setting active tab..."),e=Object(p.a)(Object(p.a)({},t),{},{tab:n.activeTab}),console.log(e),e;case"SET_SESSION":var a=g.a.find(n.session.tabs,["id",t.tab]),o=n.session.tabs.length>0;return a?t:o?Object(p.a)(Object(p.a)({},t),{},{tab:n.session.tabs[0].id}):Object(p.a)(Object(p.a)({},t),{},{tab:null});case"SET_ACTIVE_STRUCTS":return e=Object(p.a)(Object(p.a)({},t),{},{structs:n.structs});case"SET_STRUCTURES":return Object(p.a)(Object(p.a)({},t),{},{structs:[]});case"DEACTIVATE_STRUCT":var r=Array.isArray(n.structID)?n.structID:[n.structID];return e=Object(p.a)(Object(p.a)({},t),{},{structs:t.structs.filter((function(e){return!r.includes(e)}))});case"SET_ACTIVE_PAGE":return e=Object(p.a)(Object(p.a)({},t),{},{page:n.pageName});case"SET_ACTIVE_PLOTABLES":return e=Object(p.a)(Object(p.a)({},t),{},{plotables:n.plotables});case"SET_PLOTABLES":return Object(p.a)(Object(p.a)({},t),{},{plotables:[]});case"DEACTIVATE_PLOTABLE":var s=Array.isArray(n.plotableID)?n.plotableID:[n.plotableID];return e=Object(p.a)(Object(p.a)({},t),{},{plotables:t.plotables.filter((function(e){return!s.includes(e)}))});case"CLEAR_SESSION":return y;default:return t}},E=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{plots:{}},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"START_LOADING_PLOT":return console.log("REDUX: Setting active plot..."),e=Object(p.a)(Object(p.a)({},t),{},{plots:Object(p.a)(Object(p.a)({},t.plots),{},Object(u.a)({},n.plot.id,Object(p.a)(Object(p.a)({},n.plot),{},{from:new Date})))}),console.log(e),e;case"END_LOADING_PLOT":return console.log("REDUX: Changing plot settings (not submitting yet)..."),e=Object(p.a)(Object(p.a)({},t),{},{plots:g.a.omit(t.plots,[n.plotID])}),console.log(e),e;default:return t}},j=n(490),S=n.n(j);function C(e,t,n){return Object(c.a)({key:e,storage:S.a,whitelist:t},n)}var T=Object(i.b)({session:h,plots:v,loading:C("loading",["plots"],E),active:C("active",["tab","plot"],O),browser:Object(l.a)({small:600,medium:992})}),P=function(e){return e.active.structs.map((function(t){return e.session.structures[t]}))},k=function(e){return e.active.plotables.map((function(t){return e.session.plotables[t]}))},A=function(e){return e.plots[e.active.plot]},w=n(25),_=n(491),I=n(20),D=n(8),x=n(11),L=n(9),G=n(10),N=n(74),M=n(492),R=n.n(M),V=n(1471),z=n(102),B=n(115),F=n(42),U=n(0),H=function(e){return{type:"SET_SESSION",session:e}},K=function(e,t){return{type:"ADD_PLOTS",newPlots:e,tabsIDs:t}},W=function(e){return{type:"SET_STRUCTURES",newStructures:e}},q=function(e){return{type:"SET_SESSION_TABS",tabs:e}},Y=function(e){return{type:"SET_ACTIVE_PLOT",plotID:e?"string"==typeof e?e:e.id:void 0}},X=function(e){return{type:"SET_ACTIVE_TAB",activeTab:e}},Q=function(e){return{type:"SET_ACTIVE_STRUCTS",structs:e}},Z=function(e){return{type:"DEACTIVATE_STRUCT",structID:e}},J=function(e){return{type:"START_LOADING_PLOT",plot:e}},$=function(e){return{type:"END_LOADING_PLOT",plotID:e}},ee=function(e){return{type:"SET_ACTIVE_PAGE",pageName:e}},te=function(e){return{type:"SET_ACTIVE_PLOTABLES",plotables:e}},ne=function(e){return{type:"DEACTIVATE_PLOTABLE",plotableID:e}},ae=n(493),oe=n.n(ae),re=n(494),se=n(1479),ie=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){var e=this,t=this.props.value||"",n=this.props.label||(this.props.setting?this.props.setting.name:"");return o.a.createElement(se.a,Object.assign({variant:"outlined",value:t,onChange:function(t){return e.props.onChange(t.target.value)},label:n,style:Object(p.a)({width:"100%"},this.props.style)},this.props.inputField?this.props.inputField.params:this.props.params))}}]),n}(a.Component),le=n(1470),ce=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(e){var a;return Object(D.a)(this,n),(a=t.call(this,e)).state={value:""},e.controlClose&&e.controlClose(e.closeToast),a}return Object(x.a)(n,[{key:"componentWillUnmount",value:function(){this.props.callback(this.state.value)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("div",{style:{paddingBottom:10}},this.props.content),o.a.createElement(ie,{value:this.state.value,onChange:function(t){e.setState({value:t})},label:this.props.inputProps.label}),o.a.createElement(le.a,{onClick:this.props.closeToast},"Submit"))}}]),n}(a.Component),ue=function(e,t,n){Object(f.b)(o.a.createElement(ce,Object.assign({content:e,callback:t},n)),{autoClose:!1,closeOnClick:!1,onClose:function(e){console.warn(e)}})},pe=ue,de=new function e(){var t=this;Object(D.a)(this,e),this.connect=function(e){e&&(t.apiAddress=e),t.externalListeners={},t.socket=oe()(t.apiAddress),t.listeners.forEach((function(e){var n;return(n=t.socket).on.apply(n,Object(I.a)(e))})),t.connectionTimeOut=setTimeout((function(){var e,n,a;e=t.apiAddress,n=function(e){e&&(t.apiAddress=e.trim()),t.socket.connected||(t.disconnect(),t.connect())},a={controlClose:function(e){return t.onConnect(e)}},ue(o.a.createElement("div",null,o.a.createElement("div",null,"Couldn't connect to "+e),o.a.createElement("div",null,"Do you want to specify a different address for the API?"),o.a.createElement("div",null," (http(s)://host:port)")),n,Object(p.a)({inputProps:{label:"New address"}},a))}),3e3),t.socket.connect()},this.disconnect=function(){t.socket.disconnect()},this.on=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var o;t.socket&&(o=t.socket).on.apply(o,n);t.listeners.push(n)},this.onConnect=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];t.on.apply(t,["connect"].concat(n))},this.onDisconnect=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];t.on.apply(t,["disconnect"].concat(n))},this.setupListeners=function(){t.on("connect",(function(){clearTimeout(t.connectionTimeOut),t.requestSession()})),t.on("disconnect",(function(e){console.warn(e),t.disconnect(),t.connect()})),t.on("auth_required",t.askForAuth),t.on("logged_in",t.requestSession),t.on("error",(function(e){return t.handleError(e,"socket")})),t.on("server_error",(function(e){return t.handleError(e,"server")})),t.on("current_session",(function(e){console.error(e),document.dispatchEvent(new CustomEvent("syncWithSession",{detail:{session:e}}))})),t.on("loading_plot",(function(e){document.dispatchEvent(new CustomEvent("loadingPlot",{detail:e}))})),t.on("plot",(function(e){document.dispatchEvent(new CustomEvent("plot",{detail:{plot:e}}))}))},this.handleError=function(e,t){"server"===t?f.b.error("THERE WAS A PYTHON ERROR:\n"+e):f.b.error(e)},this.askForAuth=function(){t.authenticating||(t.authenticating=!0,pe((function(e){t.socket.emit("login",e),t.authenticating=!1})))},this.requestSession=function(e){t.socket.emit("request_session",e)},this.loadSession=function(e){t.requestSession(e)},this.newProcessId=re.v4,this._sessionMethod=function(e,n,a){for(var o,r=arguments.length,s=new Array(r>3?r-3:0),i=3;i<r;i++)s[i-3]=arguments[i];(o=t.socket).emit.apply(o,["apply_method_on_session",e,n].concat(s))},this.updateSessionSettings=function(e){t._sessionMethod("update_settings",e)},this.undoSessionSettings=function(){t._sessionMethod("undo_settings")},this.addTab=function(e){t._sessionMethod("add_tab",{name:e})},this.removeTab=function(e){t._sessionMethod("remove_tab",{tabID:e})},this.updateTab=function(e,n){t._sessionMethod("update_tab",{tabID:e,newParams:n})},this.setTabLayouts=function(e,n){t.updateTab(e,{layouts:n})},this.saveSession=function(e){t._sessionMethod("save",{path:e})},this.getPlot=function(e){document.dispatchEvent(new CustomEvent("updatingPlot",{detail:{plot_id:e}})),t.socket.emit("get_plot",e)},this.newPlot=function(e){t._sessionMethod("new_plot",e)},this.removePlot=function(e){t._sessionMethod("remove_plot",null,null,e)},this.movePlot=function(e,n){t._sessionMethod("move_plot",null,null,e,n)},this.mergePlots=function(e,n){t._sessionMethod("merge_plots",{to:n},null,e)},this._plotMethod=function(e,n,a,o){for(var r=arguments.length,s=new Array(r>4?r-4:0),i=4;i<r;i++)s[i-4]=arguments[i];t._sessionMethod.apply(t,["_run_plot_method",a,o,e,n].concat(s))},this.showPlotFullScreen=function(e){t._plotMethod(e,"show")},this.updatePlotSettings=function(e,n){t._plotMethod(e,"update_settings",n)},this.undoPlotSettings=function(e){t._plotMethod(e,"undo_settings")},this.updatePlotLayout=function(e,n){t._plotMethod(e,"update_layout",n)},this.updateFigure=function(e,n){var a=n.layout,o=n.data,r=n.frames,s=n.overwrite;t._plotMethod(e,"update",{layout:a,data:o,frames:r,overwrite:s})},this.callPlotShortcut=function(e,n){t._plotMethod(e,"call_shortcut",null,null,n)},this.dispatchPlotEvent=function(e,n,a){t._plotMethod(e,"dispatch_event",a,null,n)},this.savePlot=function(e,n){t._plotMethod(e,"save",{path:n})},this.sendFile=function(e){console.log("TRYING TO SEND"),t.socket.emit("upload_file",e,e.name)},this.apiAddress="http://localhost:4000",this.user=void 0,this.listeners=[],this.setupListeners(),this.connect(),document.api=this},he=n(51),me={SHOW_AVAIL_HOTKEYS:{name:"Show available hotkeys",sequence:"shift+?"},GO_TO_SETTINGS:{name:"Go to settings",sequence:"shift+s"},GO_TO_DASHBOARD:{name:"Go to the plot's dashboard",sequence:"shift+d"},GO_TO_MOLECULEVIEWER:{name:"Go to the molecule viewer",sequence:"shift+m"},SAVE_SESSION:{name:"Save session",sequences:["ctrl+shift+s","ctrl+alt+s"]},LOAD_SESSION:{name:"Load session",sequences:["ctrl+shift+l","ctrl+alt+l"]}},ge={global:{MOVE_TO_NEXT_TAB:{name:"Move to next tab",sequence:"shift+t+right"},MOVE_TO_PREVIOUS_TAB:{name:"Move to previous tab",sequence:"shift+t+left"},NEW_TAB:{name:"New tab",sequence:"shift+t",action:"keyup"},TRY:"shift+t+r"}},fe={global:{MOVE_TO_NEXT_TAB:{name:"Move to next tab",sequence:"shift+right"},MOVE_TO_PREVIOUS_TAB:{name:"Move to previous tab",sequence:"shift+left"}}},be={GO_TO_PLOT_SETTINGSEDITING:{name:"Edit current plot's settings",sequence:"s"},GO_TO_PLOT_LAYOUTEDITING:{name:"Edit current plot's layout",sequence:"e"},GO_TO_PLOT_METHODS:{name:"Go to current plot methods",sequence:"m"},FULL_SCREEN:{name:"See current plot in full screen in a different browser's tab",sequence:"f"},REMOVE_PLOT:{name:"Remove current plot",sequences:["del","backspace"]},UNDO_PLOT_SETTINGS:{name:"Undo current plot settings",sequence:"ctrl+z"}},ve={SUBMIT_SETTINGS:{name:"Submit this group's settings",sequence:"shift+enter"}},ye={global:{UNDO_SETTINGS:{name:"Undo settings",sequence:"ctrl+z"},SUBMIT_ALL_SETTINGS:{name:"Submit all settings",sequence:"shift+enter"}}},Oe=n(1425),Ee=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(e){var a;return Object(D.a)(this,n),(a=t.call(this,e)).hotKeys=function(){return document.querySelectorAll(".plotCardHotKeys")},a.hotKeysHandlers={GO_TO_PLOT_LAYOUTEDITING:function(){return a.goToPlotLayoutEditing()},GO_TO_PLOT_SETTINGSEDITING:function(){return a.goToPlotSettingsEditing()},GO_TO_PLOT_METHODS:function(){return a.goToPlotMethods()},FULL_SCREEN:function(){return a.showPlotFullScreen()},UNDO_PLOT_SETTINGS:function(){return a.undoSettings()},REMOVE_PLOT:function(){return a.removePlot()}},a.callPlotShortcut=function(e){f.b.warn("Applying "+a.props.plot.shortcuts[e].name+" shortcut"),de.callPlotShortcut(a.props.plot.id,e)},a.handlePlotClick=function(e){var t=e.points,n=g.a.omit(t[0],["data","fullData","xaxis","yaxis"]);console.warn(n),de.dispatchPlotEvent(a.props.plot.id,"click",n)},a.handlePlotRelayout=function(e){if(!e["scene.camera"]){var t=Object.keys(e);t.includes("autosize")||0!==t.length&&de.updatePlotLayout(a.props.plot.id,e)}},a.undoSettings=function(){de.undoPlotSettings(a.props.plot.id)},a.removePlot=function(){de.removePlot(a.props.plot.id)},a.goToPlotSettingsEditing=function(){a.setPlotAsActive(),a.props.setActivePage("plotTweaking")},a.goToPlotLayoutEditing=function(){a.setPlotAsActive(),a.props.setActivePage("plotLayoutEditor")},a.goToPlotMethods=function(){a.setPlotAsActive(),a.props.setActivePage("plotMethods")},a.setPlotAsActive=function(){a.props.setActivePlot(a.props.plot)},a.togglePlotAsActive=function(){a.isActivePlot?a.props.setActivePlot(void 0):a.setPlotAsActive()},a.savePlot=function(){var e=prompt("Please provide the path to save the plot.\n\nRoot directory:\n"+a.props.session.settings.rootDir);e&&de.savePlot(a.props.plot.id,e)},a.showPlotFullScreen=function(){de.showPlotFullScreen(a.props.plot.id)},a.state={isLoading:!1},a}return Object(x.a)(n,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("plotResize",(function(t){t.detail.id!==e.props.plot.id&&"all"!==t.detail.id||e.setState({cou:Math.random()})}))}},{key:"render",value:function(){var e=this;if(this.state.isLoading||!this.props.plot)return o.a.createElement(V.a,{className:"plotcard",style:{borderRadius:15}},o.a.createElement("div",null,"We are working hard to load your plot."));var t=this.props.plot.figure.layout,n=t.paper_bgcolor||"white",a=Object(p.a)(Object(p.a)({},be),{},{TESTING:"shift+r"},Object.keys(this.props.plot.shortcuts).reduce((function(t,n){var a=e.props.plot.shortcuts[n];return["ctrl+z","ctrl+alt+l"].includes(n)||(t[a.name.replace(/ /g,"_")]=Object(p.a)({sequence:n},a)),t}),{})),r=Object(p.a)(Object(p.a)({},this.hotKeysHandlers),Object.keys(this.props.plot.shortcuts).reduce((function(t,n){var a=e.props.plot.shortcuts[n];return["ctrl+z","ctrl+alt+l"].includes(n)||(t[a.name.replace(/ /g,"_")]=function(){return e.callPlotShortcut(n)}),t}),{})),s=(this.isActivePlot,{});return o.a.createElement(he.HotKeys,{className:"plotCardHotKeys",component:V.a,elevation:this.props.elevation||1,keyMap:a,handlers:r,allowChanges:!0,style:Object(p.a)(Object(p.a)({width:"100%",height:"100%",display:"flex",flexDirection:"column",borderRadius:3,overflow:"hidden",background:n,paddingTop:5},s),this.props.style)},o.a.createElement("div",{style:{flex:1}},o.a.createElement(R.a,{ref:function(t){e.plotlyRef=t},useResizeHandler:!0,style:{width:"100%",height:"100%"},data:this.props.plot.figure.data,layout:Object(p.a)({autosize:!0},t),frames:this.props.plot.figure.frames,onClick:this.handlePlotClick,onRelayout:this.handlePlotRelayout,onUpdate:function(e){},config:{editable:!0,responsive:!0}})),o.a.createElement("div",{style:{display:"flex",paddingLeft:10,paddingRight:20,background:n,marginBottom:5},className:"card-action"},o.a.createElement(U.b.Provider,{value:{size:25,style:{margin:5},color:"#6eb6ff"}},o.a.createElement("div",{style:{flex:1,textAlign:"left"}},o.a.createElement(Oe.a,{size:"small","data-tip":"Full screen (f)",onClick:this.showPlotFullScreen},o.a.createElement(z.d,null))),o.a.createElement("div",null,o.a.createElement(Oe.a,{size:"small","data-tip":"Settings (s)",onClick:this.goToPlotSettingsEditing},o.a.createElement(F.l,null)),o.a.createElement(Oe.a,{size:"small","data-tip":"Methods (m)",onClick:this.goToPlotMethods},o.a.createElement(B.c,null)),o.a.createElement(Oe.a,{size:"small","data-tip":"Edit layout (e)",onClick:this.goToPlotLayoutEditing},o.a.createElement(z.b,null)),o.a.createElement(Oe.a,{size:"small","data-tip":"Save plot (coming soon)"},o.a.createElement(B.d,{color:"#ccc"})),o.a.createElement(Oe.a,{size:"small","data-tip":"Export data (coming soon)"},o.a.createElement(z.c,{color:"#ccc"})),o.a.createElement(Oe.a,{size:"small","data-tip":"Remove (supr)",onClick:this.removePlot},o.a.createElement(z.a,{color:"red"})))),o.a.createElement(N.a,{disable:!!this.props.session.settings&&!this.props.session.settings.showTooltips})))}},{key:"isActivePlot",get:function(){return this.props.plot.id===this.props.active.plot}}]),n}(a.Component),je={setSessionTabs:q,setActivePlot:Y,removePlot:function(e,t){return{type:"REMOVE_PLOT",plotID:e,tabID:t}},setActivePage:ee,addPlots:K},Se=Object(w.b)((function(e){return{plots:e.plots,active:e.active,session:e.session}}),je)(Ee),Ce=n(319),Te=n(1424),Pe=(n(580),n(581),function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){var e;Object(D.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).updateTabs=function(e){document.dispatchEvent(new CustomEvent("updateTabs",{detail:{tabs:e}}))},e.updateTabParams=function(e,t){de.updateTab(e,t)},e.removeTab=function(e){de.removeTab(e)},e.updateTabName=function(t){t.target.blur(),e.updateTabParams(t.target.id,{name:t.target.textContent})},e}return Object(x.a)(n,[{key:"render",value:function(){var e=this,t=this.props.tab,n=t.id,a=t.name,r=n===this.props.active.tab;return o.a.createElement("div",{key:n,className:r?"active plotTab":"plotTab",onClick:r?null:function(){return e.props.setActiveTab(n)}},o.a.createElement("div",{id:n,contentEditable:r,onBlur:this.updateTabName,onKeyUp:function(t){13===t.keyCode&&e.updateTabName(t)}},a),r?o.a.createElement("div",{className:"removeTabBut",onClick:function(){return e.removeTab(n)}},o.a.createElement(F.j,{size:20})):null)}}]),n}(a.Component)),ke={setActiveTab:X},Ae=Object(w.b)((function(e){return{active:e.active,tabs:e.tabs}}),ke)(Pe),we=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){var e;Object(D.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).hotKeysHandlers={MOVE_TO_NEXT_TAB:function(){return e.moveThroughTabs("right")},MOVE_TO_PREVIOUS_TAB:function(){return e.moveThroughTabs("left")},NEW_TAB:function(){return e.newTab()},TRY:function(){return console.warn("YES")}},e.moveThroughTabs=function(t){var n,a=e.props.tabs,o=g.a.findIndex(a,["id",e.props.active.tab]);"left"===t?n=0!==o?o-1:a.length-1:"right"===t&&(n=o!==a.length-1?o+1:0),e.props.setActiveTab(a[n].id)},e.updateTabs=function(e){document.dispatchEvent(new CustomEvent("updateTabs",{detail:{tabs:e}}))},e.newTab=function(){de.addTab()},e.noTabsMessage=function(){return o.a.createElement("div",{style:{paddingLeft:20}},o.a.createElement("span",{style:{color:"darkred"}},"You don't seem to have any tab. "),"That's wierd, but if that's what you want...")},e}return Object(x.a)(n,[{key:"render",value:function(){var e=this.props.tabs||[];return o.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",marginTop:10,marginBottom:5}},o.a.createElement(he.GlobalHotKeys,{keyMap:ge.global,handlers:this.hotKeysHandlers}),0===e.length?this.noTabsMessage():e.map((function(e){return o.a.createElement(Ae,{tab:e})})),o.a.createElement(F.a,{onClick:this.newTab,"data-tip":"New tab","data-place":"right",color:"green",size:20,className:"newTabIcon"}))}}]),n}(a.Component),_e={setActiveTab:X},Ie=Object(w.b)((function(e){return{tabs:e.session.tabs,active:e.active}}),_e)(we),De=Object(Ce.WidthProvider)(Ce.Responsive),xe={backgroundColor:"#757eff",paddingTop:5,marginTop:-5},Le=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(e){var a;return Object(D.a)(this,n),(a=t.call(this,e)).state={currentBreakpoint:"lg",compactType:"vertical",mounted:!1,layouts:{lg:[]}},a.emptyDashboard=function(){return null},a.noTabsMessage=function(){return null},a.noPlotsMessage=function(){return o.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"}},o.a.createElement("div",{style:{fontSize:"5em",fontWeight:"bold"}},"This is the plots dashboard."),o.a.createElement("div",{style:{fontSize:"1.2em"}},"We would like to display your plots here, but currently you don't seem to have any"),o.a.createElement("div",{style:{backgroundColor:"white",fontSize:"2em",margin:20,padding:20,paddingLeft:50,paddingRight:50,borderRadius:70}}," You can try to create one by clicking on your structures"))},a.toggleSelected=function(e){var t;t=a.state.selected.includes(e)?a.state.selected.filter((function(t){return t!==e})):[].concat(Object(I.a)(a.state.selected),[e]),a.setState({selected:t})},a.onBreakpointChange=function(e){document.dispatchEvent(new CustomEvent("plotResize",{detail:{id:"all"}}))},a.onResizeStop=function(e,t,n){document.dispatchEvent(new CustomEvent("plotResize",{detail:{id:n.i,higher:t.h>n.h}}))},a.shouldComponentUpdate=function(e){if(!a._plotsInLayout)return!0;var t,n=e.active.tab!==a.props.active.tab;if(!n){var o=g.a.find(a.props.tabs,["id",a.props.active.tab]),r=g.a.find(e.tabs,["id",e.active.tab]);if(!o||!r)return!0;if(!o.layouts||!r.layouts)return!0;if(g.a.isEqual(o.layouts,r.layouts))return!0;if(!g.a.isEqual(a._plotsInLayout,r.plots))return!0;t=!g.a.isEqual(o.plots,r.plots)}return n||t},a.onLayoutChange=function(e,t){a.props.onLayoutChange(e,t),de.setTabLayouts(a.props.active.tab,t)},a.onDrop=function(e){alert("Element parameters: ".concat(JSON.stringify(e)))},a.getLayout=function(){if(!a.props.active.tab)return a.noTabsMessage();var e=g.a.find(a.props.tabs,["id",a.props.active.tab]);if(!e)return a.noTabsMessage();if(0===e.plots.length)return a.noPlotsMessage();var t=e.plots.map((function(e){return a.props.plots[e]}));if((t=t.filter((function(e){return e}))).length!==e.plots.length)return null;var r=e.layouts;return r.lg.length!==t.length&&(r.lg=t.map((function(e){return g.a.find(r.lg,["i",e.id])||n.newPlotLayout(e,r)}))),a._plotsInLayout=e.plots,o.a.createElement(De,Object.assign({},a.props,{layouts:r,onBreakpointChange:a.onBreakpointChange,onLayoutChange:a.onLayoutChange,onDrop:a.onDrop,onResizeStop:a.onResizeStop,draggableCancel:".infolayer, .draglayer, .shapelayer, #scene",measureBeforeMount:!1,useCSSTransforms:a.state.mounted,compactType:a.state.compactType,preventCollision:!a.state.compactType,rowHeight:10}),a.generateDOM(r.lg,t,a.state.selected,a.toggleSelected))},a.mergePlots=function(e){de.mergePlots(a.state.selected,e),a.setState({selected:[]})},a.removePlots=function(){a.state.selected.forEach((function(e){return de.removePlot(e)})),a.setState({selected:[]})},a.movePlots=function(){var e=g.a.findIndex(a.props.tabs,["id",a.props.active.tab])+1;a.props.tabs.length===e&&(e=0),console.warn(e),a.state.selected.forEach((function(t){return de.movePlot(t,a.props.tabs[e].id)})),a.setState({selected:[]})},a.renderSelectedManager=function(){var e=a.state.selected.length;if(0===e)return null;return o.a.createElement(Te.a,{style:{padding:10,marginBottom:10},elevation:3},"You have ".concat(e," plots selected. What do you want to do?"),o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},e>1?[{to:"multiple"},{to:"subplots"},{to:"animation"}].map((function(e){return o.a.createElement(le.a,{onClick:function(){return a.mergePlots(e.to)}},"Merge as ".concat(e.to))})):null,o.a.createElement(le.a,{onClick:a.removePlots},"Remove"),o.a.createElement(le.a,{onClick:a.movePlots},"Move to other tab")))},a._plotsInLayout=!1,a.state={selected:[]},a}return Object(x.a)(n,[{key:"componentDidMount",value:function(){this.setState({mounted:!0}),this.props.setActivePlot(void 0)}},{key:"generateDOM",value:function(e,t,n,a){return g.a.map(e,(function(e,r){return o.a.createElement("div",{key:t[r].id,onClick:function(e){return e.ctrlKey?a(t[r].id):null}},o.a.createElement(Se,{plot:t[r],style:n.includes(t[r].id)?xe:{}}))}))}},{key:"render",value:function(){var e=o.a.createElement(Ie,null),t=Object(p.a)(Object(p.a)({},this.hotKeysHandler),g.a.pick(e.hotKeysHandler,["MOVE_TO_NEXT_TAB","MOVE_TO_PREVIOUS_TAB"]));return o.a.createElement("div",{style:Object(p.a)({padding:10},this.props.style),className:"scrollView"},o.a.createElement(he.GlobalHotKeys,{keyMap:fe.global,handlers:t}),this.renderSelectedManager(),this.getLayout())}}]),n}(o.a.Component);Le.defaultProps={className:"layout",rowHeight:30,onLayoutChange:function(){},cols:{lg:12,md:12,sm:6,xs:4,xxs:2}},Le.newPlotLayout=function(e,t){return{x:e.grid_dims[0]*t.lg.length,y:2,w:e.grid_dims[0],h:e.grid_dims[1],i:e.id}};var Ge={setSessionTabs:q,setTabPlots:function(e,t){return{type:"SET_TAB_PLOTS",tabID:e,plots:t}},setActivePlot:Y},Ne=Object(w.b)((function(e){return{plots:e.plots,structures:e.session.structures,tabs:e.session.tabs,active:e.active,session:e.session}}),Ge)(Object(he.withHotKeys)(Le)),Me=(n(582),function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(e){var a;return Object(D.a)(this,n),(a=t.call(this,e)).state={},a}return Object(x.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"structTag "+(this.props.struct.selected?"active":""),onClick:this.props.toggleStruct,"data-tip":this.props.struct.path,"data-effect":"solid"},o.a.createElement("div",null,this.props.struct.name.replace(".fdf","")),o.a.createElement("div",{style:{fontSize:"0.7em",color:"gray"}},".../"+this.props.struct.path.split("/").slice(-2,-1)[0]))}}]),n}(a.Component)),Re=n(47),Ve=n(1482),ze=n(1483),Be=n(1480),Fe=n(1472),Ue=Object(Fe.a)((function(e){return{root:{transform:"translateZ(0px)",flexGrow:1},exampleWrapper:{position:"relative",marginTop:e.spacing(3)},radioGroup:{margin:e.spacing(1,0)},speedDial:{position:"absolute","&.MuiSpeedDial-directionUp, &.MuiSpeedDial-directionLeft":{bottom:e.spacing(2),right:e.spacing(2)},"&.MuiSpeedDial-directionDown, &.MuiSpeedDial-directionRight":{top:e.spacing(2),left:e.spacing(2)}}}}));function He(e){var t=Ue(),n=o.a.useState("left")[0],a=o.a.useState(!1),r=Object(Re.a)(a,2),s=r[0],i=r[1],l=o.a.useState(!1)[0];return o.a.createElement(Ve.a,{ariaLabel:"SpeedDial example",className:t.speedDial,hidden:l,icon:o.a.createElement(ze.a,null),onClose:function(){i(!1)},onOpen:function(){i(!0)},open:s,direction:n},e.actions.map((function(e){return o.a.createElement(Be.a,{key:e.name,icon:e.icon,tooltipTitle:e.tip||e.name,tooltipPlacement:"top",onClick:e.onClick,href:e.href})})))}var Ke=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){var e;Object(D.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).hotKeysHandler={SAVE_SESSION:function(){return e.saveCurrentSession()},LOAD_SESSION:function(){return e.loadSession()}},e.syncWithSession=function(e){document.dispatchEvent(new CustomEvent("syncWithSession",{detail:{session:e}}))},e.showPage=function(t){e.props.setActivePage(t)},e.saveCurrentSession=function(){var t=prompt("Please provide the path to save the session.\n\nRoot directory:\n"+e.props.session.settings.rootDir);t&&de.saveSession(t)},e.loadSession=function(){var t=prompt("Please provide the path of the saved session.\n\nRoot directory:\n"+e.props.session.settings.rootDir);t&&de.loadSession(t)},e}return Object(x.a)(n,[{key:"render",value:function(){var e=[{name:"Save session",icon:o.a.createElement(B.d,{size:20}),onClick:this.saveCurrentSession},{name:"Load session",icon:o.a.createElement(z.e,{size:20}),onClick:this.loadSession}];return o.a.createElement(He,{actions:e})}}]),n}(a.Component),We=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){return o.a.createElement(le.a,{"data-tip":this.props.tooltip,style:this.props.style,floating:!0,icon:this.props.icon,onClick:this.props.onClick,className:this.props.className})}}]),n}(a.Component),qe={setActivePage:ee},Ye=Object(w.b)((function(e){return{session:e.session,active:e.active}}),qe)(Ke),Xe=n(177),Qe={settings:{name:"Settings",icon:o.a.createElement(Xe.c,{size:20}),color:"grey",hotKey:"Shift + s"},plots:{name:"Dashboard",icon:o.a.createElement(F.c,null),color:"grey",hotKey:"Shift + d"}},Ze=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){var e;Object(D.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).showPage=function(){e.props.setActivePage(e.props.to)},e}return Object(x.a)(n,[{key:"render",value:function(){var e=Qe[this.props.to];return o.a.createElement(We,Object.assign({icon:e.icon,className:e.color,tooltip:"Go to "+this.props.to+" ("+e.hotKey+")",onClick:this.showPage},this.props))}}]),n}(a.Component),Je={setActivePage:ee},$e=Object(w.b)(null,Je)(Ze),et=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(e){var a;return Object(D.a)(this,n),(a=t.call(this,e)).state={},a}return Object(x.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"plotableTag "+(this.props.plotable.selected?"active":""),onClick:this.props.togglePlotable,"data-tip":this.props.plotable.path,"data-effect":"solid"},o.a.createElement("div",null,this.props.plotable.name),o.a.createElement("div",{style:{fontSize:"0.7em",color:"gray"}},".../"+this.props.plotable.path.split("/").slice(-2,-1)[0]))}}]),n}(a.Component);var tt=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(e){var a;return Object(D.a)(this,n),(a=t.call(this,e)).togglePlotInitializer=function(e,t){var n,a;0!==[].concat(Object(I.a)(e),Object(I.a)(t)).length?n=!0:a=!0,document.dispatchEvent(new CustomEvent("togglePlotInitializer",{detail:{forceShow:n,forceHide:a}}))},a.selectStructs=function(e){a.props.setActiveStructs(e),a.togglePlotInitializer(e,a.selectedPlotables)},a.selectPlotables=function(e){a.props.setActivePlotables(e),a.togglePlotInitializer(a.selectedStructs,e)},a.toggleStruct=function(e){var t=e.id;a.selectStructs(g.a.xor(a.selectedStructs,[t]))},a.togglePlotable=function(e){var t=e.id;a.selectPlotables(g.a.xor(a.selectedPlotables,[t]))},a.toggleStructDisplay=function(){a.setState({displayStructures:!a.state.displayStructures})},a.togglePlotablesDisplay=function(){a.setState({displayPlotables:!a.state.displayPlotables})},a.toggleAlphabeticSorting=function(){var e,t=(e={},Object(u.a)(e,!1,"asc"),Object(u.a)(e,"asc","desc"),Object(u.a)(e,"desc",!1),e);a.setState({alphabeticSorting:t[a.state.alphabeticSorting]})},a.toggleSearchByFolder=function(){a.setState({searchByFolder:!a.state.searchByFolder})},a.toggleSelectedSorting=function(){a.setState({selectedSorting:!a.state.selectedSorting})},a.toggleAll=function(){var e=Object.keys(a.filterStructs()),t=0===g.a.intersection([].concat(Object(I.a)(a.selectedStructs),Object(I.a)(a.selectedPlotables)),e).length,n=g.a.intersection(Object.keys(a.props.structures),e),o=g.a.intersection(Object.keys(a.props.plotables),e);a.selectStructs(t?[].concat(Object(I.a)(n),Object(I.a)(a.selectedStructs)):a.selectedStructs.filter((function(e){return!n.includes(e)}))),a.selectPlotables(t?[].concat(Object(I.a)(o),Object(I.a)(a.selectedPlotables)):a.selectedPlotables.filter((function(e){return!o.includes(e)})))},a.filterStructs=function(e){e=e||a.state.searchString,console.warn(e),e=e.includes("*")||e.includes("?")?e:"*"+e+"*";var t={},n=[a.state.displayStructures,a.state.displayPlotables];return[a.props.structures||[],a.props.plotables||[]].forEach((function(o,r){if(n[r]){var s=1===r,i=Object.keys(o).reduce((function(t,n){var r,i=o[n],l=a.state.searchByFolder?i.path.split("/").slice(-2,-1)[0]:i.name.replace(".fdf","");return r=l,new RegExp("^".concat(e.replace(/\*/g,".*").replace(/\?/g,"."),"$"),"i").test(r)&&(t[n]=Object(p.a)(Object(p.a)({},i),{},{selected:[].concat(Object(I.a)(a.selectedStructs),Object(I.a)(a.selectedPlotables)).includes(n),isPlotable:s,id:n})),t}),{});t=Object(p.a)(Object(p.a)({},t),i)}})),t},a.newSearchString=function(e){a.setState({searchString:e})},a.noStructuresMessage=function(){return o.a.createElement("div",null,o.a.createElement("div",{style:{color:"darkred"}},"No structures in the search scope right now."),o.a.createElement("div",null,"Try to change file system settings or initialize the GUI from a different directory"),o.a.createElement($e,{to:"settings",style:{marginTop:10}}))},a.noMatchingStructuresMessage=function(){return o.a.createElement("div",null,o.a.createElement("div",{style:{color:"darkred"}},"No structure that matches your search."),o.a.createElement("div",null,"Try to change file system settings or initialize the GUI from a different directory"),o.a.createElement($e,{to:"settings",style:{marginTop:10}}))},a.state={searchString:"",alphabeticSorting:!1,selectedSorting:!1,searchByFolder:!1,displayStructures:!0,displayPlotables:!1},a}return Object(x.a)(n,[{key:"render",value:function(){var e=this,t=this.filterStructs();return this.state.alphabeticSorting&&(t=g.a.orderBy(t,"name",this.state.alphabeticSorting)),this.state.selectedSorting&&(t=g.a.orderBy(t,"selected","desc")),o.a.createElement("div",{style:Object(p.a)({height:"100vh",overflow:"hidden",display:"flex",flexDirection:"column",backgroundColor:"white"},this.props.style)},o.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginTop:20,marginBottom:20}},o.a.createElement(ie,{label:"Search string",autocomplete:"off",placeholder:"Enter your search string...",style:{marginRight:10},value:this.state.searchString,onChange:this.newSearchString}),o.a.createElement("div",{"data-tip":"Search by folder",className:"structPickerToggle "+(this.state.searchByFolder?"active":""),onClick:this.toggleSearchByFolder,style:{cursor:"pointer"}},this.state.searchByFolder?o.a.createElement(F.f,null):o.a.createElement(F.g,null))),o.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:5}},o.a.createElement("span",{"data-tip":"Show structures",className:"structPickerToggle "+(this.state.displayStructures?"active":""),onClick:this.toggleStructDisplay,style:{cursor:"pointer"}},"Struct"),o.a.createElement("span",{"data-tip":"Show plotables",className:"structPickerToggle "+(this.state.displayPlotables?"active":""),onClick:this.togglePlotablesDisplay,style:{cursor:"pointer"}},"Plotables")),o.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:5}},o.a.createElement("span",{className:"structPickerToggle "+(this.state.alphabeticSorting?"active":""),onClick:this.toggleAlphabeticSorting,style:{cursor:"pointer"}},"A-Z"),o.a.createElement("span",{"data-tip":"Show selected first",className:"structPickerToggle "+(this.state.selectedSorting?"active":""),onClick:this.toggleSelectedSorting,style:{cursor:"pointer"}},"sel"),o.a.createElement("span",{className:"structPickerToggle",onClick:this.toggleAll,style:{cursor:"pointer"}},"All")),0===Object.keys(Object(p.a)(Object(p.a)({},this.props.structures),this.props.plotables)).length?this.noStructuresMessage():0===Object.values(t).length?this.noMatchingStructuresMessage():null,o.a.createElement("div",{className:"scrollView"},Object.values(t).map((function(t){return t.isPlotable?o.a.createElement(et,{id:t.id,plotable:t,togglePlotable:function(){return e.togglePlotable(t)}}):o.a.createElement(Me,{id:t.id,struct:t,toggleStruct:function(){return e.toggleStruct(t)}})}))))}},{key:"selectedStructs",get:function(){return this.props.activeStructs||[]}},{key:"selectedPlotables",get:function(){return this.props.activePlotables||[]}}]),n}(a.Component),nt={setActiveStructs:Q,setActivePlotables:te},at=Object(w.b)((function(e){return{activeStructs:e.active.structs,activePlotables:e.active.plotables,plotables:e.session.plotables,structures:e.session.structures}}),nt)(tt),ot=n(151),rt=n(31),st=n(100),it=rt.z.ValueContainer,lt=rt.z.Placeholder,ct=function(e){var t=e.children,n=Object(ot.a)(e,["children"]);return o.a.createElement(it,n,o.a.createElement(lt,Object.assign({},n,{isFocused:n.isFocused}),n.selectProps.placeholder),o.a.Children.map(t,(function(e){return e&&e.type!==lt?e:null})))},ut=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){var e,t=this,n=this.props.options||this.props.session.plotOptions;return e=Array.isArray(this.props.value)?this.props.value.map((function(e){return g.a.find(n,["value",e])})):g.a.find(n,["value",this.props.value]),o.a.createElement(st.a,{options:n,placeholder:"Choose the plot type...",isClearable:!0,isSearchable:!0,isMulti:!0,onChange:function(e){return t.props.onChange(e?e.value||e.map((function(e){return e.value})):void 0)},value:e,components:{ValueContainer:ct},styles:{container:function(e,t){return Object(p.a)(Object(p.a)({},e),{},{marginTop:20,marginBottom:20})},valueContainer:function(e,t){return Object(p.a)(Object(p.a)({},e),{},{overflow:"visible"})},placeholder:function(e,t){return Object(p.a)(Object(p.a)({},e),{},{position:"absolute",top:t.hasValue||t.selectProps.inputValue?-15:"50%",transition:"top 0.1s, font-size 0.1s",fontSize:(t.hasValue||t.selectProps.inputValue)&&13,color:t.hasValue||t.selectProps.inputValue?"blue":"#ccc",marginLeft:t.hasValue||t.selectProps.inputValue?-5:0})}}})}}]),n}(a.Component),pt=Object(w.b)((function(e){return{tabs:e.tabs,active:e.active,session:e.session}}),null)(ut),dt=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){var e=this,t=this.props.tabs.map((function(e){return{label:e.name,value:e.id}})),n=g.a.find(t,["value",this.props.value]);return o.a.createElement(st.a,{placeholder:"Choose a tab...",options:t,defaultValue:this.props.active.tab&&g.a.find(this.props.tabs,["id",this.props.active.tab])?{label:g.a.find(this.props.tabs,["id",this.props.active.tab]).name,value:this.props.active.tab}:null,isSearchable:!0,onChange:function(t){return e.props.onChange(t?t.value:void 0)},value:n})}}]),n}(a.Component),ht=Object(w.b)((function(e){return{tabs:e.session.tabs,active:e.active}}),null)(dt),mt=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){var e=this,t=this.props.structure,n=this.props.groupActive;return o.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",marginTop:10,marginBottom:10}},o.a.createElement("div",{style:{color:"darkred",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center"},onClick:function(){return e.props.deactivateStruct(t.id)}},o.a.createElement(F.i,null)),o.a.createElement("div",{style:{cursor:n?"default":"pointer",marginRight:20,marginLeft:20,padding:10,backgroundColor:n?"whitesmoke":"#ccc",borderRadius:3},onClick:n?void 0:this.props.moveStructToActiveGroup},t.name.replace(".fdf","")),o.a.createElement("div",{"data-tip":t.path},".../"+t.path.split("/").slice(-2,-1)[0]))}}]),n}(a.Component),gt={deactivateStruct:Z,setActiveStructs:Q},ft=Object(w.b)((function(e){return{active:e.active}}),gt)(mt),bt=[{label:"Plot individually",value:"separatePlot"},{label:"Merge in single plot",value:"jointPlot"},{label:"Build animation",value:"jointAnimation"},{label:"Animation for each",value:"separateAnimation"}],vt=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){var e=this;return o.a.createElement(st.a,{options:bt,defaultValue:bt[0],placeholder:"Choose the plotting method...",isSearchable:!0,onChange:function(t){return e.props.onChange(t?t.value||t.map((function(e){return e.value})):void 0)},value:g.a.find(bt,["value",this.props.value])})}}]),n}(a.Component),yt=n(1474),Ot=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){var e=this,t=this.props.initializingOptions,n=t.tabID,a=t.plotClasses,r=t.mergeMethod,s=this.props.active?{backgroundColor:"#ccc"}:{backgroundColor:"whitesmoke"};return o.a.createElement("div",null,o.a.createElement("div",{style:{display:"flex",flexDirection:"row",margin:-4}},o.a.createElement("div",{className:"structGroupAction",style:s,onClick:this.props.splitGroup},"Split"),o.a.createElement("div",{className:"structGroupAction",style:s,onClick:this.props.removeGroup},"Remove"),this.props.active?null:o.a.createElement("div",{className:"structGroupAction",style:s,onClick:this.props.setGroupAsActive},"Mark as receptive"),o.a.createElement("div",{style:{flex:1}})),o.a.createElement(yt.a,{container:!0,spacing:1,style:Object(p.a)({transition:"all 300ms",display:"flex",flexWrap:"wrap",padding:20,marginTop:0,marginBottom:20,borderRadius:5,borderTopLeftRadius:0,justifyContent:"center",alignItems:"center"},s)},o.a.createElement(yt.a,{item:!0,sm:12,md:4,lg:3},this.props.structs.map((function(t){return o.a.createElement(ft,{structure:t,groupActive:e.props.active,moveStructToActiveGroup:function(){return e.props.moveStructToActiveGroup(t.id)}})}))),o.a.createElement(yt.a,{item:!0,sm:12,md:4,lg:3},o.a.createElement(pt,{value:a,onChange:function(t){return e.props.onInitParamChange("plotClasses",t)}})),o.a.createElement(yt.a,{item:!0,sm:12,md:4,lg:3},o.a.createElement(ht,{value:n,onChange:function(t){return e.props.onInitParamChange("tabID",t)}})),o.a.createElement(yt.a,{item:!0,sm:12,md:4,lg:3},o.a.createElement(vt,{value:r,onChange:function(t){return e.props.onInitParamChange("mergeMethod",t)}}))))}}]),n}(a.Component),Et={deactivateStruct:Z},jt=Object(w.b)(null,Et)(Ot),St=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){var e=this,t=this.props.plotable;return o.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginTop:10}},o.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},o.a.createElement("div",{style:{color:"darkred",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center"},onClick:function(){return e.props.deactivatePlotable(t.id)}},o.a.createElement(F.i,null)),o.a.createElement("div",{"data-tip":t.path,style:{marginLeft:20}},"(.../"+t.path.split("/").slice(-2,-1)[0]+")"),o.a.createElement("div",{style:{marginLeft:20,padding:10,backgroundColor:"whitesmoke",borderRadius:3}},t.name)),o.a.createElement("div",{style:{flex:1,paddingLeft:20,paddingRight:20}},o.a.createElement(pt,{options:t.plots.map((function(e){return{value:e,label:e}})),value:t.chosenPlots,onChange:function(n){return e.props.setPlotablePlots(t.id,n)}})))}}]),n}(a.Component),Ct={deactivatePlotable:ne,setPlotablePlots:function(e,t){return{type:"SET_PLOTABLE_PLOTS",plotableID:e,chosenPlots:t}}},Tt=Object(w.b)(null,Ct)(St),Pt=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(e){var a;return Object(D.a)(this,n),(a=t.call(this,e)).onStructsUpdate=function(e){var t=[],n=a.selectedStructs.filter((function(t){var n=t.id;return!e.includes(n)}));if(0===a.state.structureGroups.length)t=a.markActiveGroup(0,[a.newGroup(a.selectedStructs)]);else{var o=g.a.findIndex(a.state.structureGroups,"active"),r=a.state.structureGroups[o];t=[].concat(Object(I.a)(a.state.structureGroups.slice(0,o)),[Object(p.a)(Object(p.a)({},r),{},{structs:[].concat(Object(I.a)(r.structs),Object(I.a)(n))})],Object(I.a)(a.state.structureGroups.slice(o+1)))}t=a.cleanUnselectedFromGroups(t),g.a.find(t,"active")||(t=a.markActiveGroup(t.length-1,t)),a.setState({structureGroups:t})},a.cleanUnselectedFromGroups=function(e){return e.reduce((function(e,t){return(t=Object(p.a)(Object(p.a)({},t),{},{structs:t.structs.filter((function(e){var t=e.id;return a.props.active.structs.includes(t)}))})).structs.length>0&&e.push(t),e}),[])},a.newGroup=function(e,t){return Object(p.a)({structs:e||[],initializingOptions:{tabID:a.defaultTabID,plotClasses:[],mergeMethod:"separatePlot"}},t)},a.addGroup=function(e){var t=e.structs,n=a.markActiveGroup(a.state.structureGroups.length,[].concat(Object(I.a)(a.state.structureGroups),[a.newGroup(t)]));a.setState({structureGroups:n})},a.removeGroup=function(e){var t=a.state.structureGroups[e];if(t.structs.length>0)a.props.deactivateStruct(t.structs.map((function(e){return e.id})));else{var n=a.state.structureGroups.filter((function(t,n){return n!==e}));t.active&&(n=a.markActiveGroup(n.length-1,n)),a.setState({structureGroups:n})}},a.splitGroup=function(e){var t=a.state.structureGroups[e],n=t.structs.map((function(e){return a.newGroup([e],g.a.omit(t,["structs"]))})),o=a.state.structureGroups.filter((function(t,n){return n!==e}));o=[].concat(Object(I.a)(o.slice(0,e)),Object(I.a)(n),Object(I.a)(o.slice(e))),t.active&&(o=a.markActiveGroup(e,o)),a.setState({structureGroups:o})},a.markActiveGroup=function(e,t){return(t=t||a.state.structureGroups).map((function(t,n){return Object(p.a)(Object(p.a)({},t),{},{active:n===e})}))},a.setGroupAsActive=function(e){a.setState({structureGroups:a.markActiveGroup(e)})},a.moveStructToActiveGroup=function(e){var t=g.a.find(a.selectedStructs,["id",e]),n=a.state.structureGroups.map((function(n){var a=n.active?[].concat(Object(I.a)(n.structs),[t]):n.structs.filter((function(t){return t.id!==e}));return Object(p.a)(Object(p.a)({},n),{},{structs:a})}));a.setState({structureGroups:n})},a.updateGroupInitParams=function(e,t,n){var o=a.state.structureGroups.map((function(a,o){return o===e?Object(p.a)(Object(p.a)({},a),{},{initializingOptions:Object(p.a)(Object(p.a)({},a.initializingOptions),{},Object(u.a)({},t,n))}):a}));a.setState({structureGroups:o})},a.toggleVisibility=function(){document.dispatchEvent(new Event("togglePlotInitializer"))},a.updateInitializingOptions=function(e,t){a.setState(Object(u.a)({},e,t))},a.getNewPlot=function(){a.selectedPlotables.forEach((function(e){e.chosenPlots.forEach((function(t){de.newPlot({tabID:a.defaultTabID,plotable_path:e.path,plot_method:t})}))})),a.state.structureGroups.forEach((function(e){var t=e.structs,n=e.initializingOptions;if(n.mergeMethod.includes("separate")){var a=n.mergeMethod.includes("Animation");t.forEach((function(e){n.plotClasses.forEach((function(t){de.newPlot({tabID:n.tabID,structID:e.id,animation:a,plotClass:t})}))}))}})),a.toggleVisibility(),a.props.setActiveStructs([]),a.props.setActivePlotables([])},a.nothingToPlotMessage=function(){return o.a.createElement("div",null,o.a.createElement("div",{style:{color:"darkred",fontSize:"1.3em",fontWeight:"bold"}},"There's nothing to plot currently"),o.a.createElement("div",null,"Select a structure or plotable to begin."))},a.state={structureGroups:[],plotables:[]},a}return Object(x.a)(n,[{key:"componentDidMount",value:function(){this.onStructsUpdate([])}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(e){g.a.isEqual(e.active.structs,this.props.active.structs)||this.onStructsUpdate(e.active.structs)}},{key:"render",value:function(){var e=this;if(0===this.props.tabs.length)return null;var t=this.selectedPlotables;return o.a.createElement("div",{className:"plotInitializer",style:this.props.style},o.a.createElement(V.a,{style:{margin:20,padding:20,background:"aliceblue",overflow:"visible"}},this.selectedStructs.length>0?o.a.createElement("div",null,o.a.createElement("div",{className:"sectionHeader"},"Structures"),this.state.structureGroups.map((function(t,n){return o.a.createElement(jt,Object.assign({},t,{onInitParamChange:function(t,a){return e.updateGroupInitParams(n,t,a)},setGroupAsActive:function(){return e.setGroupAsActive(n)},removeGroup:function(){return e.removeGroup(n)},splitGroup:function(){return e.splitGroup(n)},moveStructToActiveGroup:e.moveStructToActiveGroup}))})),o.a.createElement("div",{onClick:this.addGroup},"New Group")):null,this.selectedPlotables.length>0?o.a.createElement("div",{className:"sectionHeader"},"Plotables"):null,o.a.createElement("div",null,t.map((function(e){return o.a.createElement(Tt,{plotable:e})}))),0===[].concat(Object(I.a)(this.selectedPlotables),Object(I.a)(this.selectedStructs)).length?this.nothingToPlotMessage():null,o.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",paddingTop:20}},o.a.createElement(le.a,{style:{marginRight:20},onClick:this.toggleVisibility,endIcon:o.a.createElement(F.b,null)},"Dismiss"),o.a.createElement(le.a,{style:{marginLeft:20},onClick:this.getNewPlot,endIcon:o.a.createElement(F.d,null)},"Initialize plots"))))}},{key:"selectedStructs",get:function(){return this.props.activeStructs||[]}},{key:"selectedPlotables",get:function(){return this.props.activePlotables||[]}},{key:"defaultTabID",get:function(){return this.props.active.tab?this.props.active.tab:this.props.tabs.length&&this.props.tabs.length>0?this.props.tabs[0].id:void 0}}]),n}(a.Component),kt={setActiveTab:X,addPlots:K,setActiveStructs:Q,setActivePlotables:te,informLoadingPlot:J,informLoadedPlot:$,deactivateStruct:Z,deactivatePlotable:ne},At=Object(w.b)((function(e){return{activeStructs:P(e),activePlotables:k(e),tabs:e.session.tabs,active:e.active}}),kt)(Pt),wt=n(1476),_t=n(1481),It=n(1475),Dt=n(1477),xt=n(1484),Lt=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},o.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name),o.a.createElement(xt.a,Object.assign({id:this.props.id||this.props.setting.key,checked:this.props.value,onChange:function(t){return e.props.onChange(t.target.checked)}},this.props.inputField.params)))}}]),n}(a.Component),Gt=rt.z.ValueContainer,Nt=rt.z.Placeholder,Mt=function(e){var t=e.children,n=Object(ot.a)(e,["children"]);return o.a.createElement(Gt,n,o.a.createElement(Nt,Object.assign({},n,{isFocused:n.isFocused}),n.selectProps.placeholder),o.a.Children.map(t,(function(e){return e&&e.type!==Nt?e:null})))},Rt=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){var e=this,t=this.props.label||(this.props.setting?this.props.setting.name:"");return o.a.createElement(st.a,Object.assign({value:Array.isArray(this.props.value)?this.props.value.map((function(t){return g.a.find(e.props.inputField.params.options,{value:t})})):g.a.find(this.props.inputField.params.options,{value:this.props.value}),onChange:function(t){return e.props.onChange(Array.isArray(t)?t.map((function(e){return e.value})):t?t.value:null)}},this.props.inputField.params,{components:{ValueContainer:Mt},styles:{container:function(e,t){return Object(p.a)(Object(p.a)({},e),{},{marginTop:20,marginBottom:20})},valueContainer:function(e,t){return Object(p.a)(Object(p.a)({},e),{},{overflow:"visible"})},placeholder:function(e,t){return Object(p.a)(Object(p.a)({},e),{},{position:"absolute",top:t.hasValue||t.selectProps.inputValue?-15:"50%",transition:"top 0.1s, font-size 0.1s",fontSize:(t.hasValue||t.selectProps.inputValue)&&13,color:t.hasValue||t.selectProps.inputValue?"blue":"#ccc",marginLeft:t.hasValue||t.selectProps.inputValue?-5:0})}},placeholder:t}))}}]),n}(a.Component),Vt=n(498),zt=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(e){var a;return Object(D.a)(this,n),(a=t.call(this,e)).toggleColorPicker=function(){a.setState({displayColorPicker:!a.state.displayColorPicker})},a.state={tempcolor:void 0},a}return Object(x.a)(n,[{key:"render",value:function(){var e=this,t=this.state.displayColorPicker?o.a.createElement("div",{style:{position:"absolute",bottom:60}},o.a.createElement(Vt.ChromePicker,Object.assign({color:this.state.tempcolor||this.props.value||"black",onChange:function(t){e.setState({tempcolor:t.hex})},onChangeComplete:function(t){e.props.onChange(t.hex),e.setState({tempcolor:void 0})}},this.props.inputField.params))):null;return o.a.createElement("div",{style:{position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},o.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name),o.a.createElement("div",{className:"z-depth-2",onClick:this.toggleColorPicker,style:{width:30,height:30,borderRadius:30,background:this.props.value}}),t)}}]),n}(a.Component),Bt=n(322),Ft=(n(401),Object(Bt.b)(Bt.a)),Ut=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){var e=this,t=this.props.value||[0,0];return o.a.createElement("div",{style:{paddingLeft:"10%",paddingRight:"10%"}},o.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name),o.a.createElement(Ft,Object.assign({value:t,onChange:function(t){return e.props.onChange(t)}},this.props.inputField.params)))}}]),n}(a.Component),Ht=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){var e=this,t=null!=this.props.value?this.props.value:["",""];return o.a.createElement("div",null,o.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name),o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(se.a,Object.assign({style:{marginRight:30,flex:1},type:"number",variant:"outlined",label:"min",value:t[0],onChange:function(n){return t[1]>=Number(n.target.value)?e.props.onChange([gn.number(n.target.value),t[1]]):null}},this.props.inputField.params)),o.a.createElement(se.a,Object.assign({style:{marginLeft:30,flex:1},type:"number",variant:"outlined",label:"max",value:t[1],onChange:function(n){return Number(n.target.value)>=t[0]?e.props.onChange([t[0],gn.number(n.target.value)]):null}},this.props.inputField.params))))}}]),n}(a.Component),Kt=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){var e=this,t=this.props.inputField?this.props.inputField.params:{},n=this.props.value||"",a=this.props.label||(this.props.setting?this.props.setting.name:"");return o.a.createElement("div",null,o.a.createElement(se.a,Object.assign({type:"number",label:a,value:n,onChange:function(t){return e.props.onChange(gn.number(t.target.value))},style:this.props.style,variant:"outlined"},t)))}}]),n}(a.Component),Wt=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(e){var a;return Object(D.a)(this,n),(a=t.call(this,e)).addQuery=function(){var e=a.props.setting.inputField.queryForm.reduce((function(e,t){return e[t.key]=t.default||null,e}),{});e.active=!0,a.props.onChange([].concat(Object(I.a)(a.props.value),[e]))},a.changeSettingValue=function(e,t,n){var o=g.a.cloneDeep(a.props.value);o[e]=Object(p.a)(Object(p.a)({},o[e]),{},Object(u.a)({},t,n)),a.props.onChange(o)},a.renderQuery=function(e,t){return o.a.createElement("div",{key:t,style:{display:"flex",justifyContent:"center",alignItems:"center",marginBottom:10}},o.a.createElement(xt.a,{id:t+"active",checked:e.active,onChange:function(e){return a.changeSettingValue(t,"active",e.target.checked)}}),o.a.createElement("div",{className:"queryCard MuiPaper-elevation3",style:{flex:1,background:e.active?"#CBFFC0":"#ffc3cd",borderRadius:10,margin:10}},o.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"}},a.props.setting.inputField.queryForm.map((function(n){return o.a.createElement(gn,{id:String(t)+n.key,setting:n,value:e[n.key],onValueChange:function(e){return a.changeSettingValue(t,n.key,e)}})})))))},a.state={displayColorPicker:{}},a}return Object(x.a)(n,[{key:"render",value:function(){var e=this,t=this.props.value||[];return o.a.createElement("div",null,o.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name),o.a.createElement("div",null,t.map((function(t,n){return e.renderQuery(t,n)})),o.a.createElement(le.a,{"data-tip":"Add a new query",onClick:this.addQuery},"Add Query")))}}]),n}(a.Component),qt=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){var e;Object(D.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).changeValue=function(t,n){var a=g.a.cloneDeep(e.props.value);a||(a=e.handleNone()),a[n]=t,e.props.onChange(a)},e.handleNone=function(){return Array((e.props.inputField.params.shape||[1])[0]).fill(null)},e}return Object(x.a)(n,[{key:"render",value:function(){var e=this,t=this.props.inputField.params.vertical?{marginLeft:20,marginRight:20,marginBottom:0,width:70}:{marginLeft:5,marginRight:5,marginBottom:0,width:100},n=Object(p.a)(Object(p.a)({},t),{},{textAlign:"center"}),a=this.props.value;return a||(a=this.handleNone()),o.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},o.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name),o.a.createElement("div",{style:{display:"flex",flexDirection:this.props.inputField.params.vertical?"column":"row",justifyContent:"center",alignItems:"center"},className:"arrayContainer"},a.map((function(t,a){return o.a.createElement(Kt,{value:t,onChange:function(t){return e.changeValue(t,a)},style:n})}))))}}]),n}(a.Component),Yt=n(178),Xt=Object(Yt.d)((function(){return o.a.createElement(F.e,{size:20,color:"gray"})})),Qt=Object(Yt.c)((function(e){return o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},e.sortable?o.a.createElement(Xt,null):null,o.a.createElement(gn,e),e.remove?o.a.createElement(Xe.b,{color:"darkred",size:20,onClick:e.remove}):null)})),Zt=Object(Yt.b)((function(e){var t=e.children;return o.a.createElement("div",null,t)})),Jt=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){var e;Object(D.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).changeValue=function(t,n){var a=g.a.cloneDeep(e.sanitizeVal());a[n]=t,e.props.onChange(a)},e.sanitizeVal=function(){return e.props.value?e.props.value:e.handleNone()},e.handleNone=function(){return[]},e.addItem=function(){e.props.onChange([].concat(Object(I.a)(e.sanitizeVal()),[null]))},e.removeItem=function(t){e.props.onChange(e.sanitizeVal().filter((function(e,n){return n!==t})))},e.onSortEnd=function(t){var n=t.oldIndex,a=t.newIndex;e.props.onChange(Object(Yt.a)(e.sanitizeVal(),n,a))},e}return Object(x.a)(n,[{key:"render",value:function(){var e=this,t=this.sanitizeVal();return o.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},o.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name),o.a.createElement(Zt,{onSortEnd:this.onSortEnd,useDragHandle:!0},t.map((function(t,n){return o.a.createElement(Qt,{key:"item-".concat(n),index:n,value:t,onValueChange:function(t){return e.changeValue(t,n)},remove:function(){return e.removeItem(n)},sortable:e.props.setting.inputField.params.sortable,setting:e.props.setting.inputField.params.itemInput})}))),o.a.createElement(Xe.a,{"data-tip":"Add a new item",onClick:this.addItem,size:20,color:"green"}))}}]),n}(a.Component),$t=n(501),en=rt.z.ValueContainer,tn=rt.z.Placeholder,nn=function(e){var t=e.children,n=Object(ot.a)(e,["children"]);return o.a.createElement(en,n,o.a.createElement(tn,Object.assign({},n,{isFocused:n.isFocused}),n.selectProps.placeholder),o.a.Children.map(t,(function(e){return e&&e.type!==tn?e:null})))},an=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){var e;Object(D.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).santitizeValue=function(t){var n=g.a.find(e.props.inputField.params.options,{value:t});return!n&&t&&(n={label:t,value:t}),n||null},e.handleChange=function(t){var n;n=Array.isArray(t)?t.map((function(e){return e.value})):t?t.value:e.props.inputField.params.isMulti?[]:null,e.props.onChange(n)},e}return Object(x.a)(n,[{key:"render",value:function(){var e,t=this,n=this.props.label||(this.props.setting?this.props.setting.name:"");return e=Array.isArray(this.props.value)?this.props.value.map((function(e){return t.santitizeValue(e)})):this.santitizeValue(this.props.value),o.a.createElement($t.a,Object.assign({value:e,onChange:this.handleChange},this.props.inputField.params,{components:{ValueContainer:nn},styles:{container:function(e,t){return Object(p.a)(Object(p.a)({},e),{},{marginTop:20,marginBottom:20})},valueContainer:function(e,t){return Object(p.a)(Object(p.a)({},e),{},{overflow:"visible"})},placeholder:function(e,t){return Object(p.a)(Object(p.a)({},e),{},{position:"absolute",top:t.hasValue||t.selectProps.inputValue?-15:"50%",transition:"top 0.1s, font-size 0.1s",fontSize:(t.hasValue||t.selectProps.inputValue)&&13,color:t.hasValue||t.selectProps.inputValue?"blue":"#ccc",marginLeft:t.hasValue||t.selectProps.inputValue?-5:0})}},placeholder:n}))}}]),n}(a.Component),on=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){var e;Object(D.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={},e.onCategoryChange=function(t,n){e.props.onChange(Object(p.a)(Object(p.a)({},e.props.value),{},Object(u.a)({},t,n)))},e.addNewCategory=function(t){t&&e.onCategoryChange(t,void 0)},e.deleteCategory=function(t){e.props.onChange(g.a.omit(e.props.value,t))},e.renderCategory=function(t,n){if(!pn[t])return null;var a=pn[t],r=a.component,s=a.name;return o.a.createElement("fieldset",{style:{borderStyle:"dashed",borderColor:"#ccc",borderRadius:5,borderWidth:1,padding:5,marginTop:2,marginBottom:2}},o.a.createElement("legend",{style:{paddingLeft:10,paddingRight:10,paddingTop:2,paddingBottom:2,borderRadius:3,backgroundColor:"white"}},s),o.a.createElement(r,Object.assign({},e.props,{value:n,onChange:function(n){return e.onCategoryChange(t,n)}})),o.a.createElement(Oe.a,{onClick:function(){return e.deleteCategory(t)}},o.a.createElement(z.a,{color:"red"})))},e}return Object(x.a)(n,[{key:"render",value:function(){var e=this,t=this.props.label||(this.props.setting?this.props.setting.name:""),n=this.props.value||{};return Array.isArray(n)?(n={index:n},this.props.onChange(n)):o.a.createElement("div",null,o.a.createElement("div",null,t),o.a.createElement("div",null,Object.keys(n).map((function(t){return e.renderCategory(t,n[t])}))),o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("div",{style:{flex:1,paddingLeft:5}},o.a.createElement(Rt,{value:this.state.new_cat_value,onChange:function(t){return e.setState({new_cat_value:t})},label:"Add a new selection...",inputField:{params:{options:Object.keys(pn).map((function(e){return{label:pn[e].name,value:e}}))}}})),o.a.createElement(Oe.a,{onClick:function(){return e.addNewCategory(e.state.new_cat_value)}},o.a.createElement(F.h,{color:"green"}))))}}]),n}(a.Component),rn=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){return o.a.createElement(Rt,this.props)}}]),n}(a.Component),sn=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){var e=this.props.value||[0,1];return o.a.createElement(Ut,{value:e,setting:{},inputField:{params:{min:0,max:1,step:.01,tipFormatter:function(e){return"".concat(e)}}},onChange:this.props.onChange})}}]),n}(a.Component),ln=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){var e=this.props.value||[null,null];return o.a.createElement(Ht,{value:e,setting:{},inputField:{params:{}},onChange:this.props.onChange})}}]),n}(a.Component),cn=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){var e=this.props.value||null;return o.a.createElement(Kt,{value:e,setting:{},inputField:{params:{min:1}},onChange:this.props.onChange})}}]),n}(a.Component),un=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){var e=this.props.value||null;return o.a.createElement(ie,{value:e,setting:{},inputField:{params:{}},onChange:this.props.onChange})}}]),n}(a.Component),pn={index:{name:"Indices",component:rn},fx:{name:"Fractional X",component:sn},fy:{name:"Fractional Y",component:sn},fz:{name:"Fractional Z",component:sn},x:{name:"X coordinate",component:ln},y:{name:"Y coordinate",component:ln},z:{name:"Z coordinate",component:ln},Z:{name:"Atomic Number",component:cn},neighbours:{name:"Neighbours",component:function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){var e;Object(D.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).onRangeChange=function(t){e.props.onChange(Object(p.a)(Object(p.a)({},e.props.value),{},{min:t[0],max:t[1]}))},e.onKeyChange=function(t,n){e.props.onChange(Object(p.a)(Object(p.a)({},e.props.value),{},Object(u.a)({},t,n)))},e}return Object(x.a)(n,[{key:"render",value:function(){var e=this,t=this.props.value||{min:0,max:20,R:1};return o.a.createElement("div",null,o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",paddingBottom:5}},o.a.createElement(Ht,{value:[t.min,t.max],setting:{name:""},inputField:{params:{min:0}},onChange:this.onRangeChange}),o.a.createElement(Kt,{style:{paddingLeft:5},value:t.R,setting:{name:"R"},inputField:{params:{min:0}},onChange:function(t){return e.onKeyChange("R",t)}})),o.a.createElement(ie,{value:t.neighbour?t.neighbour.tag:null,setting:{name:"Neighbour tag"},inputField:{params:{placeholder:"Neighbour tag..."}},onChange:function(t){return e.onKeyChange("neighbour",{tag:t})}}))}}]),n}(a.Component)},tag:{name:"Atom tag",component:un}},dn={textinput:ie,switch:Lt,dropdown:Rt,"creatable dropdown":an,color:zt,rangeslider:Ut,range:Ht,number:Kt,queries:Wt,vector:qt,list:Jt,"atom selector":on},hn=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(e){var a;return Object(D.a)(this,n),(a=t.call(this,e)).w=function(e){if(e)for(var t=["s","m","l"].map((function(t){return e.indexOf(t)>=0})),n=function(n){if(t[n])return{v:g.a.find(e.split(" "),(function(e){return e.indexOf(["s","m","l"][n])>=0})).substr(1)}},o=["small","medium","infinity"].indexOf(a.props.browser.mediaType);o>-1;o--){var r=n(o);if("object"===typeof r)return r.v}},a.changeSettingValue=function(e){a.props.onValueChange?a.props.onValueChange(e):a.props.changeSettings(a.props.onSettingChangeType,a.props.setting.key,e,a.props.onSettingChangeExtraParams)},a.state={},a}return Object(x.a)(n,[{key:"render",value:function(){var e=this,t=this.props.setting.inputField,n=dn[t.type];if(!n)return null;var a=o.a.createElement(n,Object.assign({},this.props,{inputField:t,onChange:function(t){return e.changeSettingValue(t)}})),r={"data-tip":(this.props.setting.help?this.props.setting.help+"<br>":"")+"Default: "+(this.props.setting.default||"None"),"data-multiline":!0,"data-effect":"solid","data-place":"color"===t.type?"bottom":"top"},s=null==this.props.value?"rgba(230,230,230,0.4)":void 0;return o.a.createElement("div",Object.assign({onClick:function(n){return"queries"!==t.type&&n.ctrlKey?e.changeSettingValue(null==e.props.value?e.props.setting.default:null):null},style:Object(p.a)({backgroundColor:s,paddingTop:10,paddingBottom:10,paddingLeft:20,paddingRight:20,borderRadius:3,marginTop:20,marginBottom:20,width:this.w(t.width)},t.style)},r),a)}}]),n}(a.Component);hn.number=function(e){return["","-"].includes(e)?e:Number(e)};var mn={changeSettings:function(e,t,n,a){return{type:e,settingKey:t,value:n,extraParams:a}}},gn=Object(w.b)((function(e){return{browser:e.browser}}),mn)(hn),fn=n(502),bn=n.n(fn),vn=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){var e;Object(D.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).hotKeysHandlers={MOVE_EXPANDED_UP:function(){return e.moveExpanded("up")},MOVE_EXPANDED_DOWN:function(){return e.moveExpanded("down")}},e.moveExpanded=function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"down";"up"===n?t=0!==e.state.expanded?e.state.expanded-1:2:"down"===n&&(t=2!==e.state.expanded?e.state.expanded+1:0),e.setState({expanded:t})},e.renderSettingsGroup=function(t){return t.map((function(t){return t.inputField?o.a.createElement(gn,{key:t.key,setting:t,value:e.props.settings[t.key],onSettingChangeType:e.props.onSettingChangeType,onSettingChangeExtraParams:e.props.onSettingChangeExtraParams}):null}))},e.renderSettingsGroups=function(t){return e.props.paramGroups.map((function(n,a){var r=n.key?n.key:"null",s=t[r];if(!s)return null;var i=g.a.groupBy(s,"subGroup"),l=(n.subGroups?[{key:"null",name:null}].concat(Object(I.a)(n.subGroups)):[{key:"null",name:null}]).map((function(t){var n=t.key,a=t.name;return i[n]?o.a.createElement("div",{key:n},o.a.createElement("div",{style:{paddingBottom:20,fontWeight:"bold",fontSize:"1.3em",textAlign:"left"}},a),o.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",alignItems:"center"}},e.renderSettingsGroup(i[n]))):null})),c=function(){return e.props.submitSettings(s.reduce((function(t,n){return t[n.key]=e.props.settings[n.key],t}),{}))},u={SUBMIT_SETTINGS:c,UNDO_SETTINGS:e.props.undoSettings};return o.a.createElement(_t.a,{key:r},o.a.createElement(It.a,{style:{display:"flex",justifyContent:"center",alignItems:"center"}},o.a.createElement(wt.a,null,n.icon),o.a.createElement("span",{style:{paddingLeft:10}},n.name)),o.a.createElement(Dt.a,null,o.a.createElement(he.HotKeys,{keyMap:ve,handlers:u},o.a.createElement(he.ObserveKeys,null,o.a.createElement("blockquote",{style:{textAlign:"left"}},bn()(n.description)),l,o.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"}},o.a.createElement(le.a,{onClick:e.props.undoSettings,"data-tip":"This will roll back to previous settings.<br> IT AFFECTS ALL GROUPS OF PARAMETERS, not only this one.",className:"orange",style:{margin:20}},o.a.createElement(B.a,null),"Previous settings"),o.a.createElement(le.a,{"data-tip":"This will restore all settings to the plot's defaults",className:"red",style:{margin:20}},o.a.createElement(F.k,null),"Restore defaults"),o.a.createElement(le.a,{"data-tip":"This will change the settings and will update everything accordingly.<br> IT ONLY AFFECTS THIS GROUP OF SETTINGS, not all settings",onClick:c,className:"blue",style:{margin:20}},"Submit settings",o.a.createElement(B.b,null)))))))}))},e}return Object(x.a)(n,[{key:"render",value:function(){var e=g.a.groupBy(this.props.params,"group");return o.a.createElement("div",{style:this.props.style},this.renderSettingsGroups(e))}}]),n}(a.Component),yn=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){var e;Object(D.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).hotKeysHandlers={UNDO_SETTINGS:function(){return e.undoSettings()},SUBMIT_ALL_SETTINGS:function(){return e.submitSettings("all")}},e.submitSettings=function(t){"all"===t&&(t=e.props.activePlot.unsubmittedSettings),de.updatePlotSettings(e.props.activePlot.id,t)},e.undoSettings=function(){de.undoPlotSettings(e.props.activePlot.id)},e}return Object(x.a)(n,[{key:"render",value:function(){var e=this.props.activePlot;if(!e)return null;var t=Object(p.a)(Object(p.a)({},e.settings),e.unsubmittedSettings),n=o.a.createElement(vn,{settings:t,params:e.params,paramGroups:e.paramGroups,onSettingChangeType:"CHANGE_PLOT_SETTINGS",onSettingChangeExtraParams:{plotID:e.id},submitSettings:this.submitSettings,undoSettings:this.undoSettings});return o.a.createElement("div",{style:Object(p.a)({},this.props.style)},o.a.createElement(he.GlobalHotKeys,{keyMap:ye.global,handlers:this.hotKeysHandlers}),o.a.createElement(yt.a,{container:!0},o.a.createElement(yt.a,{item:!0,sm:12,md:4,style:{height:"90vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},o.a.createElement(Se,{plot:e,style:{height:"80vh"}})),o.a.createElement(yt.a,{item:!0,sm:12,md:8,style:{padding:20,display:"flex",flexDirection:"column"}},"infinity"===this.props.browser.mediaType?o.a.createElement("div",{className:"scrollView",style:{maxHeight:"90vh"}},n):n)),o.a.createElement(N.a,{multiline:!0,disable:!!this.props.session.settings&&!this.props.session.settings.showTooltips}))}}]),n}(a.Component),On={setCurrentSession:H,addPlots:K,setActivePlot:Y,setNewStructures:W,informLoadedPlot:$,informLoadingPlot:J},En=Object(w.b)((function(e){return{plots:e.plots,structures:e.structures,active:e.active,activePlot:A(e),session:e.session,browser:e.browser}}),On)(yn),jn=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(e){var a;return Object(D.a)(this,n),(a=t.call(this,e)).submitSettings=function(e){de.updateSessionSettings(e)},a.undoSettings=function(){de.undoSessionSettings()},a.state={},a}return Object(x.a)(n,[{key:"render",value:function(){return g.a.isEmpty(this.props.session)?null:o.a.createElement("div",{className:"scrollView",style:Object(p.a)(Object(p.a)({},this.props.style),{},{padding:20})},o.a.createElement(vn,{defaultActiveKey:1,settings:this.props.session.settings,params:this.props.session.params,paramGroups:this.props.session.paramGroups,onSettingChangeType:"CHANGE_SESSION_SETTINGS",submitSettings:this.submitSettings,undoSettings:this.undoSettings}),o.a.createElement(N.a,{multiline:!0,disable:!!this.props.session.settings&&!this.props.session.settings.showTooltips}))}}]),n}(a.Component),Sn=Object(w.b)((function(e){return{session:e.session}}),(function(e){return{setCurrentSession:function(t){return e(H(t))}}}))(jn),Cn=n(503),Tn=n.n(Cn),Pn=n(1478),kn=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(e){var a;return Object(D.a)(this,n),(a=t.call(this,e)).applyMethod=function(){de.callPlotShortcut(a.props.plot.id,a.props.shortcut)},a.renderDetails=function(){},a.state={showingDetails:!1},a}return Object(x.a)(n,[{key:"render",value:function(){return o.a.createElement(_t.a,null,o.a.createElement(It.a,{style:{display:"flex",cursor:"pointer",justifyContent:"space-between",alignItems:"center"}},o.a.createElement("span",{style:{color:"gray",marginRight:10}},this.props.shortcut),o.a.createElement("span",{style:{fontWeight:"bold"}},this.props.info.name)),o.a.createElement(Dt.a,{style:{fontSize:13}},o.a.createElement(Tn.a,{source:this.props.info.description})),o.a.createElement(Pn.a,null,o.a.createElement(le.a,{onClick:this.applyMethod},"APPLY METHOD")))}}]),n}(a.Component),An=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"scrollView",style:{textAlign:"left",borderRadius:3,maxHeight:"90vh"}},Object.keys(this.props.plot.shortcuts).map((function(t){return o.a.createElement(kn,{plot:e.props.plot,shortcut:t,info:e.props.plot.shortcuts[t]})})))}}]),n}(a.Component),wn=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){var e;Object(D.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).hotKeysHandlers={},e}return Object(x.a)(n,[{key:"render",value:function(){return this.props.activePlot?o.a.createElement("div",{style:Object(p.a)({},this.props.style)},o.a.createElement(he.GlobalHotKeys,{keyMap:ye.global,handlers:this.hotKeysHandlers}),o.a.createElement(yt.a,{container:!0},o.a.createElement(yt.a,{item:!0,sm:12,md:4,style:{height:"90vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},o.a.createElement(Se,{plot:this.props.activePlot,style:{height:"80vh"}})),o.a.createElement(yt.a,{item:!0,sm:12,md:8,style:{padding:20,display:"flex",flexDirection:"column"}},o.a.createElement(An,{plot:this.props.activePlot}))),o.a.createElement(N.a,{multiline:!0,disable:!!this.props.session.settings&&!this.props.session.settings.showTooltips})):null}}]),n}(a.Component),_n={setCurrentSession:H,addPlots:K,setActivePlot:Y,setNewStructures:W,informLoadedPlot:$,informLoadingPlot:J},In=Object(w.b)((function(e){return{plots:e.plots,structures:e.structures,active:e.active,activePlot:A(e),session:e.session,browser:e.browser}}),_n)(wn),Dn=n(317);var xn=function(){var e=Object(a.useCallback)((function(e){e.forEach((function(e){console.warn("ACCEPTED FILE"),de.sendFile(e)}))}),[]),t=Object(Dn.useDropzone)({onDrop:e}),n=t.getRootProps,r=t.getInputProps;return o.a.createElement("div",n(),o.a.createElement("input",r()),o.a.createElement("p",null,"Drag 'n' drop some files here, or click to select files"))},Ln=n(320),Gn=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(e){var a;return Object(D.a)(this,n),(a=t.call(this,e)).state={connected:de.socket.connected},a}return Object(x.a)(n,[{key:"componentDidMount",value:function(){var e=this;de.onConnect((function(){return e.setState({connected:!0})})),de.onDisconnect((function(){return e.setState({connected:!1})}))}},{key:"render",value:function(){var e=this.state.connected?{backgroundColor:"lightgreen"}:{backgroundColor:"salmon"};return o.a.createElement("div",Object.assign({},this.props,{style:Object(p.a)(Object(p.a)({},e),this.props.style),"data-tip":this.state.connected?"Connected to ".concat(de.apiAddress):"Currently not connected","data-place":"left","data-background-color":e.backgroundColor}),this.state.connected?o.a.createElement(Ln.a,{color:"green",size:20}):o.a.createElement(Ln.b,{color:"darkred",size:20}))}}]),n}(a.Component),Nn=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return o.a.createElement("div",{id:"speck-root",style:Object(p.a)(Object(p.a)({},this.props.style),{},{justifyContent:"center",alignItems:"center",display:"flex"})},o.a.createElement("canvas",{id:"speck-canvas",style:{width:800,height:800}}))}}]),n}(a.Component),Mn=n(316),Rn=n.n(Mn),Vn=n(505),zn=n.n(Vn),Bn=(n(1418),{editable:!0}),Fn=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(e){var a;Object(D.a)(this,n),(a=t.call(this,e)).hotKeysHandlers={UNDO_SETTINGS:function(){return a.undoSettings()},SUBMIT_ALL_SETTINGS:function(){return a.submitSettings("all")}},a.submitSettings=function(e){"all"===e&&(e=a.props.activePlot.unsubmittedSettings),de.updatePlotSettings(a.props.activePlot.id,e)},a.undoSettings=function(){de.undoPlotSettings(a.props.activePlot.id)};var o=e.activePlot;return a.state=o.figure,a}return Object(x.a)(n,[{key:"componentWillUnmount",value:function(){de.updateFigure(this.props.activePlot.id,Object(p.a)(Object(p.a)({},this.state),{},{overwrite:!0}))}},{key:"render",value:function(){var e=this;return this.props.activePlot?o.a.createElement(zn.a,{data:this.state.data,layout:this.state.layout,config:Bn,frames:this.state.frames,plotly:Rn.a,style:Object(p.a)({},this.props.style),onUpdate:function(t,n,a){return e.setState({data:t,layout:n,frames:a})},useResizeHandler:!0,debug:!0,advancedTraceTypeSelector:!0}):null}}]),n}(a.Component),Un=Object(w.b)((function(e){return{activePlot:A(e)}}),null)(Fn),Hn=n(323);function Kn(e){var t=Object(a.useRef)(),n=Object(a.useState)(!1),r=Object(Re.a)(n,2),s=r[0],i=r[1],l=Object(a.useState)(!1),c=Object(Re.a)(l,2),u=c[0],p=c[1];return Object(Hn.b)((function(){t.current.rotation.x=t.current.rotation.y+=.01})),o.a.createElement("mesh",Object.assign({},e,{ref:t,scale:u?[1.5,1.5,1.5]:[1,1,1],onClick:function(e){return p(!u)},onPointerOver:function(e){return i(!0)},onPointerOut:function(e){return i(!1)}}),o.a.createElement("boxBufferGeometry",{attach:"geometry",args:[1,1,1]}),o.a.createElement("meshStandardMaterial",{attach:"material",color:s?"hotpink":"orange"}))}function Wn(e){return o.a.createElement(Hn.a,Object.assign({style:e.style},e),o.a.createElement("ambientLight",null),o.a.createElement("pointLight",{position:[10,10,10]}),o.a.createElement(Kn,{position:[-1.2,0,0],sign:-1}),o.a.createElement(Kn,{position:[1.2,0,0]}))}var qn=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){return o.a.createElement("object",{data:"./sisl-docs/html/index.html","aria-label":"Sisl documentation",width:"100%",height:"100%"})}}]),n}(a.Component);Object(he.configure)({logLevel:"debug",simulateMissingKeyPressEvents:!1});var Yn=function(e){Object(L.a)(n,e);var t=Object(G.a)(n);function n(e){var a;return Object(D.a)(this,n),(a=t.call(this,e)).hotKeysHandlers={GO_TO_SETTINGS:function(){return a.props.setActivePage("settings")},GO_TO_DASHBOARD:function(){return a.props.setActivePage("plots")},GO_TO_MOLECULEVIEWER:function(){return a.props.setActivePage("moleculeViewer")},SHOW_AVAIL_HOTKEYS:function(){return console.warn(Object(he.getApplicationKeyMap)())}},a.syncWithSession=function(e){if(!e)return de.askForSession();a.props.setCurrentSession(e)},a.getNewPlot=function(){de.newPlot(Object(p.a)({tabID:a.props.active.tab},a.state.plotToInitialize)),a.togglePlotInitializer()},a.togglePlotInitializer=function(e){var t="plotInitializer"===a.props.active.page;void 0!==e&void 0!==e.detail?(e.detail.forceShow&&!t&&a.props.setActivePage("plotInitializer"),e.detail.forceHide&&t&&a.props.setActivePage("plots")):a.props.setActivePage(t?"plots":"plotInitializer")},a.state={connected:de.socket.connected,loadingPlots:[]},de.onConnect((function(){a.setState({connected:!0})})),document.addEventListener("syncWithSession",(function(e){return a.syncWithSession(e.detail.session)})),document.addEventListener("updateTabs",(function(){return a.syncWithSession()})),document.addEventListener("loadingPlot",(function(e){a.setState({loadingPlots:[].concat(Object(I.a)(a.state.loadingPlots),[e.detail.plot_id])})})),document.addEventListener("plot",(function(t){var n=t.detail.plot;e.addPlots(Object(u.a)({},n.id,n)),a.setState({loadingPlots:a.state.loadingPlots.filter((function(e){return e!==n.id}))})})),document.addEventListener("newPlot",(function(){return a.syncWithSession()})),document.addEventListener("sessionUpdate",(function(e){e.detail.justUpdated.forEach((function(e){de.getPlot(e)}))})),a}return Object(x.a)(n,[{key:"componentDidMount",value:function(){this.props.setActivePlot(void 0),this.listener=document.addEventListener("togglePlotInitializer",this.togglePlotInitializer)}},{key:"componentDidUpdate",value:function(){var e=this,t=g.a.find(this.props.tabs,["id",this.props.active.tab]);t&&t.plots.forEach((function(t){e.props.plots[t]||-1!==e.state.loadingPlots.indexOf(t)||de.getPlot(t)}))}},{key:"render",value:function(){var e={plots:Ne,settings:Sn,plotLayoutEditor:Un,plotTweaking:En,plotMethods:In,plotInitializer:At,moleculeViewer:Nn,sislDocs:qn}[this.props.active.page];return this.state.connected||"sislDocs"===this.props.active.page?["plotLayoutEditor","sislDocs"].includes(this.props.active.page)?o.a.createElement("div",{style:{marginBottom:0,display:"flex",flexWrap:"wrap",height:"100vh",position:"relative"}},o.a.createElement(he.GlobalHotKeys,{keyMap:Object(p.a)({},me),handlers:this.hotKeysHandlers}),o.a.createElement(e,null),o.a.createElement(Ye,{style:{position:"absolute",bottom:0,right:0}}),"sislDocs"===this.props.active.page?null:o.a.createElement(f.a,null),"sislDocs"===this.props.active.page?null:o.a.createElement(Gn,{connectedProps:{style:{backgroundColor:"lightgreen"}},style:{position:"absolute",right:0,top:0,margin:20,width:40,height:40,borderRadius:40,display:"flex",justifyContent:"center",alignItems:"center"}}),o.a.createElement(N.a,{multiline:!0,disable:!!this.props.session.settings&&!this.props.session.settings.showTooltips})):o.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},o.a.createElement(he.GlobalHotKeys,{keyMap:Object(p.a)({},me),handlers:this.hotKeysHandlers}),o.a.createElement(at,{style:{paddingLeft:15,paddingRight:15,width:"10vw",minWidth:200,borderRight:"#ccc solid 1px"}}),o.a.createElement("div",{style:{flex:1,paddingLeft:20,height:"100vh",display:"flex",flexDirection:"column"}},"plots"===this.props.active.page?o.a.createElement(Ie,null):null,o.a.createElement(e,{style:{flex:1}}),o.a.createElement(xn,null)),o.a.createElement(Ye,null),o.a.createElement(f.a,null),o.a.createElement(Gn,{connectedProps:{style:{backgroundColor:"lightgreen"}},style:{position:"absolute",right:0,top:0,margin:20,width:40,height:40,borderRadius:40,display:"flex",justifyContent:"center",alignItems:"center"}}),o.a.createElement(N.a,{multiline:!0,disable:!!this.props.session.settings&&!this.props.session.settings.showTooltips})):o.a.createElement("div",{style:{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},o.a.createElement("div",{style:{paddingTop:100}},o.a.createElement("div",{style:{fontSize:"2.5em",fontWeight:"bold"}},"We are trying to connect to the sisl API.")),o.a.createElement(Wn,{camera:{position:[0,0,5]}}),o.a.createElement("div",{style:{paddingBottom:100,fontSize:"1.2em"}}," Meanwhile you can have fun with these two moving cubes. "),o.a.createElement(Gn,{connectedProps:{style:{backgroundColor:"lightgreen"}},style:{position:"absolute",right:0,top:0,margin:20,width:40,height:40,borderRadius:40,display:"flex",justifyContent:"center",alignItems:"center"}}),o.a.createElement(f.a,null),o.a.createElement(Ye,null),o.a.createElement(N.a,{multiline:!0,disable:!!this.props.session.settings&&!this.props.session.settings.showTooltips}))}}]),n}(a.Component),Xn={setCurrentSession:H,setActiveTab:X,setSessionTabs:q,setActivePlot:Y,addPlots:K,setNewStructures:W,setNewPlotables:function(e){return{type:"SET_PLOTABLES",newPlotables:e}},setActivePage:ee},Qn=Object(w.b)((function(e){return{plots:e.plots,structures:e.session.structures,tabs:e.session.tabs,active:e.active,session:e.session}}),Xn)(Yn),Zn=function(){var e=Object(i.c)(T,l.b);return{store:e,persistor:Object(c.b)(e)}}(),Jn=Zn.store,$n=Zn.persistor;var ea=function(){return o.a.createElement(w.a,{store:Jn},o.a.createElement(_.a,{persistor:$n},o.a.createElement("div",{className:"App",style:{display:"flex",flexDirection:"column"}},o.a.createElement("div",{className:"appContent",style:{height:"100vh"}},o.a.createElement(Qn,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(ea,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},527:function(e,t,n){e.exports=n(1421)},531:function(e,t,n){},532:function(e,t,n){}},[[527,1,2]]]);
//# sourceMappingURL=main.05bb6bdc.chunk.js.map